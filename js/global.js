var bodyScrollLockOptions={reserveScrollBarGap:!0};window.loadScript=function(url){var existingScript=document.querySelector(`script[src="${url}"]`);if(!existingScript){var script=document.createElement("script");script.src=url,document.body.appendChild(script)}};var Shopify=Shopify||{};Shopify.money_format="${{amount}}",Shopify.formatMoney=function(cents,format){typeof cents=="string"&&(cents=cents.replace(".",""));var value="",placeholderRegex=/\{\{\s*(\w+)\s*\}\}/,formatString=format||this.money_format;function defaultOption(opt,def){return typeof opt>"u"?def:opt}function formatWithDelimiters(number,precision,thousands,decimal){if(precision=defaultOption(precision,2),thousands=defaultOption(thousands,","),decimal=defaultOption(decimal,"."),isNaN(number)||number==null)return 0;number=(number/100).toFixed(precision);var parts=number.split("."),dollars=parts[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+thousands),cents2=parts[1]?decimal+parts[1]:"";return dollars+cents2}switch(formatString.match(placeholderRegex)[1]){case"amount":value=formatWithDelimiters(cents,2);break;case"amount_no_decimals":value=formatWithDelimiters(cents,0);break;case"amount_with_comma_separator":value=formatWithDelimiters(cents,2,".",",");break;case"amount_no_decimals_with_comma_separator":value=formatWithDelimiters(cents,0,".",",");break}return formatString.replace(placeholderRegex,value)};function Delegate(root){this.listenerMap=[{},{}],root&&this.root(root),this.handle=Delegate.prototype.handle.bind(this),this._removedListeners=[]}Delegate.prototype.root=function(root){const listenerMap=this.listenerMap;let eventType;if(this.rootElement){for(eventType in listenerMap[1])listenerMap[1].hasOwnProperty(eventType)&&this.rootElement.removeEventListener(eventType,this.handle,!0);for(eventType in listenerMap[0])listenerMap[0].hasOwnProperty(eventType)&&this.rootElement.removeEventListener(eventType,this.handle,!1)}if(!root||!root.addEventListener)return this.rootElement&&delete this.rootElement,this;this.rootElement=root;for(eventType in listenerMap[1])if(listenerMap[1].hasOwnProperty(eventType)){const isScrollEvent=["wheel","mousewheel"].indexOf(eventType)!==-1;this.rootElement.addEventListener(eventType,this.handle,{capture:!0,passive:isScrollEvent})}for(eventType in listenerMap[0])if(listenerMap[0].hasOwnProperty(eventType)){const isScrollEvent=["wheel","mousewheel"].indexOf(eventType)!==-1;this.rootElement.addEventListener(eventType,this.handle,{capture:!1,passive:isScrollEvent})}return this},Delegate.prototype.captureForType=function(eventType){return["blur","error","focus","load","resize","scroll"].indexOf(eventType)!==-1},Delegate.prototype.on=function(eventType,selector,handler,useCapture){let root,listenerMap,matcher,matcherParam;if(!eventType)throw new TypeError("Invalid event type: "+eventType);if(typeof selector=="function"&&(useCapture=handler,handler=selector,selector=null),useCapture===void 0&&(useCapture=this.captureForType(eventType)),typeof handler!="function")throw new TypeError("Handler must be a type of Function");root=this.rootElement,listenerMap=this.listenerMap[useCapture?1:0];const isScrollEvent=["wheel","mousewheel","touchstart","touchmove"].indexOf(eventType)!==-1;return listenerMap[eventType]||(root&&root.addEventListener(eventType,this.handle,{capture:useCapture,passive:isScrollEvent}),listenerMap[eventType]=[]),selector?/^[a-z]+$/i.test(selector)?(matcherParam=selector,matcher=matchesTag):/^#[a-z0-9\-_]+$/i.test(selector)?(matcherParam=selector.slice(1),matcher=matchesId):(matcherParam=selector,matcher=Element.prototype.matches):(matcherParam=null,matcher=matchesRoot.bind(this)),listenerMap[eventType].push({selector,handler,matcher,matcherParam}),this},Delegate.prototype.off=function(eventType,selector,handler,useCapture){let i,listener,listenerMap,listenerList,singleEventType;if(typeof selector=="function"&&(useCapture=handler,handler=selector,selector=null),useCapture===void 0)return this.off(eventType,selector,handler,!0),this.off(eventType,selector,handler,!1),this;if(listenerMap=this.listenerMap[useCapture?1:0],!eventType){for(singleEventType in listenerMap)listenerMap.hasOwnProperty(singleEventType)&&this.off(singleEventType,selector,handler);return this}if(listenerList=listenerMap[eventType],!listenerList||!listenerList.length)return this;for(i=listenerList.length-1;i>=0;i--)listener=listenerList[i],(!selector||selector===listener.selector)&&(!handler||handler===listener.handler)&&(this._removedListeners.push(listener),listenerList.splice(i,1));return listenerList.length||(delete listenerMap[eventType],this.rootElement&&this.rootElement.removeEventListener(eventType,this.handle,useCapture)),this},Delegate.prototype.handle=function(event2){let i,l;const type=event2.type;let root,phase,listener,returned,listenerList=[],target;const eventIgnore="ftLabsDelegateIgnore";if(event2[eventIgnore]===!0)return;switch(target=event2.target,target.nodeType===3&&(target=target.parentNode),target.correspondingUseElement&&(target=target.correspondingUseElement),root=this.rootElement,phase=event2.eventPhase||(event2.target!==event2.currentTarget?3:2),phase){case 1:listenerList=this.listenerMap[1][type];break;case 2:this.listenerMap[0]&&this.listenerMap[0][type]&&(listenerList=listenerList.concat(this.listenerMap[0][type])),this.listenerMap[1]&&this.listenerMap[1][type]&&(listenerList=listenerList.concat(this.listenerMap[1][type]));break;case 3:listenerList=this.listenerMap[0][type];break}let toFire=[];for(l=listenerList.length;target&&l;){for(i=0;i<l&&(listener=listenerList[i],!!listener);i++)target.tagName&&["button","input","select","textarea"].indexOf(target.tagName.toLowerCase())>-1&&target.hasAttribute("disabled")?toFire=[]:listener.matcher.call(target,listener.matcherParam,target)&&toFire.push([event2,target,listener]);if(target===root||(l=listenerList.length,target=target.parentElement||target.parentNode,target instanceof HTMLDocument))break}let ret;for(i=0;i<toFire.length;i++)if(!(this._removedListeners.indexOf(toFire[i][2])>-1)&&(returned=this.fire.apply(this,toFire[i]),returned===!1)){toFire[i][0][eventIgnore]=!0,toFire[i][0].preventDefault(),ret=!1;break}return ret},Delegate.prototype.fire=function(event2,target,listener){return listener.handler.call(target,event2,target)};function matchesTag(tagName,element){return tagName.toLowerCase()===element.tagName.toLowerCase()}function matchesRoot(selector,element){return this.rootElement===window?element===document||element===document.documentElement||element===window:this.rootElement===element}function matchesId(id,element){return id===element.id}Delegate.prototype.destroy=function(){this.off(),this.root()};class GlobalScrollListener{constructor(){this.callbacks=new Map,this.listenerIdCounter=0,this.isListening=!1,this.boundRunCallbacks=this.runCallbacks.bind(this)}addScrollListener(classInstance,func){const id=++this.listenerIdCounter,key=`${classInstance.constructor.name}_${func.name}_${id}`.replace(/ /g,"_"),boundFunction=func.bind(classInstance);return this.callbacks.set(key,boundFunction),this.isListening||(window.addEventListener("scroll",this.boundRunCallbacks,{passive:!0}),this.isListening=!0),{removeScrollListener:()=>this.removeScrollListenerFunction(key)}}removeScrollListenerFunction(key){this.callbacks.has(key)&&this.callbacks.delete(key),this.callbacks.size===0&&this.isListening&&(window.removeEventListener("scroll",this.boundRunCallbacks),this.isListening=!1)}runCallbacks(){this.callbacks.forEach(callback=>callback())}}const scrollListener=new GlobalScrollListener;class Responsive{constructor(enableGeneralBreakpointChange){this.settings(),this.generalBreakpointChange=enableGeneralBreakpointChange,this.currentBreakpoint=this.getCurrentBreakpoint(),this.breakpointListeners=new Map,this.resizeCallbacks=new Map,this.listenerIdCounter=0,this.initResizeListener()}initResizeListener(){this.boundHandleResize=this.handleResize.bind(this),window.addEventListener("resize",this.boundHandleResize)}settings(){this.matchBreakpoints={phone:"(max-width: 640px)",tablet:"(min-width: 641px) and (max-width: 1024px)",tablet_and_up:"(min-width: 768px)",pocket:"(max-width: 1024px)",lap_and_up:"(min-width: 1025px)",desktop:"(min-width: 1280px)",desktop_wide:"(min-width: 1440px)"},this.currentBreakpoints={phone:"(max-width: 640px)",tablet:"(min-width: 641px) and (max-width: 1024px)",lap:"(min-width: 1025px) and (max-width: 1279px)",desktop:"(min-width: 1280px)"}}handleResize(){const newBreakpoint=this.getCurrentBreakpoint();this.generalBreakpointChange&&this.currentBreakpoint!==newBreakpoint&&document.dispatchEvent(new CustomEvent("breakpoint:changed",{detail:{previousBreakpoint:this.currentBreakpoint,currentBreakpoint:newBreakpoint}})),this.breakpointListeners.forEach((value,key)=>{const isCurrentlyInBreakpoint=this.matchesBreakpoint(key);value!==isCurrentlyInBreakpoint&&(this.breakpointListeners.set(key,isCurrentlyInBreakpoint),document.body.dispatchEvent(new CustomEvent(`breakpoint:${key}`,{detail:{matches:isCurrentlyInBreakpoint}})))}),this.currentBreakpoint=newBreakpoint,this.runCallbacks()}matchesBreakpoint(breakpoint){const query=this.matchBreakpoints[breakpoint];return window.matchMedia(`screen and ${query}`).matches}getCurrentBreakpoint(){for(const[key,query]of Object.entries(this.currentBreakpoints))if(window.matchMedia(`screen and ${query}`).matches)return key}addBreakpointListener(breakpoint){if(!this.matchBreakpoints[breakpoint]){console.error("Breakpoint does not exist:",breakpoint);return}if(this.breakpointListeners.has(breakpoint)){console.warn("Listener already exists for breakpoint:",breakpoint);return}const isInBreakpoint=this.matchesBreakpoint(breakpoint);this.breakpointListeners.set(breakpoint,isInBreakpoint)}addResizeListener(classInstance,func){const id=++this.listenerIdCounter,key=`${classInstance.constructor.name}_${func.name}_${id}`.replace(/ /g,"_"),boundFunction=func.bind(classInstance);return this.resizeCallbacks.set(key,boundFunction),{removeResizeListener:()=>this.removeResizeListenerFunction(key)}}removeResizeListenerFunction(key){this.resizeCallbacks.has(key)&&this.resizeCallbacks.delete(key)}runCallbacks(){this.resizeCallbacks.forEach(callback=>callback())}}const responsive=new Responsive(!1);let alreadyDelegated=!1;class Popup{constructor(element,additionalOverlay){this.element=element,this.delegateElement=new Delegate(this.element),this.delegateBody=new Delegate(document.body),additionalOverlay==!0?this.pageOverlayElement=document.querySelector(".localizationOverlay"):this.pageOverlayElement=document.querySelector(".pageOverlay"),alreadyDelegated==!1&&this.bindEvents()}bindEvents(){alreadyDelegated=!0,this.delegateBody.on("click",'[data-action="open-modal"]',this.openModal.bind(this)),this.delegateBody.on("click",'[data-action="close-modal"]',this.closeModal.bind(this)),document.addEventListener("posted_successfully",this.openModalSpecial.bind(this)),this.onClickOutsideListener=this.closeModal.bind(this)}openModal(){if(event.preventDefault(),event.stopPropagation(),this.pageOverlayElement.classList.add("is-visible"),this.activeModal=document.getElementById(event.target.closest("[aria-controls]").getAttribute("aria-controls")),this.activeModal.getAttribute("aria-hidden")!=="false"){this.activeModal.setAttribute("aria-hidden","false"),this.activeModal.style.display="block",this.pageOverlayElement.addEventListener("click",this.onClickOutsideListener);var focus;if(this.activeModal.id!="modal-country")focus=this.element.querySelector("[data-scrollable]"),bodyScrollLock.disableBodyScroll(focus,bodyScrollLockOptions);else if(responsive.matchesBreakpoint("lap_and_up")){const clickHandler=e=>{e.target.closest("#modal-country")||(this.delegateBody.off("click",clickHandler),this.closeModal())};this.delegateBody.on("click",clickHandler),focus=this.activeModal.querySelectorAll("[data-scrollable]"),focus.forEach(focus2=>bodyScrollLock.disableBodyScroll(focus2,bodyScrollLockOptions))}setTimeout(()=>{trapFocus(this.activeModal)},100)}}openModalSpecial(){event.preventDefault(),event.stopPropagation(),this.pageOverlayElement.classList.add("is-visible"),this.activeModal=document.getElementById(event.detail.id),this.activeModal.setAttribute("aria-hidden","false");var focus;this.activeModal.id!="modal-country"?focus=this.element.querySelector("[data-scrollable]"):focus=document.querySelector("#country-modal").querySelector("[data-scrollable]"),this.pageOverlayElement.addEventListener("click",this.onClickOutsideListener),bodyScrollLock.disableBodyScroll(focus,bodyScrollLockOptions),trapFocus(this.activeModal)}closeModal(){this.activeModal=document.body.querySelector('.Popup[aria-hidden="false"]'),this.activeModal==null&&(this.activeModal=document.body.querySelector('.newsletter-popup[aria-hidden="false"]')),this.activeModal!=null&&(this.pageOverlayElement.classList.remove("is-visible"),this.pageOverlayElement.removeEventListener("click",this.onClickOutsideListener),this.activeModal.setAttribute("aria-hidden","true"),bodyScrollLock.clearAllBodyScrollLocks(),this.activeModal.removeAttribute("style"))}}class RevolutionImageZoom{constructor(element,slideshow){this.element=element,this.slideshow=slideshow,this.delegateElement=new Delegate(this.element),this.delegateRoot=new Delegate(document.body),loadScript(window.theme.pswpScript),this.syncHeight(),this.bindEvents()}syncHeight(){document.documentElement.style.setProperty("--window-inner-height",`${window.innerHeight}px`)}bindEvents(){window.addEventListener("resize",this.syncHeight()),this.delegateElement.on("click",'[data-action="open-product-zoom"]',this.initPhotoSwipe.bind(this)),this.delegateRoot.on("pswpTap",".pswp__button--close",this.photoswiperClose.bind(this))}photoswiperClose(){this.photoSwipeInstance.close,/iPhone|iPad|iPod/i.test(window.navigator.userAgent)&&document.documentElement.classList.remove("pswp-open-in-ios")}initPhotoSwipe(){var images=[],index=0;this.slideshow?(this.slideshow.swiperElement.slides.forEach(function(item){item.classList.contains("ProductSliderCell--Zoom")&&item.querySelector("img")&&images.push(item.querySelector("img"))}),index=this.slideshow.swiperElement.realIndex,this.slideshow.swiperElement.slides[index].querySelector(".ProductSlider--Element").getAttribute("data-image-position")):images.push(document.querySelector(".ProductSlider--Image")),this.createPhotoSwipeInstance(this.createPhotoSwipeItemsFromImages(images),parseInt(index))}initPhotoSwipeFromImageClick(event2,target){if(new Responsive().matchesBreakpoint("pocket"))return;const images=[];Array.from(target.parentElement.children).forEach(item=>{item.classList.contains("ProductSliderCell--Zoom")&&item.querySelector("img")&&images.push(item.querySelector("img"))});const imagePosition=parseInt(target.querySelector(".ProductSlider--Element").getAttribute("data-image-position"));this.createPhotoSwipeInstance(this.createPhotoSwipeItemsFromImages(images),imagePosition)}createPhotoSwipeItemsFromImages(images){return images.map(function(image){var maxWidth=parseInt(image.getAttribute("data-max-width")),maxHeight=parseInt(image.getAttribute("data-max-height")),maxDimension=new Responsive().matchesBreakpoint("phone")?1200:2200,reduceFactor=1;maxWidth>=maxHeight?reduceFactor=Math.max(maxWidth/maxDimension,1):reduceFactor=Math.max(maxHeight/maxDimension,1);var requestedWidth=Math.floor(maxWidth/reduceFactor),requestedHeight=Math.floor(maxHeight/reduceFactor);return{msrc:image.currentSrc||image.src,w:requestedWidth,h:requestedHeight,initialZoomLevel:.65,src:image.dataset.originalSrc}})}createPhotoSwipeInstance(items,selectedImageIndex){var _this=this,photoswipeContainer=document.querySelector(".pswp");this.photoSwipeInstance=new PhotoSwipe(photoswipeContainer,!1,items,{index:selectedImageIndex,showHideOpacity:!0,showAnimationDuration:500,loop:!1,history:!1,closeOnVerticalDrag:!0,allowPanToNext:!1,pinchToClose:!1,errorMsg:'<p class="pswp__error-msg"></p>',scaleMode:"orig",getDoubleTapZoom:function(isMouseClick,item){return isMouseClick?1.35:item.initialZoomLevel<.7?1:1.33},getThumbBoundsFn:function(index){var allThumbnail=_this.element.querySelectorAll(".mainSwiper .ProductSliderCell--Zoom img"),thumbnail=allThumbnail[index],pageYScroll=window.pageYOffset||document.documentElement.scrollTop,rect=thumbnail.getBoundingClientRect();return{x:rect.left,y:rect.top+pageYScroll,w:rect.width}}}),this.photoSwipeInstance.listen("beforeChange",this.onslideChanged.bind(this)),this.photoSwipeInstance.listen("destroy",this.destroyPhotoSwipe.bind(this)),this.photoSwipeInstance.listen("doubleTap",this.onDoubleTap.bind(this)),this.photoSwipeInstance.listen("initialZoomIn",this.onInitialZoomIn.bind(this)),this.photoSwipeInstance.listen("initialZoomOut",this.onInitialZoomOut.bind(this)),this.delegateRoot.on("pswpTap",".pswp__scroll-wrap",this.onSingleTap.bind(this)),this.delegateRoot.on("pswpTap",".pswp__button--close",this.photoSwipeInstance.close),this.delegateRoot.on("pswpTap",".pswp__button--prev",this.photoSwipeInstance.prev),this.delegateRoot.on("pswpTap",".pswp__button--next",this.photoSwipeInstance.next),this.photoSwipeInstance.listen("close",this.photoswiperClose.bind(this)),/iPhone|iPad|iPod/i.test(window.navigator.userAgent)&&document.documentElement.classList.add("pswp-open-in-ios"),this.photoSwipeInstance.init()}onslideChanged(){this.photoSwipeInstance.getCurrentIndex()===0?this.photoSwipeInstance.scrollWrap.querySelector(".pswp__button--prev").setAttribute("disabled","disabled"):this.photoSwipeInstance.scrollWrap.querySelector(".pswp__button--prev").removeAttribute("disabled"),this.photoSwipeInstance.getCurrentIndex()+1===this.photoSwipeInstance.options.getNumItemsFn()?this.photoSwipeInstance.scrollWrap.querySelector(".pswp__button--next").setAttribute("disabled","disabled"):this.photoSwipeInstance.scrollWrap.querySelector(".pswp__button--next").removeAttribute("disabled")}onSingleTap(event2){if(!event2.detail||event2.detail.pointerType==="mouse")event2.target.classList.contains("pswp__img")&&this.photoSwipeInstance.toggleDesktopZoom(event2.detail.releasePoint);else{if(event2.target.classList.contains("pswp__button"))return;event2.target.closest(".pswp").querySelector(".pswp__ui").classList.toggle("pswp__ui--hidden")}}onDoubleTap(point){var initialZoomLevel=this.photoSwipeInstance.currItem.initialZoomLevel;this.photoSwipeInstance.getZoomLevel()!==initialZoomLevel?this.photoSwipeInstance.zoomTo(initialZoomLevel,point,333):this.photoSwipeInstance.zoomTo(initialZoomLevel<.7?1:1.33,point,333)}onInitialZoomIn(){document.querySelector(".pswp__ui").classList.remove("pswp__ui--hidden")}onInitialZoomOut(){document.querySelector(".pswp__ui").classList.add("pswp__ui--hidden")}destroyPhotoSwipe(){this.delegateRoot.off("pswpTap"),this.photoSwipeInstance=null}}class RevolutionSelectbox{constructor(element,popover,additionalOverlay){this.element=element,this.popover=popover,this.changeOverlay=additionalOverlay,this.domDelegate=new Delegate(this.element),this.delegateBody=new Delegate(document.body),this.dropdown=this.element.querySelector(".RevolutionSelectbox"),this.isOpen=!1,this.selectorsOverlay=document.querySelector(".selectorsOverlay"),this.mainDropdown=this.element.querySelector(".RevolutionSelectbox--Content"),this.mainDropdownContent=this.element.querySelector(".RevolutionSelectbox--InnerContent"),this.mainButton=this.element.querySelector(".RevolutionSelectbox--Button"),this.connectedSelect=this.element.getAttribute("data-select"),this.selectbox=this.element.querySelector("[name="+this.connectedSelect+"]"),this.selectbox==null&&(this.selectbox=this.element.querySelector("[name2="+this.connectedSelect+"]")),this.popover==!0&&(this.mainDropdown.classList.remove("RevolutionSelectbox--animation"),this.mainDropdown.classList.add("PopoverContent"),this.changeOverlay?this.pageOverlayElement=document.querySelector(".selectorsOverlay"):this.pageOverlayElement=document.querySelector(".pageOverlay")),this.bindEvents(),this.initSelectbox()}bindEvents(){this.onClickOutsideListener=this.onClickOutside.bind(this),this.domDelegate.on("click","[data-action=toggle-selectbox]",this.toggleDropdown.bind(this)),this.domDelegate.on("click","[data-action=selectbox-submit]",this.selectboxSubmit.bind(this)),this.domDelegate.on("keypress","[data-action=selectbox-submit]",this.selectboxSubmit.bind(this)),this.domDelegate.on("click","[data-action=selectbox-change]",this.selectboxChange.bind(this)),this.delegateBody.on("menu:open",this.onClickOutside.bind(this)),this.domDelegate.on("click","body",this.onClickOutside.bind(this))}selectboxChange(){var value=event.target.getAttribute("data-value"),selectboxID=event.target.getAttribute("data-selectboxid"),innerContent=event.target.innerHTML,selEl=this.element.querySelector("#"+selectboxID);selEl.nodeName=="SELECT"?(selEl.value=value,selEl.dispatchEvent(new Event("change")),console.log("selEl",selEl),selEl.dataset.card=="true"&&(console.log("dispatch"),document.body.dispatchEvent(new CustomEvent("favorites:size_change",{bubbles:!0,detail:{size:selEl.value,id:selEl.dataset.id}})))):selEl.value=value,this.mainButton.querySelector(".RevolutionSelectbox--Title").innerHTML=innerContent,this.element.classList.contains("dropdownSelector")&&(this.element.querySelector('.RevolutionSelectbox--Item[disabled="true"]').removeAttribute("disabled"),event.target.setAttribute("disabled","true")),event.target.dataset.selectboxid=="country-selector__country-code"&&this.element.dispatchEvent(new CustomEvent("change:countrySelector",{bubbles:!0,detail:{currency:event.target.dataset.currency,country:event.target.value,languages:event.target.dataset.languages}})),this.closeDropdown(this.element)}onClickOutside(event2){(!event2.composedPath().includes(this.element)||event2.target.classList.contains("FiltersDesktopWrapper"))&&this.closeDropdown(this.element)}selectboxSubmit(event2){if(!(event2.key!="Enter"&&event2.key!==void 0)){var value=event2.target.getAttribute("data-value"),dataName=event2.target.getAttribute("data-name");this.selectbox.value=value,this.closeDropdown(this.element),this.mainButton.querySelector(".RevolutionSelectbox--Title").innerHTML=dataName,this.selectbox.parentElement.submit()}}initSelectbox(){const selectedItem=this.mainDropdown.querySelector('[selected="selected"]'),titleElement=this.element.querySelector(".RevolutionSelectbox--Title");selectedItem&&(titleElement.innerHTML=selectedItem.getAttribute("data-name")),trapFocus(this.element),this.element.style.display="block"}toggleDropdown(event2,target){event2.preventDefault(),this.isOpen?this.closeDropdown(target):this.openDropdown(target)}openDropdown(target){if(this.element.dispatchEvent(new CustomEvent("close:search",{bubbles:!0})),this.element.dispatchEvent(new CustomEvent("menu:close",{bubbles:!0})),Array.from(target.parentElement.parentElement.children).filter(item=>item.classList.contains("RevolutionSelectbox")).forEach(item=>{item.querySelector(".RevolutionSelectbox--Button").setAttribute("aria-expanded",!1),item.querySelector(".RevolutionSelectbox--Content").setAttribute("aria-hidden",!0),item.querySelector(".RevolutionSelectbox--Content").style.display="none"}),this.popover){this.pageOverlayElement.classList.add("is-visible"),this.pageOverlayElement.addEventListener("click",this.onClickOutsideListener);const focus=this.element.querySelector("[data-scrollable]");bodyScrollLock.disableBodyScroll(focus,bodyScrollLockOptions),document.body.classList.add("scrollLock"),trapFocus(this.mainDropdown)}this.element.closest("#modal-country")&&bodyScrollLock.disableBodyScroll(document,bodyScrollLockOptions);const contentElement=target.parentElement.querySelector(".RevolutionSelectbox--Content");target.setAttribute("aria-expanded","true"),contentElement.style.display="block",contentElement.style.height=`${contentElement.offsetHeight}px`,this.popover?setTimeout(()=>{contentElement.setAttribute("aria-hidden","false")},20):contentElement.setAttribute("aria-hidden","false"),this.isOpen=!0,window.addEventListener("click",this.onClickOutsideListener)}closeDropdown(target){var closestDropdown=target.closest(".RevolutionSelectbox");if(closestDropdown===null)var closestDropdown=target.querySelector("[aria-expanded='true']").parentElement;closestDropdown.querySelector(".RevolutionSelectbox--Button").setAttribute("aria-expanded",!1),closestDropdown.querySelector(".RevolutionSelectbox--Content").setAttribute("aria-hidden",!0),setTimeout(()=>{closestDropdown.querySelector(".RevolutionSelectbox--Content").style.display="none"},300),this.popover==!0&&(this.pageOverlayElement.classList.remove("is-visible"),this.pageOverlayElement.removeEventListener("click",this.onClickOutsideListener),document.querySelector("#mobile-menu").getAttribute("aria-expanded")!=="true"&&(bodyScrollLock.clearAllBodyScrollLocks(),document.body.classList.remove("scrollLock"))),this.isOpen=!1,removeTrapFocus(this.mainDropdownContent),window.removeEventListener("click",this.onClickOutsideListener)}}class Form{constructor(){}serialize(form){function stringKey(key,value){var beginBracket=key.lastIndexOf("[");if(beginBracket===-1){var _hash={};return _hash[key]=value,_hash}var newKey=key.substr(0,beginBracket),newValue={};return newValue[key.substring(beginBracket+1,key.length-1)]=value,stringKey(newKey,newValue)}for(var hash={},i=0,len=form.elements.length;i<len;i++){var formElement=form.elements[i];if(!(formElement.name===""||formElement.disabled)&&formElement.name&&!formElement.disabled&&(formElement.checked||/select|textarea/i.test(formElement.nodeName)||/hidden|text|search|tel|url|email|password|datetime|date|month|week|time|datetime-local|number|range|color/i.test(formElement.type))){var stringKeys=stringKey(formElement.name,formElement.value);hash=this.extend(hash,stringKeys)}}return hash}extend(){for(var extended={},i=0,_this=this,merge=function(obj){for(var prop in obj)obj.hasOwnProperty(prop)&&(Object.prototype.toString.call(obj[prop])==="[object Object]"?extended[prop]=_this.extend(extended[prop],obj[prop]):extended[prop]=obj[prop])};i<arguments.length;i++)merge(arguments[i]);return extended}}class AddToCart{constructor(element){this.element=element,this.delegateElement=new Delegate(this.element),this.pageLoader=document.body.querySelector(".pageLoader"),this.bindEvents(),this.isProcessing=!1}bindEvents(){this.delegateElement.on("click",'[data-action="add-to-cart"]',this.addToCart.bind(this)),this.delegateElement.on("submit",'form[action="/cart/addall"]',this.addAllToCart.bind(this)),this.delegateElement.on("click","[data-action=add-all-to-cart]",this.addAllToCart.bind(this)),this.delegateElement.on("click","[data-action=remove-and-add-all-to-cart]",this.removeAndAddToCart.bind(this)),this.delegateElement.on("click",".cart-item-wrapper:has( [data-action=remove-and-add-all-to-cart]) .cartItem--Image",this.removeAndAddToCart.bind(this)),this.delegateElement.on("click",".cart-item-wrapper:has( [data-action=remove-and-add-all-to-cart]) .cartItem--Flex",this.removeAndAddToCart.bind(this)),this.delegateElement.on("click",".cart-item-wrapper:has( [data-action=remove-and-add-all-to-cart]) .product-option--Wrapper",this.removeAndAddToCart.bind(this)),this.delegateElement.on("click",".cart-item-wrapper:has( [data-action=remove-and-add-all-to-cart]) .cartItem__prices",this.removeAndAddToCart.bind(this)),this.delegateElement.on("click","[data-action=remove-group]",this.removeGroup.bind(this)),this.delegateElement.on("click","[data-action=remove-and-add-one]",this.removeGroupAndAddOne.bind(this)),this.delegateElement.on("click","[data-action=remove-and-connect]",this.handleMatchingFrame.bind(this))}handleMatchingFrame(event2){event2.preventDefault();const productIdToRemoveKey_1=event2.target.getAttribute("data-decrease-item-with-key");let quantityOfSingleProduct_1=parseInt(event2.target.getAttribute("data-single-frame-quantity"),10);const productIdToRemoveKey_2=event2.target.getAttribute("data-remove-product");let quantityOfSingleProduct_2=parseInt(event2.target.getAttribute("data-single-product-quantity"),10);quantityOfSingleProduct_1=quantityOfSingleProduct_1?quantityOfSingleProduct_1-1:null,quantityOfSingleProduct_2=quantityOfSingleProduct_2?quantityOfSingleProduct_2-1:null;const frame_key=event2.target.getAttribute("data-frame-variant-id"),product_key=event2.target.getAttribute("data-choosen-product"),unitSelected=event2.target.getAttribute("data-unit-selected")||document.getElementById("unit-selected-input")?.value||document.querySelector('[name="properties[_unit_selected]"]')?.value;let updates={[productIdToRemoveKey_1]:quantityOfSingleProduct_1,[productIdToRemoveKey_2]:quantityOfSingleProduct_2};const uniqueGroupIdentifier=`group-${Date.now()}`;let formData={items:[{id:frame_key,quantity:1,properties:{_group_id:uniqueGroupIdentifier,...unitSelected&&{_unit_selected:unitSelected}}},{id:product_key,quantity:1,properties:{_group_id:uniqueGroupIdentifier,...unitSelected&&{_unit_selected:unitSelected}}}]};this.decreaseByOne(updates).then(()=>{this.addMatchedToCart(formData).then(()=>{this.element.dispatchEvent(new CustomEvent("product:added",{bubbles:!0,detail:{onlyRender:!0}})),this.element.dispatchEvent(new CustomEvent("subdrawer:close",{bubbles:!0,detail:{onlyRender:!0}}))}).catch(error=>{console.log("Error add to cart group")})}).catch(error=>{console.log("Error decreaseByOne")})}addMatchedToCart(data){return fetch("/cart/add.js",{body:JSON.stringify(data),credentials:"same-origin",method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}).then(response=>response.ok?response.json():response.json().then(content=>{throw new Error(content.description)}))}removeGroupAndAddOne(event2){event2.preventDefault();const productsGroup=event2.target.closest(".group-wrapper"),productToBeAddedAgainId=productsGroup.querySelector("[data-add-again]").dataset.addAgain,quantityValue=productsGroup.querySelector("[data-add-again] .CartItem__Actions input")?productsGroup.querySelector("[data-add-again] .CartItem__Actions input").getAttribute("value"):null,quantity=parseInt(quantityValue,10);this.addToCartWithId(productToBeAddedAgainId,quantity).then(()=>{this.removeGroup(event2)}).catch(error=>{this.handleAddToCartError(addToCartButton,error)})}addToCartWithId(productId,quantity){return fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:productId,quantity})}).then(response=>response.json()).then(data=>data).catch(error=>{throw console.error("Error adding product to cart:",error),error})}removeGroup(event2){event2.preventDefault();const productsGroup=event2.target.closest(".group-wrapper");this.loader=productsGroup.querySelector(".itemLoaderGroup");const propertyId=productsGroup.querySelector(".grouped-product").getAttribute("group-id");this.loader.classList.add("is-visible"),this.getCartItems().then(items=>{const changes=items.filter(item=>item.properties&&item.properties._group_id===propertyId).map(item=>({id:item.key,item_id:item.id}));this.updateCart(changes).then(()=>{changes.forEach(change=>{this.element.dispatchEvent(new CustomEvent("product:added",{bubbles:!0,detail:{variant:change.item_id,quantity:0}})),this.element.dispatchEvent(new CustomEvent("subdrawer:close",{bubbles:!0,detail:{onlyRender:!0}}))})}).catch(error=>{console.error("Error processing items:",error),this.handleAddToCartError(null,error)})})}updateCart(changes){return fetch("/cart/update.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({updates:changes.reduce((acc,change)=>(acc[change.id]=0,acc),{})})}).then(response=>response.json()).catch(error=>{throw console.error("Error updating cart:",error),error})}getCartItems(){return fetch("/cart.js",{credentials:"same-origin",method:"GET",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}).then(response=>response.ok?response.json():response.json().then(content=>{throw new Error(content.description)})).then(data=>data.items)}removeAndAddToCart(event2){if(this.isProcessing)return;this.isProcessing=!0,event2.preventDefault();const target=event2.target.closest(".cart-item-wrapper").querySelector("[data-action=remove-and-add-all-to-cart]"),loader=target.closest("cart-subdrawer").querySelector(".itemLoader");loader.classList.add("is-visible");const addToCartButton2=target,quantityToAdd=parseInt(addToCartButton2.dataset.quantity,10);let quantityOfSingleProduct=parseInt(addToCartButton2.dataset.singleProductQuantity,10);addToCartButton2.setAttribute("disabled","disabled"),document.dispatchEvent(new CustomEvent("theme:loading:start"));const productIdToRemoveKey=target.getAttribute("data-remove-product"),resetState=()=>{setTimeout(()=>{this.isProcessing=!1},1e3)};if(quantityOfSingleProduct==1)this.removeProduct(event2,productIdToRemoveKey).then(()=>{this.addProductsToCart(addToCartButton2,quantityToAdd).then(()=>{resetState(),addToCartButton2.removeAttribute("disabled"),this.element.dispatchEvent(new CustomEvent("product:added",{bubbles:!0,detail:{onlyRender:!0}})),loader.classList.remove("is-visible"),this.element.dispatchEvent(new CustomEvent("subdrawer:close",{bubbles:!0,detail:{onlyRender:!0}}))}).catch(error=>{this.handleAddToCartError(addToCartButton2,error),resetState()})}).catch(error=>{this.handleAddToCartError(addToCartButton2,error),resetState()});else{quantityOfSingleProduct=quantityOfSingleProduct-1;let updates={[productIdToRemoveKey]:quantityOfSingleProduct};this.decreaseByOne(updates).then(()=>{this.addProductsToCart(addToCartButton2,quantityToAdd).then(()=>{resetState(),addToCartButton2.removeAttribute("disabled"),this.element.dispatchEvent(new CustomEvent("product:added",{bubbles:!0,detail:{variant:productIdToRemoveKey,quantity:quantityOfSingleProduct}})),loader.classList.remove("is-visible"),this.element.dispatchEvent(new CustomEvent("subdrawer:close",{bubbles:!0,detail:{onlyRender:!0}}))}).catch(error=>{this.handleAddToCartError(addToCartButton2,error),resetState()})}).catch(error=>{this.handleAddToCartError(addToCartButton2,error),resetState()})}}decreaseByOne(updates){return fetch("/cart/update.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({updates})}).then(response=>response.json()).catch(error=>{throw console.error("Error updating cart:",error),error})}removeProduct(event2,productIdToRemoveKey){return fetch("/cart/change.js",{body:JSON.stringify({id:productIdToRemoveKey,quantity:0}),credentials:"same-origin",method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}).then(response=>response.ok?response.json():response.json().then(content=>{throw new Error(content.description)}))}addProductsToCart(button,quantityToAdd){const formElement=button.closest("form"),formElementSerialized=new Form().serialize(formElement),items=[],keys=Object.keys(formElementSerialized),unitSelected=formElement.querySelector('[name="properties[_unit_selected]"]')?.value||document.getElementById("unit-selected-input")?.value,uniqueGroupIdentifier=`group-${Date.now()}`;return keys.forEach(key=>{if(key!=="event_id"){const productID=document.body.querySelector(`[name="${key}"]`)?.getAttribute("data-id");productID&&items.unshift({id:productID,quantity:quantityToAdd,properties:{_group_id:uniqueGroupIdentifier,...unitSelected&&{_unit_selected:unitSelected}}})}}),fetch("/cart/add.js",{body:JSON.stringify({items}),credentials:"same-origin",method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}).then(response=>response.ok?response.json():response.json().then(content=>{throw new Error(content.description)}))}handleAddToCartError(addToCartButton2,error){const errorMessageElement=document.createElement("span");errorMessageElement.className="ProductForm__Error Alert Alert--error u-p4",errorMessageElement.innerHTML=error.message,addToCartButton2.removeAttribute("disabled"),addToCartButton2.insertAdjacentElement("afterend",errorMessageElement),setTimeout(()=>{errorMessageElement.remove()},2500)}addAllToCart(event2){var _this=this;event2.preventDefault();var addToCartButton2=event2.target;addToCartButton2.setAttribute("disabled","disabled"),document.dispatchEvent(new CustomEvent("theme:loading:start"));var formElement=event2.target.closest("form"),formHelper=new Form;const formElementSerialized=formHelper.serialize(formElement),items=[],keys=Object.keys(formElementSerialized),unitSelected=formElement.querySelector('[name="properties[_unit_selected]"]')?.value||document.getElementById("unit-selected-input")?.value,uniqueGroupIdentifier=`group-${Date.now()}`;var quant=1;keys.forEach(key=>{if(key!="event_id"){const element=document.body.querySelector('[name="'+key+'"]');let productID=null;element&&(productID=element.getAttribute("data-id")),productID&&(quant=document.body.querySelector("#quantity--id_"+productID),quant?quant=quant.getAttribute("value"):quant=1),productID&&items.unshift({id:productID,quantity:quant,properties:{_group_id:uniqueGroupIdentifier,...unitSelected&&{_unit_selected:unitSelected}}})}});const additionalInfo=formElement.querySelector("#additional_pdp_info"),frame=document.querySelector('.frame-products__wrapper [aria-selected="true"]');let cartDetails=[];if(additionalInfo&&(cartDetails.push({productName:additionalInfo.dataset.title,quantity:1,price:additionalInfo.dataset.price,sku:additionalInfo.dataset.sku,variantTitle:additionalInfo.dataset.variant}),frame)){const frameDetails=JSON.parse(frame.dataset.cardSettings);cartDetails.push({productName:frameDetails.title,quantity:1,price:frameDetails.price,sku:frameDetails.sku,variantTitle:additionalInfo.dataset.variant})}fetch("/cart/add.js",{body:JSON.stringify({items}),credentials:"same-origin",method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}).then(function(response){if(response.ok){const cartAddEvent=new CustomEvent("cart:add",{detail:cartDetails});document.dispatchEvent(cartAddEvent),addToCartButton2.removeAttribute("disabled"),_this.element.dispatchEvent(new CustomEvent("product:added",{bubbles:!0,detail:{variant:_this.currentVariant,quantity:keys.length}})),_this.element.dispatchEvent(new CustomEvent("subdrawer:close",{bubbles:!0,detail:{onlyRender:!0}}))}else response.json().then(function(content){var errorMessageElement=document.createElement("span");errorMessageElement.className="ProductForm__Error Alert Alert--error u-p4",errorMessageElement.innerHTML=content.description,addToCartButton2.removeAttribute("disabled"),addToCartButton2.insertAdjacentElement("afterend",errorMessageElement),setTimeout(function(){errorMessageElement.remove()},2500)})}),event2.preventDefault()}addToCart(){var _this=this;event.preventDefault();var addToCartButton2=event.target.closest('[data-action="add-to-cart"]');const productCardForm=addToCartButton2.closest(".product-card__form");if(productCardForm&&productCardForm.querySelector(".product-card__variant-input")?.value===""){console.log("event stop"),event.stopPropagation(),this.element.dispatchEvent(new CustomEvent("invalid",{bubbles:!0}));return}this.pageLoader.style.width="100%",addToCartButton2.setAttribute("disabled","disabled");var formElement;if(addToCartButton2.hasAttribute("data-group-id")){const groupId=addToCartButton2.getAttribute("data-group-id"),productId=addToCartButton2.getAttribute("data-product-id"),variantId=addToCartButton2.getAttribute("data-variant-id"),sku=addToCartButton2.getAttribute("data-sku"),quantityValue=event.target.dataset.quantity;formElement=document.createElement("form");var quantityInput=document.createElement("input");quantityInput.type="hidden",quantityInput.name="quantity",quantityInput.value=`${quantityValue}`,formElement.appendChild(quantityInput);var idInput=document.createElement("input");idInput.type="hidden",idInput.name="id",idInput.value=variantId,idInput.setAttribute("data-productid",productId),idInput.setAttribute("data-sku",sku),formElement.appendChild(idInput);var propertiesInput=document.createElement("input");propertiesInput.type="hidden",propertiesInput.name="properties[_group_id]",propertiesInput.value=groupId,formElement.appendChild(propertiesInput);const unitSelectedInput=document.getElementById("unit-selected-input");if(unitSelectedInput){const copiedUnit=document.createElement("input");copiedUnit.type="hidden",copiedUnit.name="properties[_unit_selected]",copiedUnit.value=unitSelectedInput.value,formElement.appendChild(copiedUnit)}}else formElement=event.target.closest("form");const additionalInfo=formElement.querySelector("#additional_pdp_info");let cartDetails=[];additionalInfo&&cartDetails.push({productName:additionalInfo.dataset.title,quantity:1,price:additionalInfo.dataset.price,sku:additionalInfo.dataset.sku,variantTitle:additionalInfo.dataset.variant}),formElement.querySelector('[name="id"]').removeAttribute("disabled");var formHelper=new Form;const serialized=formHelper.serialize(formElement);fetch(window.routes.localeRootUrl+"/cart/add.js",{body:JSON.stringify(serialized),credentials:"same-origin",method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}).then(function(response){if(response.ok){const cartAddEvent=new CustomEvent("cart:add",{detail:cartDetails});if(document.dispatchEvent(cartAddEvent),window.location.href.indexOf("cart")!=-1){location.reload();return}if(window.theme.cartMode=="page"){location.href="/cart";return}addToCartButton2.removeAttribute("disabled"),_this.element.dispatchEvent(new CustomEvent("product:added",{bubbles:!0,detail:{variant:serialized.id,quantity:serialized.quantity,properties:{_unit_selected:serialized._unit_selected}}}))}else response.json().then(function(content){if(_this.element.querySelector(".ProductForm--Error"))_this.element.querySelector(".ProductForm--Error").classList.add("visible"),setTimeout(function(){_this.element.querySelector(".ProductForm--Error").classList.remove("visible")},2500),_this.pageLoader.style.left="unset",_this.pageLoader.style.right="0px",_this.pageLoader.style.width="0%",setTimeout(()=>{_this.pageLoader.style.left="0px",_this.pageLoader.style.right="unset"},550);else{var errorMessageElement=document.createElement("span");errorMessageElement.className="u-p4 accent",errorMessageElement.innerHTML=content.description,addToCartButton2.removeAttribute("disabled"),addToCartButton2.insertAdjacentElement("afterend",errorMessageElement),setTimeout(function(){errorMessageElement.remove()},2500),_this.pageLoader.style.left="unset",_this.pageLoader.style.right="0px",_this.pageLoader.style.width="0%",setTimeout(()=>{_this.pageLoader.style.left="0px",_this.pageLoader.style.right="unset"},550)}})})}}function handleFirstTab(e){e.keyCode===9&&(document.body.classList.add("user-is-tabbing"),window.removeEventListener("keydown",handleFirstTab),window.addEventListener("mousedown",handleMouseDownOnce))}function handleMouseDownOnce(){document.body.classList.remove("user-is-tabbing"),window.removeEventListener("mousedown",handleMouseDownOnce),window.addEventListener("keydown",handleFirstTab)}window.addEventListener("keydown",handleFirstTab);function getFocusableElements(container){return Array.from(container.querySelectorAll("summary, a[href], button:enabled, [tabindex]:not([tabindex^='-']), [draggable], area, input:not([type=hidden]):enabled, select:enabled, textarea:enabled, object, iframe, .focusable"))}const trapFocusHandlers={};function trapFocus(container,elementToFocus=container){var elements=getFocusableElements(container),first=elements[0],last=elements[elements.length-1];removeTrapFocus(),trapFocusHandlers.focusin=event2=>{event2.target!==container&&event2.target!==last&&event2.target!==first||document.addEventListener("keydown",trapFocusHandlers.keydown)},trapFocusHandlers.focusout=function(){document.removeEventListener("keydown",trapFocusHandlers.keydown)},trapFocusHandlers.keydown=function(event2){event2.code.toUpperCase()==="TAB"&&(event2.target===last&&!event2.shiftKey&&(event2.preventDefault(),first.focus()),(event2.target===container||event2.target===first)&&event2.shiftKey&&(event2.preventDefault(),last.focus()))},document.addEventListener("focusout",trapFocusHandlers.focusout),document.addEventListener("focusin",trapFocusHandlers.focusin),first?first.focus():elementToFocus.focus()}function removeTrapFocus(elementToFocus=null){document.removeEventListener("focusin",trapFocusHandlers.focusin),document.removeEventListener("focusout",trapFocusHandlers.focusout),document.removeEventListener("keydown",trapFocusHandlers.keydown),elementToFocus&&elementToFocus.focus()}class Dropdown{constructor(){this.domDelegate=new Delegate(document.body),this.breakpoint=new Responsive().getCurrentBreakpoint(),this.allDropdowns=document.querySelectorAll(".Dropdown"),this.pageOverlayElement=document.querySelector(".pageOverlay"),this.bindEvents()}bindEvents(){this.domDelegate.on("click","[data-action=toggle-dropdown]",this.toggleDropdown.bind(this));let selector;switch(this.breakpoint){case"lap-and-up":selector="[data-action=toggle-desktop-dropdown]";break;case"pocket":selector="[data-action=toggle-mobile-dropdown]";break;case"phone":selector="[data-action=toggle-mobile-dropdown]";break;case"tablet":selector="[data-action=toggle-mobile-dropdown]";break;default:selector=!1;break}selector&&this.domDelegate.on("click",selector,this.toggleDropdown.bind(this))}openDropdown(elem,target){this.lock=!0;const DropdownButton=elem.querySelector(".Dropdown--Button"),DropdownContent=elem.querySelector(".Dropdown--Content");this.allDropdowns.forEach(dropdown=>{dropdown!==target.closest(".Dropdown")&&dropdown.querySelector("[aria-expanded='true']")&&!dropdown.classList.contains("do-not-close")&&this.closeDropdown(dropdown)}),DropdownButton.setAttribute("aria-expanded","true"),new RevolutionAnimation(DropdownContent,"true").slideDown(),setTimeout(()=>{this.lock=!1},300)}closeDropdown(elem){this.lock=!0;const DropdownButton=elem.querySelector(".Dropdown--Button"),DropdownContent=elem.querySelector(".Dropdown--Content");new RevolutionAnimation(DropdownContent,"true").slideUp(),DropdownButton.setAttribute("aria-expanded",!1),setTimeout(()=>{DropdownContent.getAttribute("aria-hidden")=="false"&&DropdownContent.setAttribute("aria-hidden","true"),this.lock=!1},300)}toggleDropdown(event2,target){event2.preventDefault();const mainDropdown=target.closest(".Dropdown"),isOpen=target.getAttribute("aria-expanded")==="true";this.lock||(isOpen?this.closeDropdown(mainDropdown,target):this.openDropdown(mainDropdown,target))}}const allDropdowns=new Dropdown;class ReloadWhen1025{constructor(){this.previousWidth=window.innerWidth,this.bindEvents()}bindEvents(){window.addEventListener("resize",this.checkWidthAndReload.bind(this))}checkWidthAndReload(){const currentWidth=window.innerWidth;(this.previousWidth<1025&&currentWidth>=1025||this.previousWidth>=1025&&currentWidth<1025)&&location.reload(),this.previousWidth=currentWidth}}new ReloadWhen1025;class RevolutionSwiper{constructor(element,additionalSwiper){var options=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.element=element,this.thumb=additionalSwiper,this.initialConfig=JSON.parse(element.getAttribute("data-swiper-settings")),additionalSwiper&&(this.initialConfigThumbs=JSON.parse(additionalSwiper.getAttribute("data-swiper-thumb-settings"))),this.options=options,this.build()}selectCell(index){this.swiperElement.slideTo(index)}resize(){this.swiperElement.resize()}build(){var _this=this,configThumb=this.initialConfigThumbs;configThumb!=null&&(this.thumbSwiper=new Swiper(this.thumb,configThumb),this.initialConfig.thumbs.swiper=this.thumbSwiper),this.swiperElement=new Swiper(this.element,this.initialConfig),this.selectedIndex=this.swiperElement.activeIndex,this.swiperElement.on("slideChange",function(){_this.element.dispatchEvent(new CustomEvent("swiper:slide-changed",{bubbles:!0,detail:{currentIndex:_this.swiperElement.activeIndex,element:_this.swiperElement.el[0]}}))})}destroy(){this.swiperElement.destroy()}}class Drawer{constructor(element){var options=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.element=element,this.delegateElement=new Delegate(this.element),this.delegateBody=new Delegate(document.body),this.pdpInfo=document.body.querySelector(".product-info__wrapper"),this.element.getAttribute("id")==="sizeGuide"?this.pageOverlayElement=document.querySelector(".page-overlay-size-guide-block"):this.element.getAttribute("id")==="frames-info-drawer"?this.pageOverlayElement=document.querySelector(".page-overlay-frame-block"):this.pageOverlayElement=document.querySelector(".pageOverlay"),navigator.platform==="iPhone"&&document.documentElement.style.setProperty("--viewport-height",`${window.innerHeight}px`),this.onOpen=options.onOpen||function(){},this.onClose=options.onClose||function(){},this.isOpen=!1,this.bindEvents()}bindEvents(){this.delegateBody.on("click",'[data-action="open-drawer"][data-toggle-id="'+this.element.id+'"]',this.openDrawer.bind(this)),this.delegateBody.on("click",'[data-action="close-drawer"][data-toggle-id="'+this.element.id+'"]',this.closeDrawer.bind(this)),this.delegateBody.on("click",'[data-action="toggle-drawer"][data-toggle-id="'+this.element.id+'"]',this.toggleDrawer.bind(this)),this._openListener=this.openDrawer.bind(this),this._closeListener=this.closeDrawer.bind(this),this.calculateMaxHeightListener=this.maxHeight.bind(this),responsive.addResizeListener(this,this.calculateMaxHeightListener),this.delegateBody.on("drawer:close-other",this._closeListener)}maxHeight(){if(this.element.getAttribute("id")=="cart"||this.element.getAttribute("id")=="sidebarFavorites"){var footer=this.element.querySelector(".CartDrawer--Footer"),footerHeight=0;footer!==null&&(footerHeight=footer.offsetHeight);var headerEl=this.element.querySelector(".CartHeader");if(headerEl)var header=headerEl.offsetHeight;var itemWrapper=this.element.querySelector(".CartItems--Wrapper");itemWrapper!==null&&(itemWrapper.style.height=window.innerHeight-footerHeight-header+"px")}else this.element.style.height=window.innerHeight+"px";const headerHeight=this.element.querySelector(".Drawer--Header")?this.element.querySelector(".Drawer--Header").offsetHeight:0}toggleDrawer(){event.preventDefault(),this.isOpen?this.closeDrawer():this.openDrawer()}openDrawer(){if(this.element.getAttribute("id")==="sizeGuide"||this.element.getAttribute("id")==="frames-info-drawer"){const scrollableArea=this.element.querySelector("[data-scrollable]");scrollableArea&&(scrollableArea.scrollTop=0)}if(this.element.getAttribute("id")=="size-guide-collection-page"&&(console.log("Ovdeee"),this.pageOverlayElement.classList.add("subdrawer")),this.element.getAttribute("id")!="size-guide-collection-page"&&this.element.dispatchEvent(new CustomEvent("drawer:close-other",{bubbles:!0})),this.element.dispatchEvent(new CustomEvent("close:search",{bubbles:!0})),this.element.getAttribute("id")=="cart"&&this.element.dispatchEvent(new CustomEvent("cart-drawer:open",{bubbles:!0})),this.isOpen)return;this.element.classList.contains("DrawerPDP")&&this.pdpInfo&&(this.pdpInfo.style.zIndex=10),this.maxHeight(),this.element.getAttribute("id")=="mobile-menu"&&(this.hamburger=document.body.querySelector(".header--Hamburger"),this.hamburger.classList.add("is-active")),this.element.getAttribute("id")=="mobile-menu"?(document.querySelector(".Drawer--Close").style.display="block",this.element.dispatchEvent(new CustomEvent("sidebar-drawer:open",{bubbles:!0}))):this.pageOverlayElement.classList.add("is-visible"),this.element.setAttribute("aria-expanded","true"),this.pageOverlayElement.addEventListener("click",this._closeListener);const focus=this.element.querySelector("[data-scrollable]");return bodyScrollLock.disableBodyScroll(focus,bodyScrollLockOptions),document.body.classList.add("scrollLock"),this.isOpen=!0,setTimeout(()=>{trapFocus(this.element)},400),this.onOpen(),!1}closeDrawer(event2){this.isOpen&&(event2&&event2.preventDefault(),this.element.getAttribute("id")=="mobile-menu",this.element.getAttribute("id")=="mobile-menu"&&this.hamburger.classList.remove("is-active"),this.element.setAttribute("aria-expanded","false"),this.element.getAttribute("id")=="size-guide-collection-page"||(this.pageOverlayElement.classList.remove("is-visible"),document.body.classList.remove("scrollLock"),bodyScrollLock.clearAllBodyScrollLocks(),this.pageOverlayElement.removeEventListener("click",this._closeListener),removeTrapFocus(this.element)),this.isOpen=!1,setTimeout(()=>{this.pdpInfo&&(this.pdpInfo.style.zIndex=2)},500),this.onClose())}}class RevolutionAnimation{constructor(element,directAnimation){if(this.element=element,!directAnimation){this.intersectionObserver=[],this.integer=0;var contentToAnimate=document.querySelectorAll("[data-animation]");contentToAnimate.forEach((item,i)=>{this.animateElement(item,i),this.integer=this.integer+1}),new MutationObserver(mutations=>{mutations.forEach(mutation=>{mutation.addedNodes.forEach(node=>{node.nodeType===Node.ELEMENT_NODE&&node.querySelectorAll("[data-animation]").forEach((item,i)=>{this.animateElement(item,this.integer),this.integer=this.integer+1})})})}).observe(document.body,{childList:!0,subtree:!0})}}slideUp(){this.element.style.height=this.element.scrollHeight+"px",this.element.offsetHeight,this.element.style.height=0}slideDown(){if(this.element.style.height!=="auto"){this.element.style.pointerEvents="none";var _this=this;this.element.style.height=this.element.scrollHeight+"px",this.element.setAttribute("aria-hidden",!1);var transitionEnded=function transitionEnded2(event2){_this.element.style.pointerEvents="all",event2.propertyName==="height"&&(_this.element.style.height="auto",_this.element.removeEventListener("transitionend",transitionEnded2))};this.element.addEventListener("transitionend",transitionEnded)}}elementScaleOut(elements){const animationDuration=window.theme.animationDuration*2,animationDelay=window.theme.animationBetweenElements;elements.forEach((element,index)=>{if(element.hasAttribute("data-loaded"))return;element.setAttribute("data-loaded",!0);const keyframes=[{transform:"scale(104%)",opacity:"0"},{transform:"scale(100%)",opacity:"1"}],animationOptions={duration:animationDuration,fill:"forwards"};setTimeout(()=>{element.animate(keyframes,animationOptions)},animationDelay*index)})}elementScaleIn(toReveal){toReveal.forEach((item,i)=>{item.getAttribute("data-loaded")||(setTimeout(()=>{var elementMove=[{transform:"scale(96%)",opacity:"0"},{transform:"scale(100%)",opacity:"1"}];item.animate(elementMove,{duration:window.theme.animationDuration*2,fill:"forwards"})},window.theme.animationBetweenElements*i),item.setAttribute("data-loaded",!0))})}elementFromTop(toReveal){toReveal.forEach((item,i)=>{item.getAttribute("data-loaded")||(setTimeout(()=>{var elementMove=[{transform:"translateY(-30px)",opacity:"0"},{transform:"translateY(0px)",opacity:"1"}];item.animate(elementMove,{duration:window.theme.animationDuration,fill:"forwards"})},window.theme.animationBetweenElements*i),item.setAttribute("data-loaded",!0))})}elementFromBottom(toReveal){toReveal.forEach((item,i)=>{item.getAttribute("data-loaded")||(setTimeout(()=>{var elementMove=[{transform:"translateY(30px)",opacity:"0"},{transform:"translateY(0px)",opacity:"1"}];item.animate(elementMove,{duration:window.theme.animationDuration,fill:"forwards"})},window.theme.animationBetweenElements*i),item.setAttribute("data-loaded",!0))})}elementFromRight(toReveal){toReveal.forEach((item,i)=>{item.getAttribute("data-loaded")||setTimeout(()=>{var elementMove=[{transform:"translateX(30px)",opacity:"0"},{transform:"translateX(0px)",opacity:"1"}];item.animate(elementMove,{duration:window.theme.animationDuration,fill:"forwards"}),item.setAttribute("data-loaded",!0)},window.theme.animationBetweenElements*i)})}elementFromLeft(toReveal){toReveal.forEach((item,i)=>{item.getAttribute("data-loaded")||setTimeout(()=>{var elementMove=[{transform:"translateX(-30px)",opacity:"0"},{transform:"translateX(0px)",opacity:"1"}];item.animate(elementMove,{duration:window.theme.animationDuration,fill:"forwards"}),item.setAttribute("data-loaded",!0)},window.theme.animationBetweenElements*i)})}elementFromRightBig(toReveal){toReveal.forEach((item,i)=>{item.getAttribute("data-loaded")||setTimeout(()=>{var elementMove=[{transform:"translateX(120px)",opacity:"0"},{transform:"translateX(0px)",opacity:"1"}];item.animate(elementMove,{duration:window.theme.animationDuration,fill:"forwards"}),item.setAttribute("data-loaded",!0)},window.theme.animationBetweenElements*i)})}elementFromLeftBig(toReveal){toReveal.forEach((item,i)=>{item.getAttribute("data-loaded")||(setTimeout(()=>{var elementMove=[{transform:"translateX(-120px)",opacity:"0"},{transform:"translateX(0px)",opacity:"1"}];item.animate(elementMove,{duration:window.theme.animationDuration,fill:"forwards"})},window.theme.animationBetweenElements*i),item.setAttribute("data-loaded",!0))})}animateElement(animatedItem,index){const options={integer:index,type:animatedItem.dataset.animation};this.intersectionObserver[index]&&this.intersectionObserver[index].disconnect(),this.intersectionObserver[index]=new IntersectionObserver(results=>{const integer=options.integer,elements=[];if(results.forEach(result=>{(result.isIntersecting||result.intersectionRatio>0)&&(elements.push(result.target),this.intersectionObserver[integer].unobserve(result.target))}),elements.length===0)return;const animation={elementFromTop:"elementFromTop",elementFromBottom:"elementFromBottom",elementFromRight:"elementFromRight",elementFromLeft:"elementFromLeft",elementFromLeftBig:"elementFromLeftBig",elementFromRightBig:"elementFromRightBig",elementScaleIn:"elementScaleIn",elementScaleOut:"elementScaleOut"}[options.type];animation&&this[animation](elements)},{threshold:.1}),animatedItem.classList.contains("animatedContent")&&this.intersectionObserver[index].observe(animatedItem),animatedItem.querySelectorAll(".animatedContent").forEach(item=>{this.intersectionObserver[index].observe(item)})}}window.theme.enableAnimations&&document.addEventListener("DOMContentLoaded",function(){new RevolutionAnimation});class QuantityInput extends HTMLElement{constructor(){super(),this.element=this,this.input=this.querySelector("input"),this.changeEvent=new Event("quantity:changed",{bubbles:!0}),this.options=JSON.parse(this.element.getAttribute("data-settings")),this.querySelectorAll("button").forEach(button=>button.addEventListener("click",this.onButtonClick.bind(this)))}onButtonClick(event2){event2.preventDefault();const previousValue=this.input.value;event2.target.name==="plus"?this.input.stepUp():this.input.stepDown(),previousValue!==this.input.value&&this.input.dispatchEvent(this.changeEvent),this.options.noVariants=="true"&&this.toggleAddButton()}toggleAddButton(){let priceElement="",quantity="";const addButtons=document.querySelectorAll(".product__atc"),quantityEl=document.querySelector(".QuantitySelector__ProductQuantity");if(quantityEl&&(quantity=quantityEl.value()),window.variantInfo.show_price){let priceElement2="<span class='u-pb1 ml-s'>"+Shopify.formatMoney(this.options.price*quantity,window.theme.moneyFormat);+"</span>"}addButtons.lenght!==0&&(quantity||(quantity=1),addButtons.forEach(addButton=>{addButtons.removeAttribute("disabled"),addButtons.classList.remove("ProductCard--Sold__Out");const addButtonInner=addButton.querySelector(".SelfAlign");addButtonInner.innerHTML=window.variantStrings.addToCart+priceElement}))}}customElements.define("quantity-input",QuantityInput);function debounce(fn,wait){let t;return(...args)=>{clearTimeout(t),t=setTimeout(()=>fn.apply(this,args),wait)}}const serializeForm=form=>{const obj={},formData=new FormData(form);for(const key of formData.keys())obj[key]=formData.get(key);return JSON.stringify(obj)};function fetchConfig(type="json"){return{method:"POST",headers:{"Content-Type":"application/json",Accept:`application/${type}`}}}typeof window.Shopify>"u"&&(window.Shopify={}),Shopify.bind=function(fn,scope){return function(){return fn.apply(scope,arguments)}},Shopify.setSelectorByValue=function(selector,value){for(var i=0,count=selector.options.length;i<count;i++){var option=selector.options[i];if(value==option.value||value==option.innerHTML)return selector.selectedIndex=i,i}},Shopify.addListener=function(target,eventName,callback){target.addEventListener?target.addEventListener(eventName,callback,!1):target.attachEvent("on"+eventName,callback)},Shopify.postLink=function(path,options){options=options||{};var method=options.method||"post",params=options.parameters||{},form=document.createElement("form");form.setAttribute("method",method),form.setAttribute("action",path);for(var key in params){var hiddenField=document.createElement("input");hiddenField.setAttribute("type","hidden"),hiddenField.setAttribute("name",key),hiddenField.setAttribute("value",params[key]),form.appendChild(hiddenField)}document.body.appendChild(form),form.submit(),document.body.removeChild(form)},Shopify.CountryProvinceSelector=function(country_domid,province_domid,options){this.countryEl=document.getElementById(country_domid),this.provinceEl=document.getElementById(province_domid),this.provinceContainer=document.getElementById(options.hideElement||province_domid),Shopify.addListener(this.countryEl,"change",Shopify.bind(this.countryHandler,this)),this.initCountry(),this.initProvince()},Shopify.CountryProvinceSelector.prototype={initCountry:function(){var value=this.countryEl.getAttribute("data-default");Shopify.setSelectorByValue(this.countryEl,value),this.countryHandler()},initProvince:function(){var value=this.provinceEl.getAttribute("data-default");value&&this.provinceEl.options.length>0&&Shopify.setSelectorByValue(this.provinceEl,value)},countryHandler:function(e){var opt=this.countryEl.options[this.countryEl.selectedIndex],raw=opt.getAttribute("data-provinces"),provinces=JSON.parse(raw);if(this.clearOptions(this.provinceEl),provinces&&provinces.length==0)this.provinceContainer.style.display="none";else{for(var i=0;i<provinces.length;i++){var opt=document.createElement("option");opt.value=provinces[i][0],opt.innerHTML=provinces[i][1],this.provinceEl.appendChild(opt)}this.provinceContainer.style.display=""}},clearOptions:function(selector){for(;selector.firstChild;)selector.removeChild(selector.firstChild)},setOptions:function(selector,values){for(var i=0,count=values.length;i<values.length;i++){var opt=document.createElement("option");opt.value=values[i],opt.innerHTML=values[i],selector.appendChild(opt)}}};class ProductForm extends HTMLElement{constructor(){super(),new AddToCart(this)}}customElements.define("product-form",ProductForm);class Countdown extends HTMLElement{constructor(){super(),this.element=this;const counterWrapper=this.element.querySelector(".announcement-bar__countdown-text");this.options=JSON.parse(this.element.getAttribute("data-settings"));let counterString=this.options.countdownString;counterString=counterString.replace("{countdown}",'<span class="u-p2 announcement-bar__countdown-timer">00:00:00</span>'),counterWrapper.innerHTML=counterString;const todaysDay=new Date().getDay(),countdownDay=this.options.countdownDays;this.dayDifference=countdownDay-todaysDay,this.dayDifference<0&&(this.dayDifference+=7),this.counter=this.element.querySelector(".announcement-bar__countdown-timer"),setInterval(this.countDown.bind(this),1e3)}countDown(){const dateNow=new Date,currentHours=dateNow.getHours(),currentMinutes=dateNow.getMinutes();let countDate=new Date(`March 3, 2099 ${this.options.countdownTime}`);this.options.countdownType=="to_date"&&(countDate=new Date(this.options.countdownDate));const difference=countDate-dateNow,seconds=1e3,minutes=seconds*60,hours=minutes*60,days=hours*24;let textDays=Math.floor(difference/(1e3*60*60*24)),textHours=Math.floor(difference%days/hours),textMinutes=Math.floor(difference%hours/minutes),textSeconds=Math.floor(difference%minutes/seconds);const[targetHours,targetMinutes]=this.options.countdownTime.split(":").map(Number);targetHours<currentHours||targetHours===currentHours&&targetMinutes<=currentMinutes&&this.options.countdownType=="reccuring"?textDays=this.dayDifference-1:this.options.countdownType=="reccuring"&&(textDays=this.dayDifference);const displayHours=textHours,formatHours=displayHours<10?`0${displayHours}`:displayHours,formatMinutes=textMinutes<10?`0${textMinutes}`:textMinutes,formatSeconds=textSeconds<10?`0${textSeconds}`:textSeconds;textDays>0?this.counter.innerText=`${textDays}d ${formatHours}:${formatMinutes}:${formatSeconds}`:this.counter.innerText=`${formatHours}:${formatMinutes}:${formatSeconds}`}}customElements.define("countdown-element",Countdown);class CartDrawer extends HTMLElement{constructor(){super(),this.element=this,this.delegateElement=new Delegate(this.element),this.Drawer=new Drawer(this.element),this.loader=this.element.querySelector(".itemLoader"),this.cartCount=document.querySelectorAll(".CartCount"),this.options=JSON.parse(this.element.getAttribute("data-settings")),this.pageLoader=document.body.querySelector(".pageLoader"),this.breakpoint=new Responsive().getCurrentBreakpoint(),this.changeEvent=new Event("quantity:changed",{bubbles:!0}),this.addToCartInstance=new AddToCart(this.element),this.bindEvents(),this.buildGroups()}onUnload(){this.delegateElement.off(),document.removeEventListener("product:added",this.onProductAddedListener)}bindEvents(){window.theme.listener=="false"&&(this.onProductAddedListener=this.onProductAdded.bind(this),document.addEventListener("cart-drawer:open",this.onOpen.bind(this)),document.addEventListener("product:added",this.onProductAddedListener),this.delegateElement.on("click",'[data-action="update-item-quantity"], [data-action="remove-item"]',this.updateItemQuantity.bind(this)),this.delegateElement.on("change",'[data-action="update-change-quantity"]',this.updateItemQuantity.bind(this)),this.delegateElement.on("keydown",'[data-action="update-change-quantity"]',this.preventEvent.bind(this)),this.delegateElement.on("click",'[data-action="update-item-quantity-for-group"]',this.updateItemQuantitForGroup.bind(this)),this.delegateElement.on("change",'[data-action="update-change-quantity-for-group"]',this.updateItemQuantitForGroup.bind(this)),this.delegateElement.on("keydown",'[data-action="update-change-quantity-for-group"]',this.preventEvent.bind(this)),this.delegateElement.on("quantity:changed",".QuantitySelector__CurrentQuantity",this.updateItemQuantity.bind(this)),window.theme.listener="true")}onOpen(){this.element.getAttribute("aria-expanded")=="false"&&document.documentElement.style.setProperty("--cartHeader-height",document.querySelector(".CartHeader").offsetHeight+"px")}preventEvent(event2,target){(event2.which===13||event2.keyCode===13&&event2.target.getAttribute("data-action")==="update-change-quantity-for-group")&&(event2.preventDefault(),this.updateItemQuantitForGroup(event2,target)),(event2.which===13||event2.keyCode===13)&&(event2.preventDefault(),this.updateItemQuantity(event2,target))}async updateItemQuantitForGroup(event2,target){event2.preventDefault(),console.log("event za group ready",event2.target.dataset.quantity);const productInfo=event2.target.closest(".cartItem--Informations"),productId=productInfo.dataset.addAgain,value=productInfo.querySelector(".QuantitySelector__CurrentQuantity");let quantity=null;if(target.tagName==="INPUT"?quantity=parseInt(Math.max(parseInt(target.value)||0,0)):quantity=parseInt(event2.target.dataset.quantity),quantity>=2){console.log("Usaoooo",quantity),quantity=quantity-1;try{await this.addToCartInstance.addToCartWithId(productId,quantity),value.setAttribute("value","1"),this.onProductAdded(event2)}catch(error){console.error("Error during add to cart:",error)}}quantity===0&&this.addToCartInstance.removeGroup(event2)}updateItemQuantity(event2,target){event2.preventDefault(),!target.classList.contains("additional-servece-button")&&target.closest(".cartItem").querySelector(".itemLoader")&&target.closest(".cartItem").querySelector(".itemLoader").classList.add("is-visible");var _this=this,quantity=null;target.tagName==="INPUT"?quantity=parseInt(Math.max(parseInt(target.value)||0,0)):quantity=parseInt(target.getAttribute("data-quantity"));const unitSelected=target.getAttribute("data-unit-selected"),payload={id:target.getAttribute("data-line-id"),quantity};unitSelected&&(payload.properties={_unit_selected:unitSelected}),fetch(window.routes.localeRootUrl+"/cart/change.js",{body:JSON.stringify(payload),credentials:"same-origin",method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}).then(function(response){_this.renderCart(target.getAttribute("data-id"),!0),response.ok&&(_this.element.dispatchEvent(new CustomEvent("product:changed",{bubbles:!0,detail:target.getAttribute("data-id").match(/\d+/)})),localStorage.setItem(target.getAttribute("data-id").match(/\d+/),quantity))})}onProductAdded(e){var _this=this;e.detail.onlyRender?(this.disableScroll=!1,this.renderCart()):(this.disableScroll=!0,this.renderCart().then(function(){_this.Drawer.openDrawer()}))}renderCart(lineNumber,quantityChange){this.element.querySelector(".emptyItem")&&this.element.querySelector(".emptyItem").remove(),this.pageLoader.style.width="100%";var _this=this;return fetch(window.routes.localeRootUrl+"/?section_id=main-cart_drawer",{credentials:"same-origin",method:"GET"}).then(function(content){content.text().then(function(html){_this.replaceContent(html,lineNumber,quantityChange)})})}replaceContent(html,lineNumber,quantityChange){var _this=this;this.pageLoader.style.left="unset",this.pageLoader.style.right="0px",this.pageLoader.style.width="0%",setTimeout(()=>{this.pageLoader.style.left="0px",this.pageLoader.style.right="unset"},550);var tempElement=document.createElement("div");tempElement.innerHTML=html,this.tempOptions=JSON.parse(tempElement.querySelector("#cart").getAttribute("data-settings")),this.options=this.tempOptions;const number=this.tempOptions.itemCount;if(number==0&&(document.cookie="checkout_entered=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"),this.cartCount.forEach(num=>{num.innerHTML=`${number}`}),window.theme.cartCount=parseInt(number),lineNumber){var cartNodeParent=this.element.querySelector("#"+lineNumber);const itemToReplaceWith=tempElement.querySelector("#"+lineNumber);if(cartNodeParent&&cartNodeParent.querySelector(".itemLoader")&&cartNodeParent.querySelector(".itemLoader").classList.remove("is-visible"),itemToReplaceWith?(cartNodeParent.replaceWith(itemToReplaceWith),window.theme.enableAnimations&&new RevolutionAnimation(this.element)):this.renderCart(),number>0&&this.element.querySelector(".CartFooter--Buttons")){const checkoutButtonParent=this.element.querySelector(".CartFooter--Buttons"),checkoutButtonToReplace=tempElement.querySelector(".cartCheckout--Button");checkoutButtonParent.replaceChild(checkoutButtonToReplace,checkoutButtonParent.querySelector(".cartCheckout--Button"));const footerTotalParent=this.element.querySelector(".MetaIcon--Wrappers"),footerTotalToReplace=tempElement.querySelector(".CartFooter--Totals");footerTotalParent&&footerTotalToReplace&&footerTotalParent.replaceChild(footerTotalToReplace,footerTotalParent.querySelector(".CartFooter--Totals"));const cartFreeShippingParent=this.element.querySelector(".cart-drawer__shipping-wrapper"),cartFreeShippingToReplace=tempElement.querySelector(".cart-drawer__shipping-wrapperLeftContent"),shippingBarTemp=tempElement.querySelector(".cart-drawer__shipping-wrapperLeftMoneyProgress"),shippingBarCurrent=this.element.querySelector(".cart-drawer__shipping-wrapperLeftMoneyProgress");cartFreeShippingToReplace&&(cartFreeShippingParent.replaceChild(cartFreeShippingToReplace,cartFreeShippingParent.querySelector(".cart-drawer__shipping-wrapperLeftContent")),shippingBarTemp&&shippingBarCurrent?shippingBarCurrent.style.width=shippingBarTemp.style.width:shippingBarCurrent&&!shippingBarTemp?shippingBarCurrent.remove():cartFreeShippingParent.append(tempElement.querySelector(".cart-drawer__shipping-wrapperLeftMoneyProgressBar")))}else{this.element.querySelector(".CartDrawer--Footer").classList.add("removing");const mainPartParent=this.element.querySelector(".CartDrawer");mainPartParent.innerHTML=tempElement.querySelector(".CartDrawer").innerHTML,window.theme.enableAnimations&&mainPartParent.querySelector("#main-cartItems").animate([{opacity:"0"},{opacity:"1"}],{duration:500,fill:"forwards"})}this.element.querySelector(".itemLoader")&&setTimeout(()=>{this.element.querySelector(".itemLoader").classList.remove("is-visible")},250)}else{const cartNodeParent2=this.element.querySelector(".CartDrawer").parentNode,currentScrollPosition=this.element.querySelector("#main-cartItems").scrollTop;cartNodeParent2.replaceChild(tempElement.querySelector(".CartDrawer"),this.element.querySelector(".CartDrawer")),this.element.querySelector("#main-cartItems").scrollTop=currentScrollPosition}setTimeout(()=>{var focus=_this.element.querySelector("[data-scrollable]");this.disableScroll&&bodyScrollLock.disableBodyScroll(focus,bodyScrollLockOptions),_this.Drawer.maxHeight()},200)}buildGroups(){function getElementsBetween(startElem,endElem){if(!startElem||!endElem)return;const elements=[];let current=startElem.nextElementSibling;for(;current&&current!==endElem;)elements.push(current),current=current.nextElementSibling;return elements}const openings=this.element.querySelectorAll(".product-card__group-open"),closings=this.element.querySelectorAll(".product-card__group-closed"),index=openings.length;if(!(!index||index!==closings.length))for(let i=0;i<index;i++){const opening=openings[i],closing=closings[i];getElementsBetween(opening,closing).forEach(elem=>opening.append(elem)),opening.classList=opening.dataset.classList,opening.removeAttribute("data-class-list"),opening.removeAttribute("data-index"),closing.remove()}}}customElements.define("cart-drawer",CartDrawer);class FeaturedCollectionSection extends HTMLElement{constructor(){super(),this.element=this,this.delegateElement=new Delegate(this.element),this.bodyDelegate=new Delegate(document.body),this.element.querySelector(".swiper.turn-on")&&(this.carouselElement=this.element.querySelector(".swiper.turn-on")),this.bindEvents(),this.matchesBreakpoint()}bindEvents(){this.showMoreBinder=this.showMore.bind(this),this.delegateElement.on("click",".featured-collection_button--show-more",this.showMoreBinder),this.element.dataset.slider==="true"&&(responsive.addBreakpointListener("lap_and_up"),this.bodyDelegate.on("breakpoint:lap_and_up",e=>{this.matchesBreakpoint()}))}matchesBreakpoint(){responsive.matchesBreakpoint("lap_and_up")?this.carousel&&this.carousel.destroy():this.carouselElement&&(this.carousel=new RevolutionSwiper(this.carouselElement))}showMore(){this.carouselElement&&this.carouselElement.classList.add("show"),this.delegateElement.off("click",this.showMoreBinder)}}customElements.define("featured-collection",FeaturedCollectionSection);class Header extends HTMLElement{constructor(){super(),this.element=this,this.delegateElement=new Delegate(this.element),this.delegateBody=new Delegate(document.body),this.options=JSON.parse(this.getAttribute("data-settings")),this.scrollableElement=this.element.querySelector("[data-scrollable]"),this.options.sticky&&this.toggleSticky(),document.documentElement.style.setProperty("--header-height-fixed",document.querySelector("#header").offsetHeight+"px"),this.updateVisibleHeight(),this.bindEvents(),this.menuOverlapHandler()}updateVisibleHeight(){const rect=this.element.getBoundingClientRect(),windowHeight=window.innerHeight;let visibleHeight=Math.min(rect.bottom,windowHeight)-Math.max(rect.top,0);visibleHeight=Math.max(visibleHeight,0),document.documentElement.style.setProperty("--header-dynamic-height",`${visibleHeight}px`)}menuOverlapHandler(){var currentClientWidth=Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.documentElement.clientWidth),menuItems=this.element.querySelector(".header--MenuItems"),overlapping=!1,menuWrapper=this.element.querySelector(".header--Wrapper"),allHeights=[],_this=this;if(menuItems){var desiredHeight=_this.element.querySelectorAll(".mainLinks");desiredHeight.forEach(item=>{allHeights.push(item.offsetHeight)});var maxHeight=Math.max.apply(null,allHeights),minHeight=Math.min.apply(null,allHeights);maxHeight>minHeight&&(overlapping=!0,(window.theme.menuBreakpoint==0||window.theme.menuBreakpoint==null)&&(window.theme.menuBreakpoint=currentClientWidth))}currentClientWidth>window.theme.menuBreakpoint?(menuItems.classList.remove("mt-m"),menuItems.classList.remove("mainMenu--Overlapping"),menuWrapper.querySelector(".mainMenuItems").prepend(menuItems),window.theme.menuBreakpoint=0):overlapping&&(menuItems.classList.add("mt-m"),menuItems.classList.add("mainMenu--Overlapping"),menuItems.closest(".header").appendChild(menuItems)),document.documentElement.style.setProperty("--header-height",_this.element.clientHeight+"px"),menuItems.style.opacity=1}toggleSticky(){this.element.parentElement.classList.add("header--Sticky")}bindEvents(){const _this=this;document.addEventListener("shopify:section:load",function(){_this.menuOverlapHandlerListener()}),this.menuOverlapHandlerListener=this.menuOverlapHandler.bind(this),responsive.addResizeListener(this,this.menuOverlapHandlerListener),this.toggleColorListener=this.toggleColor.bind(this),scrollListener.addScrollListener(this,this.toggleColorListener),this.delegateBody.on("menu:close",this.closeMenu.bind(this),!0),this.delegateElement.on("mouseenter","[aria-hasMenu='true']",this.openMenu.bind(this),!0),this.delegateElement.on("focusin","[aria-hasMenu='true']",this.openMenu.bind(this),!0),this.delegateElement.on("mouseover","[data-action='on-hover']",this.handleHoverInMenu.bind(this),!0),this.delegateElement.on("mouseleave","[aria-submenu]",this.closeMenu.bind(this),!0),this.delegateElement.on("mouseenter","[aria-singlemenu]",this.closeMenu.bind(this),!0),this.delegateElement.on("focusin","[aria-singleMenu], .mainLinks",this.closeMenu.bind(this),!0),scrollListener.addScrollListener(this,this.updateVisibleHeight.bind(this)),responsive.addResizeListener(this,this.updateVisibleHeight.bind(this))}handleHoverInMenu(event2){if(!event2.target.getAttribute("data-handle"))return;const dataHandle=event2.target.getAttribute("data-handle"),dropdownParent=event2.target.closest(".desktopMenu--Dropdown"),productsWrapper=dropdownParent.querySelector(".desktop-menu__products-wrapper");if(!dataHandle||!dropdownParent||!dropdownParent||!productsWrapper)return;productsWrapper.querySelectorAll(".desktop-menu__on-hover-item").forEach(item=>{item.getAttribute("data-handle")===dataHandle?item.style.display="block":item.style.display="none"})}updateMenuPosition(){document.documentElement.style.setProperty("--submenu-position",`${document.querySelector("#header").offsetHeight}px`)}openMenu(event2,target){if(this.element.dispatchEvent(new CustomEvent("menu:open",{bubbles:!0})),event2.type==="mouseenter"&&target!==event2.target)return;this.updateMenuPosition(target),target.setAttribute("aria-expanded","true"),Array.from(target.parentElement.children).filter(child=>child!==target&&child.getAttribute("aria-expanded")==="true").forEach(item=>item.setAttribute("aria-expanded","false")),bodyScrollLock.disableBodyScroll(this.scrollableElement,bodyScrollLockOptions)}closeMenu(event2,target){if(event2.type==="mouseleave"&&target!==event2.target)return;this.element.querySelectorAll('[aria-expanded="true"]').forEach(function(item){item.setAttribute("aria-expanded","false")}),this.toggleColor(),bodyScrollLock.enableBodyScroll(this.scrollableElement)}toggleColor(){window.pageYOffset>25?this.element.classList.add("Header--Scrolled"):this.element.classList.remove("Header--Scrolled")}}customElements.define("header-component",Header);class MainMenuDropdown extends HTMLElement{constructor(){super(),this.element=this,this.SidebarMenu=new Drawer(this.element),this.bindEvents()}bindEvents(){document.addEventListener("sidebar-drawer:open",this.onDrawerListener)}}customElements.define("main-menu-dropdown",MainMenuDropdown);class Transition{constructor(){this.pageOverlay=document.querySelector(".pageTransition"),this.isPageLoaded?this.onPageLoaded():document.addEventListener("DOMContentLoaded",this.onPageLoaded.bind(this))}onPageLoaded(){this.isPageLoaded=!0,this.pageOverlay&&window.theme.showPageTransition&&this.pageOverlay.animate([{opacity:1},{opacity:0}],{duration:100,fill:"forwards",easing:"ease-in-out",iterations:1})}onPageUnload(event2,target){if(!(event2.defaultPrevented||event2.ctrlKey||event2.metaKey||!window.theme.showPageTransition||!this.pageOverlay)&&(event2.preventDefault(),this.pageOverlay)){var timeline=new TimelineLite({onComplete:function(){window.location.href=target.href}});timeline.fromTo(this.pageOverlay,.25,{autoAlpha:0,ease:Linear.easeNone},{autoAlpha:1,ease:Linear.easeNone})}}}new Transition;class VideoComponent extends HTMLElement{constructor(){super(),this.element=this,this.options=JSON.parse(this.element.getAttribute("data-section-settings")),this.trueObserver=!1,this.options.using_fade=="fade"&&new Responsive().matchesBreakpoint("pocket")?(this.checkLoaded(),this.bindEvents()):this.checkLoaded()}bindEvents(){window.removeEventListener("swiper:slide-changed",this.onSlideChangeListener),this.onSlideChangeListener=this.onSlideChange.bind(this),window.addEventListener("swiper:slide-changed",this.onSlideChangeListener)}checkLoaded(){var _this=this;typeof videojs<"u"?this.videoPlayerInitialization():(loadScript(window.theme.videoScript),setTimeout(function(){_this.checkLoaded()},100))}onSlideChange(event2){if(this.elementPosition=parseInt(this.element.getAttribute("data-position")),event2.detail.currentIndex==this.elementPosition)if(this.element.getAttribute("loaded"))this.videoPlayer?this.options.viewport&&(this.videoPlayer.play(),this.createObserver()):this.checkLoaded();else{var node=document.createElement("div");node.appendChild(this.element.querySelector("template").content.firstElementChild.cloneNode(!0)),this.element.appendChild(node.firstElementChild).focus(),this.element.setAttribute("loaded",!0),this.videoPlayer?this.options.viewport&&(this.videoPlayer.play(),this.createObserver()):this.checkLoaded()}else this.videoPlayer&&this.videoPlayer.el_.classList.contains("vjs-playing")&&this.videoPlayer.pause()}videoPlayerInitialization(){if(!this.element.getAttribute("loaded")){const node=document.createElement("div");node.appendChild(this.element.querySelector("template").content.firstElementChild.cloneNode(!0)),this.element.appendChild(node.firstElementChild).focus(),this.element.setAttribute("loaded",!0)}const breakpoint=new Responsive().getCurrentBreakpoint(),isMobile=breakpoint==="phone"||breakpoint==="tablet";let aspect_ratio="",src="",host="html5";if(isMobile)if(aspect_ratio=this.options.aspect_mob||"9:16",this.options.videoType=="video_inside_media"){const sources=this.options.videod.sources;let topQuality=null;sources.forEach(obj=>{obj.format==="mp4"&&(topQuality||(topQuality=obj),topQuality.height<obj.height&&(topQuality=obj))});const aspectRatioHeight=Math.floor(100/this.options.videod.aspect_ratio);this.options.videoRatio?aspect_ratio=this.options.videoRatio:aspect_ratio=`100:${aspectRatioHeight}`,src=topQuality.url+"#t=0.001"}else if(this.options.videoType=="video_inside_media_external"){const aspectRatioHeight=Math.floor(100/this.options.videom.aspect_ratio);this.options.videoRatio?aspect_ratio=this.options.videoRatio:aspect_ratio=`100:${aspectRatioHeight}`,host=this.options.videom.host,host=="youtube"?src="https://www.youtube.com/watch?v="+this.options.videom.external_id:src=this.options.videom.external_id}else this.options.videom.includes("youtube")?host="youtube":this.options.videom.includes("vimeo")&&(host="vimeo"),src=this.options.videom;else if(aspect_ratio=this.options.aspect_desk||"16:9",this.options.videoType=="video_inside_media"){const sources=this.options.videod.sources;let topQuality=null;sources.forEach(obj=>{obj.format==="mp4"&&(topQuality||(topQuality=obj),topQuality.height<obj.height&&(topQuality=obj))}),src=topQuality.url+"#t=0.001";const aspectRatioHeight=Math.floor(100/this.options.videod.aspect_ratio);this.options.videoRatio?aspect_ratio=this.options.videoRatio:aspect_ratio=`100:${aspectRatioHeight}`}else if(this.options.videoType=="video_inside_media_external"){host=this.options.videod.host;const aspectRatioHeight=Math.floor(100/this.options.videod.aspect_ratio);this.options.videoRatio?aspect_ratio=this.options.videoRatio:aspect_ratio=`100:${aspectRatioHeight}`,host=="youtube"?src="https://www.youtube.com/watch?v="+this.options.videod.external_id:src=this.options.videod.external_id}else this.options.videod.includes("youtube")?host="youtube":this.options.videod.includes("vimeo")&&(host="vimeo"),src=this.options.videod;src||(src="https://www.youtube.com/watch?v=_9VUPq3SxOc",host="youtube");const type=host==="youtube"?"video/youtube":host==="vimeo"?"video/vimeo":"video/mp4";aspect_ratio=aspect_ratio.replace("/",":");const payload={aspectRatio:aspect_ratio,autoplay:!1,muted:this.options.muted,loop:this.options.loop,controls:this.options.controls,poster:!1,preload:"metadata",playsinline:!0,responsive:!0,techOrder:[host],disablePictureInPicture:!0,controlBar:{children:["playToggle","progressControl","currentTimeDisplay","timeDivider","durationDisplay","CustomControlSpacer","VolumePanel"]},sources:[{type,src}]},videoplayerID=this.element.querySelector("video");this.videoPlayer=videojs(videoplayerID,payload);const _this=this;if(this.videoPlayer.on("ready",function(){_this.element.querySelector(".videoHolder").style.display="block",_this.trueObserver==!1&&_this.options.viewport&&_this.createObserver()}),this.options.muted&&host=="vimeo"&&this.videoPlayer.on("play",function(){_this.videoPlayer.muted("true")}),this.options.controls){if(host=="html5"&&this.videoPlayer.on("touchstart",function(){event.target.closest(".vjs-control-bar")||(_this.videoPlayer.paused()?_this.videoPlayer.play():_this.videoPlayer.pause())}),host=="html5")return;this.videoPlayer.on("click",function(){event.target.closest(".vjs-control-bar")||(_this.videoPlayer.paused()?_this.videoPlayer.play():_this.videoPlayer.pause())})}}createObserver(){new IntersectionObserver(this.handleIntersect.bind(this),{threshold:.2,rootMargin:"200px 0px 200px 0px"}).observe(this.element),this.trueObserver=!0}handleIntersect(entries){entries.forEach(entry=>{if(entry.intersectionRatio===1||entry.isIntersecting==!0){if(!this.videoPlayer){this.checkLoaded();return}if(this.options.viewport&&this.videoPlayer){this.videoPlayer.muted("true");const checkIfPlaying=()=>{this.videoPlayer.el_.classList.contains("vjs-playing")||(this.videoPlayer.play(),setTimeout(checkIfPlaying,100))};checkIfPlaying()}}else(entry.intersectionRatio===0||entry.isIntersecting==!1)&&this.videoPlayer&&this.videoPlayer.el_.classList.contains("vjs-playing")&&this.videoPlayer.pause()})}}customElements.define("video-component",VideoComponent);class FooterComponent extends HTMLElement{constructor(){super(),this.element=this;let breakpoint=responsive.getCurrentBreakpoint();breakpoint=="phone"||breakpoint=="tablet",window.addEventListener("load",function(){const currentHash=window.location.hash;(currentHash==="#footerFormMobile"||currentHash==="#footerFormDesktop")&&(document.documentElement.style.scrollBehavior="auto",setTimeout(function(){document.documentElement.style.scrollBehavior="smooth"},500))}),document.documentElement.style.setProperty("--footer-height",document.querySelector(".mainfooterWrapper").offsetHeight+"px"),window.onload=()=>setTimeout(()=>{document.documentElement.style.setProperty("--footer-height",document.querySelector(".mainfooterWrapper").offsetHeight+"px")},500)}}customElements.define("footer-component",FooterComponent);class ProductElement extends HTMLElement{constructor(){super(),this.element=this,this.domDelegate=new Delegate(this.element),this.bodyDelegate=new Delegate(document.body),this.breakpoint=new Responsive().getCurrentBreakpoint(),this.pageOverlayElement=document.querySelector(".pageOverlay"),this.initialization(),this.bindEvents()}initialization(){this.changeImageQuality(),this.mainATCs=this.element.querySelectorAll(".ProductPage--ATC.default-btn"),new AddToCart(this.element),this.allDrawers=this.element.querySelectorAll(".Drawer--wrapper"),this.allDrawers.forEach(drawer=>{new Drawer(drawer)});var selectBoxes=this.element.querySelectorAll(".RevolutionSelectbox");selectBoxes.length>0&&selectBoxes.forEach((item,i)=>{new RevolutionSelectbox(item)}),this.productInfoWrapper=this.element.querySelector(".product-info__wrapper"),this.carouselElement=this.element.querySelector(".mainSwiper"),this.firstSlideImage=this.element.querySelector(".ProductSlider--Element"),this.addToCartBtn=this.element.querySelectorAll(".MainProduct--ATC"),this.options=JSON.parse(this.element.getAttribute("data-section-settings")),this.breakpoint!=="desktop"&&this.breakpoint!=="lap"&&this.options.slides_number>1&&(this.carousel=new RevolutionSwiper(this.carouselElement),this.swiper=this.carouselElement.swiper),this.options.enable_zoom&&new RevolutionImageZoom(this.element,this.carousel),this.options.variant_image_id&&this.options.show_variant_image_on_load&&(this.calledBecauseOfThis=!0,this.updateImage()),this.options.sticky_atc&&this.breakpoint!=="desktop"&&this.breakpoint!=="lap"&&(this.elementToHide=this.element.querySelector(".product-action__sticky"),this.elementToHide&&(this.elementToHide.classList.remove("sticky-pop-up"),this.bindObserver())),this.handleLocalStorage(),this.notifyMeBtns=this.querySelectorAll(".Button--NotifyMe"),this.notifyMeOverlay=this.element.querySelector(".notifyMeOverlay"),this.additionalContent=this.element.querySelector(".notify-me__additional-content"),this.options.restock_info&&window.addEventListener("DOMContentLoaded",()=>{const intervalId2=setInterval(()=>{if(document.querySelector(".appikon-bis-inline-form-wrapper")){clearInterval(intervalId2);const sendButton=document.querySelector("#appikon-bis-inline-form-submit"),subscribeTxt=sendButton.textContent.trim();sendButton.textContent="";const spanFirst=document.createElement("span"),btnContainer=document.createElement("div");btnContainer.classList.add("ButtonTextContainer"),btnContainer.appendChild(spanFirst),spanFirst.classList.add("ButtonText","ButtonTextStart","u-pb1"),spanFirst.innerText=subscribeTxt,sendButton&&(sendButton.classList.add("Button--PrimaryOnLight","Button--Normal"),sendButton.appendChild(btnContainer)),this.notifyMeBtns.forEach(btn=>{btn.removeAttribute("disabled")});const productImage=this.element.querySelector(".ProductSlider--ImageFirst")?this.element.querySelector(".ProductSlider--ImageFirst").cloneNode(!0):null,destContainer=this.element.querySelector("#appikon-bis-inline-form-wrapper"),closeButton=document.createElement("button");closeButton.classList.add("notify-me__btn-close"),closeButton.setAttribute("data-action","notify-close"),closeButton.innerHTML=`
            <svg
        class="{{ icon_class }} {{ spacing }}"
        width="20"
        height="20"
        viewBox="0 0 20 20"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path d="M5.83351 5L15 14.4118L14.4271 15L5.26061 5.58824L5.83351 5Z" fill="#28272A"/>
        <path d="M5 14.414L14.1686 5L14.7142 5.56017L5.54557 14.9741L5 14.414Z" fill="#28272A"/>
      </svg>
          `,destContainer.appendChild(closeButton),this.additionalContent&&(destContainer.appendChild(this.additionalContent),this.additionalContent.style.display="flex");const atcButtons=document.querySelectorAll(".ProductPage--DefaultVariant");atcButtons.forEach(btn=>btn.style.display="none"),productImage&&destContainer.appendChild(productImage),atcButtons&&document.querySelectorAll(".showNotifyMe").forEach(btn=>btn.style.display="flex"),this.pageOverlayElement.addEventListener("click",this.closeNotifyPopup.bind(this)),this.domDelegate.on("click",'[data-action="notify-open"]',this.openNotifyPopup.bind(this)),this.domDelegate.on("click",'[data-action="notify-close"]',this.closeNotifyPopup.bind(this)),this.element.dispatchEvent(new CustomEvent("notify:added",{bubbles:!0,detail:document.querySelectorAll(".Button--NotifyMe")}))}},100);setTimeout(()=>{clearInterval(intervalId2)},5e3)}),this.stickyInfo=this.options.pdp_info_sticky,this.complementaryEl=this.element.querySelector(".complementary_products--wrapper"),this.complementaryEl&&this.handleComplementaryProducts(),this.errorMsg=this.element.querySelector(".error-msg"),this.frameCarouselEl=this.element.querySelector(".frame-products__swiper"),this.frameCarouselEl&&(this.frameCarousel=new RevolutionSwiper(this.frameCarouselEl)),this.selectedFrameBox=this.element.querySelector('.product-frame-card[aria-selected="true"]'),(this.breakpoint!=="desktop"||this.breakpoint!=="lap")&&this.initObserver(),this.frame_id=this.element.querySelector('input[name="frame_id"]'),this.uspsCarouselEl=this.element.querySelector(".usps-carousel__blocks-wrapper"),this.uspsCarouselEl&&(this.uspsCarousel=new RevolutionSwiper(this.uspsCarouselEl))}bindEvents(){this.domDelegate.on("variants:update",this.updateFramesProductVariants.bind(this)),this.domDelegate.on("click",'[data-action="toggle-unit"]',this.toggleUnit.bind(this)),this.domDelegate.on("click",'[data-action="add-frame"]',this.addFrame.bind(this)),this.domDelegate.on("click",'[data-action="remove-frame"]',this.removeFrame.bind(this)),this.domDelegate.on("click",'[data-action="activate-link"]',this.makeLinkActive.bind(this)),this.domDelegate.on("variant:changed",this.updateImage.bind(this)),this.domDelegate.on("click",".ProductAction--ChangeButton",this.scrollToTop.bind(this)),this.closeNotifyPopupBinder=this.closeNotifyPopup.bind(this)}handleLocalStorage(){const productId=this.options.product_id;let viewedProducts=JSON.parse(localStorage.getItem("viewedProducts")||"[]");viewedProducts=viewedProducts.filter(p=>p!==productId),viewedProducts.unshift(productId),viewedProducts.length>6&&(viewedProducts=viewedProducts.slice(0,6)),localStorage.setItem("viewedProducts",JSON.stringify(viewedProducts))}updateFramesProductVariants(event2){if(!this.frameCarouselEl)return;const productsToBeUpdated=this.frameCarouselEl.querySelectorAll(".product-frame-card.real-product");!event2.target.currentVariant.available||event2.detail.disableFrames?productsToBeUpdated.forEach(product=>{product.dataset.disable="true"}):productsToBeUpdated.forEach(product=>{product.dataset.disable="false"});const variantToSet=event2.detail.currentOptions[0];productsToBeUpdated.forEach(product=>{product.setAttribute("data-disable",!0);const priceToBeUpdated=product.querySelector(".product-frame-card__price"),scriptElement=product.querySelector('script[type="application/json"]');scriptElement?(JSON.parse(scriptElement.textContent).forEach(variant=>{if(variant.options[0]==variantToSet){product.setAttribute("product-id",`${variant.id}`);let newVariantPrice=variant.price;const compare_price=variant.compare_at_price;let compare_span="";if(product.dataset.discount){const discount=product.dataset.discount/100;newVariantPrice=newVariantPrice-newVariantPrice*discount,compare_span=`<span class="pdp-compare-at-price ">${Shopify.formatMoney(variant.price,window.theme.moneyFormat)}</span>`}priceToBeUpdated.dataset.price=newVariantPrice;let priceSpan="<span>+"+Shopify.formatMoney(newVariantPrice,window.theme.moneyFormat);if(+"</span>",compare_price){let compare_price_span=`<span class="pdp-compare-at-price ">${Shopify.formatMoney(variant.compare_at_price,window.theme.moneyFormat)}</span>`;priceSpan=`<span class="original-price">+${Shopify.formatMoney(variant.price,window.theme.moneyFormat)}</span>${compare_price_span}`}newVariantPrice<variant.price&&(priceSpan=`<span class="original-price"> ${Shopify.formatMoney(newVariantPrice,window.theme.moneyFormat)}</span>${compare_span}`),priceToBeUpdated.innerHTML=priceSpan,variant.available&&product.setAttribute("data-disable",!1),variant.available?product.removeAttribute("out-of-stock"):product.setAttribute("out-of-stock","true")}}),window.variantInfo?.show_price&&this.querySelector('.product-frame-card[data-action="remove-frame"]').click()):console.error('Script element with type "application/json" not found in product:',product)}),productsToBeUpdated.forEach(product=>{product.getAttribute("data-disable")==="true"&&product.getAttribute("out-of-stock")!=="true"?product.parentElement&&product.parentElement.setAttribute("hidden",!0):product.parentElement&&product.parentElement.setAttribute("hidden",!1)}),this.frameCarouselEl.swiper.update()}toggleUnit(e){if(e.target.classList.contains("active"))return;const cmUnits=this.element.querySelectorAll(".unit-cm")||[],inUnits=this.element.querySelectorAll(".unit-in")||[],unit=this.element.querySelector(".variant-unit.active"),hiddenInput=document.getElementById("unit-selected-input"),switchingToInches=unit.classList.contains("first-unit");cmUnits.forEach(unit2=>unit2.classList.toggle("hidden",switchingToInches)),inUnits.forEach(unit2=>unit2.classList.toggle("hidden",!switchingToInches)),hiddenInput&&(hiddenInput.value=switchingToInches?"in":"cm"),unit.classList.remove("active"),e.target.classList.add("active")}removeFrame(e,target){this.handleSelect(target),this.removeOverlay(),this.addToCartBtn.forEach(btn=>{btn.setAttribute("data-action","add-to-cart")}),this.frame_id.dataset.id="",window.variantInfo?.show_price&&this.updateMainATCPrice(target)}removeOverlay(){if(this.firstSlideImage)this.firstSlideImage.querySelector(".ram_overlay")&&this.firstSlideImage.querySelector(".ram_overlay").remove();else return}addFrame(e,target){if(e.preventDefault(),this.handleSelect(target),this.breakpoint!=="desktop"&&this.breakpoint!=="lap"&&this.options.slides_number>1)this.swiper.slideTo(0);else if(this.breakpoint==="desktop"||this.breakpoint==="lap"){const firstNavBtn=this.element.querySelector(".desktop_bullets .product-bullet");firstNavBtn&&firstNavBtn.click()}const selectedOptions=JSON.parse(target.getAttribute("data-card-settings")),frameToAdd=selectedOptions.ram_image,imgSrc=selectedOptions.src,imgAlt=selectedOptions.alt,newImage=document.createElement("img");if(newImage.classList.add("ram_overlay"),!frameToAdd){this.errorMsg.classList.remove("hidden");return}imgSrc?newImage.src=imgSrc:newImage.src=frameToAdd,imgAlt&&(newImage.alt=imgAlt),this.removeOverlay(),this.firstSlideImage.appendChild(newImage),this.addToCartBtn.forEach(btn=>{btn.setAttribute("data-action","add-all-to-cart")}),this.frame_id.dataset.id=target.getAttribute("product-id"),window.variantInfo?.show_price&&this.updateMainATCPrice(target)}updateMainATCPrice(el){let priceToBeAdded=el.querySelector(".product-frame-card__price"),priceData=parseFloat(priceToBeAdded.dataset.price);priceToBeAdded||(priceToBeAdded=0),this.mainATCs.forEach(btn=>{let newAtcPrice=parseFloat(btn.dataset.price);const priceEl=btn.querySelector(".mainProductPrice");if(this.element.dataset.discount){const discount=this.element.dataset.discount/100;newAtcPrice=newAtcPrice-newAtcPrice*discount}const finalPrice=priceData+newAtcPrice;if(priceEl&&finalPrice)priceEl.textContent=`${Shopify.formatMoney(finalPrice,window.theme.moneyFormat)}`;else return})}handleSelect(el){this.selectedFrameBox.setAttribute("aria-selected",!1),el.setAttribute("aria-selected",!0),this.selectedFrameBox=el}async handleComplementaryProducts(){this.block_options=JSON.parse(this.complementaryEl.getAttribute("data-block-settings"));let optionToUse=this.block_options.select_type;this.complementaryElWrapper=this.element.querySelector(".complementary_products--wrapper");let url=`${window.routes.localeRootUrl}/recommendations/products?section_id=helper-complementary_products&product_id=${this.options.product_id}&limit=10&intent=${optionToUse}`;const response=await fetch(url);if(!response.ok)throw new Error(response.status);let content=await response.text();content=new DOMParser().parseFromString(content,"text/html");let hasProducts;const contentToInsert=content.querySelector(".complementaryProducts--section");if(!contentToInsert.querySelector(".complementryProducts--pdpSwiperWrapper .swiper-slide")){const template=this.element.querySelector("#complementarySwiperTemplate"),swiperContainer=this.element.querySelector(".complementary_products--PdpSwiper");if(template&&swiperContainer)swiperContainer.innerHTML=template.innerHTML,this.carouselComplementaryTemplate=this.element.querySelector("#complementarySwiperElementTemplate");else return;this.carouselComplementaryTemplate&&(this.NewCarousel=new RevolutionSwiper(this.carouselComplementaryTemplate)),this.childEl=this.element.querySelector(".complementaryProducts--sectionTemplate .complementaryProducts--imageWrapperTemplate"),this.childEl?hasProducts=!0:hasProducts=!1,this.complementaryElWrapper&&hasProducts&&(this.complementaryElWrapper.style.display="block");return}this.element.querySelector(".complementary_products--PdpSwiper").appendChild(contentToInsert),this.carouselComplementary=this.element.querySelector("#complementarySwiperElement"),this.carouselComplementary&&(this.NewCarousel=new RevolutionSwiper(this.carouselComplementary)),this.childEl=this.element.querySelector(".complementaryProducts--section .complementaryProducts--imageWrapper"),this.childEl?hasProducts=!0:hasProducts=!1,this.complementaryElWrapper&&hasProducts&&(this.complementaryElWrapper.style.display="block")}initObserver(){this.observer=new IntersectionObserver(this.handleIntersect.bind(this),{threshold:[.5]}),this.mediaLinks=this.element.querySelectorAll(".ProductSliderCell"),this.mediaLinks.forEach(mediaSlide=>this.observer.observe(mediaSlide))}handleIntersect(entries){entries.forEach(entry=>{if(entry.isIntersecting){this.removeAllLinks();const slideID=entry.target.id;this.element.querySelectorAll(`a[href="#${slideID}"]`).forEach(item=>{item.classList.add("active-link")})}})}removeAllLinks(){this.element.querySelectorAll(".active-link").forEach(item=>{item.classList.remove("active-link")})}makeLinkActive(event2){this.element.querySelectorAll(".desktop_bullets.product-bullet").forEach(item=>{item.classList.remove("active-link")}),event2.target.classList.add("active-link")}bindObserver(){const elementToObserve=this.element.querySelector(".ProductActions"),footerSection=document.body.querySelector(".mainfooterWrapper"),observerOptions={threshold:[0,.5,1],rootMargin:"0px"},observer=new IntersectionObserver(entries=>{const scrollToATCVisible=entries.some(entry=>entry.isIntersecting&&entry.target===elementToObserve),footerVisible=entries.some(entry=>entry.isIntersecting&&entry.target===footerSection);scrollToATCVisible||footerVisible?this.elementToHide.classList.remove("sticky-pop-up"):this.elementToHide.classList.add("sticky-pop-up")},observerOptions);observer.observe(elementToObserve),observer.observe(footerSection)}openNotifyPopup(){event.preventDefault(),this.isOpen=!0,this.notifyMeOverlay.classList.add("is-visible"),document.body.querySelector("#shopify-section-main-header").style.zIndex="2",this.domDelegate.on("click",".notifyMeOverlay",this.closeNotifyPopupBinder),bodyScrollLock.disableBodyScroll(document.querySelector("[data-scrollable]"),bodyScrollLockOptions),document.querySelector(".appikon-bis-inline-form-wrapper").classList.add("showNotifyMe")}closeNotifyPopup(){event.preventDefault(),this.isOpen&&(this.domDelegate.off("click",".notifyMeOverlay",this.closeNotifyPopupBinder),this.notifyMeOverlay.classList.remove("is-visible"),document.body.querySelector("#shopify-section-main-header").style.zIndex="6",bodyScrollLock.enableBodyScroll(document.querySelector("[data-scrollable]"),bodyScrollLockOptions),document.querySelector(".appikon-bis-inline-form-wrapper").classList.remove("showNotifyMe"),this.isOpen=!1)}scrollToTop(){const elementToScroll=this.element.querySelector(".ScrollToATC");if(elementToScroll){const positionToScroll=elementToScroll.getBoundingClientRect().top+window.scrollY+elementToScroll.clientHeight-window.innerHeight+24;window.scrollTo({top:positionToScroll,behavior:"smooth"})}}updateImage(event2){if(event2)var imageID=event2.detail.new_image;else var imageID=this.options.variant_image_id;var selector="#Image--"+imageID,imageEl=this.element.querySelector(selector);if(imageEl&&imageEl.getAttribute("data-position")&&this.carousel)this.carousel.selectCell(parseInt(imageEl.getAttribute("data-position")));else return;if(imageEl&&imageEl.getAttribute("data-position")&&this.carousel)this.carousel.selectCell(parseInt(imageEl.getAttribute("data-position")));else return;setTimeout(()=>{this.calledBecauseOfThis&&this.options.autoplay_slider&&this.swiper.autoplay.start(),this.calledBecauseOfThis=!1},300)}changeImageQuality(){var imageToReveal=null;if(imageToReveal=this.element.querySelector(".ProductSlider--ImageFirst"),imageToReveal!==null){const replaceUrl=imageToReveal.getAttribute("data-src").replace("{width}x","2600x");imageToReveal.src=replaceUrl}}}customElements.define("product-component",ProductElement);class VariantSelects extends HTMLElement{constructor(){super(),this.element=this,this.type=this.element.getAttribute("data-type"),this.productID=this.element.getAttribute("data-product-id"),this.delegateElement=new Delegate(this.element),this.delegateBody=new Delegate(document.body),this.init(),this.bindEvents(),this.onQuantityChange(),this.onVariantChange()}init(){this.regularPrice=document.querySelector("product-component .pdp-regular-price .changePrice"),this.compareAtPrice=document.querySelector("product-component .pdp-compare-at-price"),this.pricesWrapper=document.querySelector(".pdp-prices")}bindEvents(){this.delegateBody.on("quantity:changed",this.onQuantityChange.bind(this));var selectboxes=this.element.querySelectorAll("select, input");selectboxes.forEach(item=>{item.addEventListener("change",this.onVariantChange.bind(this))}),this.delegateBody.on("notify:added",this.toggleAddButton.bind(this))}onQuantityChange(){this.updateOptions(),this.updateMasterId(),this.toggleAddButton()}onVariantChange(){this.updateOptions(),this.updateMasterId(),this.toggleAddButton(),this.updatePickupAvailability(),this.updateVariantStatuses(),this.updateMedia(),this.updateURL(),this.updateVariantInput(),this.renderProductInfo(),this.updateFrameProducts(),this.updateFavorites()}updateFavorites(){document.querySelector(".pdp__fav-icon").dataset.size=this.currentVariant.title,this.element.dataset.inches=="true"&&(document.querySelector(".pdp__fav-icon").dataset.size=this.element.querySelector(`.inputSelectboxCheckbox[value="${this.currentVariant.title}"]`).dataset.inches)}updatePriceBlock(){if(this.regularPrice&&(this.regularPriceTag=this.currentVariant.price,this.regularPrice.innerHTML=Shopify.formatMoney(this.regularPriceTag,window.theme.moneyFormat)),this.compareAtPrice)this.compareAtPriceTag=this.currentVariant.compare_at_price,this.compareAtPriceTag>this.currentVariant.price?this.compareAtPrice.innerHTML=Shopify.formatMoney(this.compareAtPriceTag,window.theme.moneyFormat):this.compareAtPrice.textContent="";else if(this.currentVariant.compare_at_price&&!this.compareAtPrice){this.compareAtPriceTag=this.currentVariant.compare_at_price;const compareAtPriceDiv=document.createElement("span");compareAtPriceDiv.className="u-p2 pdp-compare-at-price",compareAtPriceDiv.textContent=`${Shopify.formatMoney(this.compareAtPriceTag,window.theme.moneyFormat)}`,this.pricesWrapper&&(this.pricesWrapper.appendChild(compareAtPriceDiv),this.compareAtPrice=compareAtPriceDiv)}else this.compareAtPrice&&(this.compareAtPrice.textContent="")}updateFrameProducts(){this.checkedVariant=Array.from(this.querySelectorAll("input:checked")).some(input=>input.hasAttribute("data-frame-disabled")),this.element.dispatchEvent(new CustomEvent("variants:update",{bubbles:!0,detail:{eventName:"variant",currentOptions:this.currentVariant.options,disableFrames:this.checkedVariant}}))}updateOptions(){this.options=Array.from(this.querySelectorAll("select, input:checked"),select=>select.value)}updateVariantStatuses(){const selectedOptionOneVariants=this.variantData.filter(variant=>this.querySelector("input:checked").value===variant.option1),inputWrappers=[...this.querySelectorAll(".VariantSelect")];inputWrappers.forEach((option,index)=>{if(index===0)return;const optionInputs=[...option.querySelectorAll("input")],previousOptionSelected=inputWrappers[index-1].querySelector(":checked").value,availableOptionInputsValue=selectedOptionOneVariants.filter(variant=>variant.available&&variant[`option${index}`]===previousOptionSelected).map(variantOption=>variantOption[`option${index+1}`]);this.setInputAvailability(optionInputs,availableOptionInputsValue)})}setInputAvailability(listOfOptions,listOfAvailableOptions){listOfOptions.forEach(input=>{listOfAvailableOptions.includes(input.getAttribute("value"))?(input.closest(".Selectbox").removeAttribute("variant-notify-me"),input.removeAttribute("disabled-variant")):(input.setAttribute("disabled-variant","true"),input.closest(".Selectbox").setAttribute("variant-notify-me",""))})}updateMasterId(){this.currentVariant=this.getVariantData().find(variant=>(this.options,!variant.options.map((option,index)=>this.options[index]==option).includes(!1)))}updateMedia(){if(!this.currentVariant||!this.currentVariant.featured_media)return;const newMedia=this.currentVariant.featured_media.id;newMedia&&this.element.dispatchEvent(new CustomEvent("variant:changed",{bubbles:!0,detail:{new_image:newMedia}}))}updateURL(){if(!this.currentVariant)return;const url=new URL(window.location.href),searchParams=new URLSearchParams(url.search),newParams=new URLSearchParams;for(const[key,value]of searchParams.entries())key.startsWith("utm_")&&newParams.append(key,value);newParams.set("variant",this.currentVariant.id);const newUrl=`${window.location.pathname}?${newParams.toString()}`;window.history.replaceState({},"",newUrl)}updateVariantInput(){if(!this.currentVariant)return;document.querySelectorAll(`#product-form-${this.productID}, #product-form-installment`).forEach(productForm=>{const input=productForm.querySelector('input[name="id"]');input.value=this.currentVariant.id,input.dataset.id=this.currentVariant.id,input.dispatchEvent(new Event("change",{bubbles:!0}))})}updatePickupAvailability(){const pickUpAvailability=document.querySelector("pickup-availability");pickUpAvailability&&(this.currentVariant&&this.currentVariant.available?pickUpAvailability.fetchAvailability(this.currentVariant.id):(pickUpAvailability.removeAttribute("available"),pickUpAvailability.innerHTML=""))}renderProductInfo(){const url=`${this.dataset.url}?variant=${this.currentVariant.id}&section_id=${this.dataset.section}`,id=".pdp-prices";fetch(url).then(response=>response.text()).then(responseText=>{const html=new DOMParser().parseFromString(responseText,"text/html"),destinations=document.querySelectorAll(id),source=html.querySelector(id);source&&destinations.length>0&&destinations.forEach(destination=>{destination.innerHTML=source.innerHTML}),this.toggleAddButton()}),this.updatePriceBlock()}toggleAddButton(e){let quantity="";const addButton=document.querySelectorAll(".MainProduct--ATC"),addButtonInner=document.querySelectorAll(".MainProduct--ATC .ButtonText"),quantityEl=document.querySelector(".QuantitySelector__ProductQuantity"),priceEl=this.currentVariant.price;if(priceEl&&addButton.forEach(btn=>{btn.setAttribute("data-price",priceEl)}),quantityEl&&(quantity=quantityEl.value),!!addButton)if(quantity||(quantity=1),e&&(this.notifyMeButtons=e.detail),this.currentVariant.available==!1)this.notifyMeButtons?(this.notifyMeButtons.forEach(btn=>{btn.style.display="flex",btn.removeAttribute("disabled")}),addButton.forEach(btn=>btn.style.display="none")):(document.querySelectorAll(".Button--NotifyMe").forEach(btn=>btn.style.display="none"),addButton.forEach(btn=>btn.style.display="flex")),addButton.forEach(btn=>{btn.setAttribute("disabled","disabled"),btn.classList.add("ProductCard--Sold__Out")}),addButtonInner.forEach(btn=>{btn.innerHTML=window.variantStrings.soldOut});else{this.notifyMeButtons&&this.notifyMeButtons.forEach(btn=>btn.style.display="none"),addButton.forEach(btn=>{btn.removeAttribute("disabled"),btn.classList.remove("ProductCard--Sold__Out"),btn.style.display="flex"});let newAtcPrice=this.currentVariant.price*quantity;if(this.element.dataset.discount){const discount=this.element.dataset.discount/100;newAtcPrice=newAtcPrice-newAtcPrice*discount*quantity}if(addButtonInner.forEach(btn=>{if(window.variantInfo.show_price){var priceElement2="<span class='u-pb1 mainProductPrice'>"+Shopify.formatMoney(newAtcPrice,window.theme.moneyFormat);+"</span>",btn.innerHTML=window.variantStrings.addToCart+priceElement2}else btn.innerHTML=window.variantStrings.addToCart}),window.variantInfo?.show_price){let newAtcPrice2=this.currentVariant.price*quantity;if(this.element.dataset.discount){const discount=this.element.dataset.discount/100;newAtcPrice2=newAtcPrice2-newAtcPrice2*discount*quantity}var priceElement="<span class='u-pb1 mainProductPrice'> "+Shopify.formatMoney(newAtcPrice2,window.theme.moneyFormat)+"</span>"}else var priceElement="";addButtonInner.forEach(btn=>{btn.innerHTML=window.variantStrings.addToCart+priceElement})}}getVariantData(){return this.variantData=this.variantData||JSON.parse(this.querySelector('[type="application/json"]').textContent),this.variantData}}customElements.define("variant-selects",VariantSelects);class SearchBar extends HTMLElement{constructor(){super(),this.element=this,this.searchElement=this,this.delegateElement=new Delegate(this.element),this.delegateBody=new Delegate(document.body),this.searchInputElement=this.element.querySelector('[name="q"]'),this.searchResultsElement=this.element.querySelector(".searchWrapper"),this.pageOverlayElement=this.element.querySelector(".sectionOverlay"),this.options=JSON.parse(this.element.getAttribute("data-settings")),this.initialSearchLayout=this.searchResultsElement.cloneNode(!0),this.clearSearchButton=this.element.querySelector(".searchInput--clear"),this.info=this.element.querySelector(".search-enter-info"),this.transitionEndHandlerListener=this.transitionEndHandler.bind(this),this.element.addEventListener("transitionend",this.transitionEndHandlerListener),window.theme.showRecentSearches&&this.getRecentSearches(),this.handleFromLocalStorage(),window.theme.showSuggestedSearches&&this.getSuggestedSearches(),document.documentElement.style.setProperty("--search-header-height",`${this.searchInputElement.offsetHeight+48}px`),this.bindEvents()}bindEvents(){this._onInputListener=this.debounce(this.onInput.bind(this),450),this.delegateBody.on("click",'[data-action="open-search"]',this.openSearch.bind(this)),this.delegateElement.on("click",'[data-action="clear-input"]',this.resetSearch.bind(this)),this.delegateElement.on("click",'[data-action="close-search"]',this.closeSearch.bind(this)),this.searchInputElement.addEventListener("input",this._onInputListener),this.delegateElement.on("click",'[data-action="search-string"]',this.onInput.bind(this)),this.delegateElement.on("keypress",'[data-action="search-string"]',this.onInput.bind(this)),this.delegateElement.on("keypress",'[data-action="prevent-enter"]',this.preventEnter.bind(this)),this.delegateBody.on("menu:open",this.closeSearch.bind(this)),this.delegateBody.on("close:search",this.closeSearch.bind(this))}preventEnter(){event.keyCode==13&&event.preventDefault()}handleFromLocalStorage(){this.searchInitial=this.element.querySelector(".searchInitial--Products");const suggested=this.element.querySelector(".searchBar--suggesterPopularWrapper");if(this.searchInitial){this.viewedProductsTitle=this.searchInitial.querySelector(".predictiveSearch--title"),this.initialProductsViewed=this.searchInitial.querySelector(".searchInitialView--products");let viewedProducts=JSON.parse(localStorage.getItem("viewedProducts")||"[]");viewedProducts.length>0&&this.viewedProductsTitle&&(suggested.style.display="none",this.viewedProductsTitle.innerText=`${window.searchStrings.viewedProducts}`,this.fetchViewedProducts(viewedProducts),this.initialProductsViewed.style.opacity="0"),(viewedProducts.length==0||!viewedProducts)&&(suggested.style.display="block",suggested.dataset.visible="true")}}async fetchViewedProducts(viewedProducts){this.allPredictiveSearchInstances=[],this.searchResultsElement=this.element.querySelector(".searchWrapper");try{const query=viewedProducts.map(id=>`id:${id}`).join(" OR "),response=await fetch(`${window.routes.localeRootUrl}/search?view=recently&type=product&q=${encodeURIComponent(query)}`);if(!response.ok)throw new Error(`Error fetching products: ${response.status}`);const data=await response.text(),doc=new DOMParser().parseFromString(data,"text/html"),fetchedProducts=Array.from(doc.querySelectorAll(".search-product-item")),reorderedProducts=viewedProducts.map(id=>fetchedProducts.find(product=>parseInt(product.dataset.productId)===id)).filter(product=>product),initialViewElement=this.searchResultsElement.querySelector(".searchInitialView--products");initialViewElement&&(initialViewElement.innerHTML="",reorderedProducts.forEach(product=>{initialViewElement.appendChild(product)})),this.initialProductsViewed.style.opacity="1"}catch(error){console.error("Failed to fetch viewed products:",error)}}debounce(fn,delay){var _this0=this,timer=null;return function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];clearTimeout(timer),timer=setTimeout(function(){fn.apply(_this0,args)},delay)}}openSearch(event2){if(this.isOpen){this.closeSearch();return}event2.preventDefault(),this.element.removeEventListener("transitionend",this.transitionEndHandlerListener),this.element.style.display="block",document.documentElement.style.setProperty("--search-header-height",`${this.searchInputElement.offsetHeight+48}px`),document.documentElement.style.setProperty("--viewport-height",`${window.innerHeight}px`);const _this=this;if(this.element.dispatchEvent(new CustomEvent("menu:close",{bubbles:!0})),this.element.dispatchEvent(new CustomEvent("drawer:close-other",{bubbles:!0})),!this.element){console.error("Search element not found");return}document.querySelector("#quickSearch")&&(new Responsive().matchesBreakpoint("phone")?setTimeout(()=>{this.element.setAttribute("aria-hidden","false")},10):this.element.setAttribute("aria-hidden","false")),this.pageOverlayElement.classList.add("is-visible"),bodyScrollLock.disableBodyScroll(this.element.querySelector("[data-scrollable]"),bodyScrollLockOptions),setTimeout(()=>{_this.searchInputElement&&_this.searchInputElement.focus()},200),requestAnimationFrame(()=>{document.body.dispatchEvent(new CustomEvent("favorites:retoggle",{}))}),this.isOpen=!0,this.pageOverlayElement&&(this.closeListener=this.closeSearch.bind(this),this.pageOverlayElement.addEventListener("click",this.closeListener))}closeSearch(){event.preventDefault(),this.eventType=event.type,this.isOpen&&(bodyScrollLock.enableBodyScroll(this.element.querySelector("[data-scrollable]"),bodyScrollLockOptions),this.element.setAttribute("aria-hidden",!0),this.element.addEventListener("transitionend",this.transitionEndHandlerListener),this.pageOverlayElement.classList.remove("is-visible"),this.isOpen=!1)}transitionEndHandler(){const selectBoxOpen=document.body.querySelector('#header .RevolutionSelectbox--Button[aria-expanded="true"]');this.headerTransparent&&this.eventType!="menu:open"&&!selectBoxOpen&&document.body.querySelector("#header").toggleColor(),this.eventType=null,this.element.style.display="none",this.element.removeEventListener("transitionend",this.transitionEndHandlerListener)}async onInput(event2){if(this.allPredictiveSearchInstances=[],this.lastInputValue=event2.target.value,this.searchResultsElement=this.element.querySelector(".searchWrapper"),this.searchResultsElement.style.opacity=0,this.clearSearchButton.setAttribute("aria-hidden","false"),event2.target.getAttribute("data-value")&&this.lastInputValue===0){this.lastInputValue=event2.target.getAttribute("data-value");const el=this.element.querySelector(".searchInput");el.setAttribute("value",this.lastInputValue),el.value=this.lastInputValue,this.searchInputElement.removeAttribute("data-action")}else if(this.searchInputElement.removeAttribute("data-action"),this.lastInputValue===""){this.initialSearchLayout.style.opacity=0,this.resetSearch();return}try{const response=await fetch(`${routes.predictive_search_url}?q=${encodeURIComponent(this.lastInputValue)}&resources[limit_scope]=each&resources[options][fields]=title,product_type,variants.title,tag,body,author,vendor,variants.sku&section_id=search-predictive`);if(!response.ok){var error=new Error(response.status);throw error}const text=await response.text(),resultsMarkup=new DOMParser().parseFromString(text,"text/html").querySelector("#shopify-section-search-predictive").innerHTML;this.allPredictiveSearchInstances.forEach(predictiveSearchInstance=>{predictiveSearchInstance.cachedResults[queryKey]=resultsMarkup});const div=document.createElement("div");div.innerHTML=resultsMarkup;const suggestedQueries=div.querySelector("template"),currentSuggestedQueries=this.element.querySelector(".predictiveSearch--queries"),currentRecentQueris=this.element.querySelector("#predictiveSearch--recentSearches");if(this.searchResultsElement.innerHTML=resultsMarkup,requestAnimationFrame(()=>{document.body.dispatchEvent(new CustomEvent("favorites:retoggle",{}))}),new Responsive().matchesBreakpoint("tablet-and-up")&&(this.element.querySelector(".searchInnerWrapper").style.height="auto"),suggestedQueries){currentRecentQueris&&currentRecentQueris.remove(),currentSuggestedQueries&&currentSuggestedQueries.remove();const node=suggestedQueries.content.firstElementChild.cloneNode(!0);this.searchResultsElement.prepend(node)}this.searchResultsElement.querySelector(".predictiveSearch").dataset.sumCounter==0?(this.info.style.display="none",this.searchInputElement.dataset.action="prevent-enter"):this.info.style.display="flex",this.searchResultsElement.style.opacity=1,window.theme.showRecentSearches&&this.recentSearches()}catch(error2){if(error2?.code===20)return;throw error2}}resetSearch(){this.searchResultsElement.innerHTML=this.initialSearchLayout.innerHTML;const currentSuggestedQueries=this.element.querySelector(".predictiveSearch--queries");currentSuggestedQueries&&currentSuggestedQueries.remove(),this.searchInputElement.value="",this.searchInputElement.removeAttribute("value"),window.theme.showRecentSearches&&this.getRecentSearches(),window.theme.showSuggestedSearches&&this.getSuggestedSearches(),this.info.style.display="none",this.searchInputElement.dataset.action="prevent-enter",this.searchResultsElement.style.opacity=1,this.clearSearchButton.setAttribute("aria-hidden","true"),this.handleFromLocalStorage(),this.searchInputElement.focus()}recentSearches(){if(this.lastInputValue.length>3){var searchTerm=JSON.parse(localStorage.getItem("searchTerms")||"[]");searchTerm.includes(this.lastInputValue)||searchTerm.unshift(this.lastInputValue);try{localStorage.setItem("searchTerms",JSON.stringify(searchTerm.slice(0,5)))}catch{}}}getRecentSearches(){let appendString="";const items=JSON.parse(localStorage.getItem("searchTerms")||"[]");let elementToAdd=this.element.querySelector(".search--recentResults");items.length>0?(items.forEach(id=>{appendString=appendString+"<li role='option' tabIndex='0' class='hover-diff-color recent-search u-p2' data-action='search-string' data-value='"+id+"'>"+id+"</li>"}),elementToAdd.innerHTML=appendString):this.querySelector("#predictiveSearch--recentSearches").style.display="none"}getSuggestedSearches(){let appendString="";const arr=this.options.items;if(arr.length!=0){arr.sort(function(){return .5-Math.random()});var filtred=arr.filter(function(a){if(!a.includes("_"))return a}),i;for(appendString="",i=0;i<3;i++)if(filtred[i]){var filteredResult=filtred[i].replace(":"," ");filteredResult=filteredResult.replace("-"," "),appendString=appendString+"<li tabindex='0' class='u-p2 hover-diff-color recent-search' data-action='search-string' data-value='"+filteredResult+"'>"+filteredResult+"</li>"}var appElement=this.searchElement.querySelector(".Search--Suggested__results");appElement.innerHTML=appendString}}}customElements.define("search-bar",SearchBar);class ContactSection extends HTMLElement{constructor(){super(),this.element=this,this.delegateElement=new Delegate(this.element),this.bindEvents(),this.toggleButton()}bindEvents(){this.delegateElement.on("change","[data-state='required']",this.toggleButton.bind(this))}toggleButton(){this.buttonState=!0;var allBoxes=this.element.querySelectorAll("[data-state='required']");allBoxes.forEach((item,i)=>{item.checked==!1&&(this.buttonState=!1)}),this.buttonState==!0?this.element.querySelector(".section-contact__button")&&this.element.querySelector(".section-contact__button").removeAttribute("disabled"):this.element.querySelector(".section-contact__button")&&this.element.querySelector(".section-contact__button").setAttribute("disabled",!0)}}customElements.define("contact-section",ContactSection);class NewsletterPopup extends HTMLElement{constructor(){super(),this.element=this,this.delegateElement=new Delegate(this.element),this.pageOverlayElement=document.querySelector(".pageOverlay"),this.options=JSON.parse(this.element.getAttribute("data-section-settings")),window.location.href.indexOf("customer_posted=true#popupForm")>-1&&(this.options.delay=0,this.openNewsletter()),this.options.edit_mode?(this.options.delay=0,this.openNewsletter()):this.handleOpenOptions()}handleOpenOptions(){console.log("handle open options"),localStorage.getItem("popup-seen")!=="true"&&(this.options.scroll_amount>0?this.myScrollListener=scrollListener.addScrollListener(this,this.scrollListener):this.openNewsletter())}scrollListener=()=>{const body=document.body,html=document.documentElement,docHeight=Math.max(body.scrollHeight,body.offsetHeight,html.clientHeight,html.scrollHeight,html.offsetHeight);window.scrollY/docHeight*100>=this.options.scroll_amount&&this.openNewsletter()};openNewsletter(){this.myScrollListener&&this.myScrollListener.removeScrollListener(),setTimeout(()=>{this.element.setAttribute("aria-hidden",!1),this.pageOverlayElement.classList.add("is-visible"),bodyScrollLock.disableBodyScroll(this.element,bodyScrollLockOptions),this.pageOverlayElement.addEventListener("click",this.closeNewsletter),localStorage.setItem("popup-seen",!0),this.delegateElement.on("click",'[data-action="close-modal"]',this.closeNewsletter)},1e3*this.options.delay)}closeNewsletter=e=>{e.preventDefault(),this.element.setAttribute("aria-hidden",!0),this.pageOverlayElement.classList.remove("is-visible"),bodyScrollLock.clearAllBodyScrollLocks(),this.pageOverlayElement.removeEventListener("click",this.closeNewsletter),this.myScrollListener&&this.myScrollListener.removeScrollListener()}}customElements.define("newsletter-popup",NewsletterPopup);class AccountHandler extends HTMLElement{constructor(){super(),this.element=this,this.delegateElement=new Delegate(this.element),this.drawer=new Drawer(this.element.querySelector("#accountDrawer")),this.bindEvents()}bindEvents(){this.delegateElement.on("click",'[data-action="toggle-tab"]',this.toggleTab.bind(this)),this.delegateElement.on("click",'[data-action="submit-login"]',this.submitLogin.bind(this)),this.delegateElement.on("click",'[data-action="submit-register"]',this.submitRegistration.bind(this)),this.delegateElement.on("click",'[data-action="toggle-recovery"]',this.toggleRecovery.bind(this)),this.delegateElement.on("click",'[data-action="submit-recovery"]',this.accountRecover.bind(this))}toggleRecovery(){event.preventDefault(),event.target.dataset.id=="recoverFlex"?(this.element.querySelector("#recoverFlex").setAttribute("aria-visible","true"),this.element.querySelector("#loginFlex").setAttribute("aria-visible","false")):(this.element.querySelector("#recoverFlex").setAttribute("aria-visible","false"),this.element.querySelector("#loginFlex").setAttribute("aria-visible","true"))}accountRecover(event2){event2.preventDefault();const _this=this,registrationEndpoint="/account/recover",requestBody={email:this.element.querySelector("#RecoverEmail").value};event2.target.querySelector(".ButtonText").style.visibility="hidden",event2.target.querySelector(".itemLoader").classList.add("is-visible"),async function(){try{const responseText=await(await fetch(registrationEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(requestBody)})).text(),tempDiv=document.createElement("div");tempDiv.innerHTML=responseText,responseText.indexOf("RecoverEmail-email-error")!==-1?_this.element.querySelector("#recoverFlex .accountDrawer--ErrorSpace").innerHTML=tempDiv.querySelector("#RecoverEmail-email-error").innerHTML:responseText.indexOf("recoverSuccess")!==-1&&(_this.element.querySelector("#recoverFlex .accountDrawer--SuccessSpace").innerHTML=tempDiv.querySelector("#recoverSuccess").innerHTML),event2.target.querySelector(".button--text").style.visibility="visible",event2.target.querySelector(".itemLoader").classList.remove("is-visible")}catch(error){console.log("An error occurred during the registration request:",error)}}()}submitRegistration(event2){event2.preventDefault();const _this=this,registrationEndpoint="/account",requestBody={customer:{first_name:this.element.querySelector("#register #RegisterForm-FirstName").value,last_name:this.element.querySelector("#register #RegisterForm-LastName").value,email:this.element.querySelector("#register #RegisterForm-email").value,password:this.element.querySelector("#register #RegisterForm-password").value}};event2.target.querySelector(".ButtonText").style.visibility="hidden",event2.target.querySelector(".itemLoader").classList.add("is-visible"),async function(){try{const responseText=await(await fetch(registrationEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(requestBody)})).text();if(responseText.indexOf("registerErrors")!==-1){console.log("Error occurred during registration");const tempDiv=document.createElement("div");tempDiv.innerHTML=responseText,_this.element.querySelector("#register .accountDrawer--ErrorSpace").innerHTML=tempDiv.querySelector(".registerErrors").innerHTML}else location.href=window.routes.account_url;event2.target.querySelector(".ButtonText").style.visibility="visible",event2.target.querySelector(".itemLoader").classList.remove("is-visible")}catch(error){console.log("An error occurred during the registration request:",error)}}()}submitLogin(event2){event2.preventDefault();const _this=this,loginEndpoint="/account/login",requestBody={customer:{email:this.element.querySelector("#customer_login #CustomerEmail").value,password:this.element.querySelector("#customer_login #CustomerPassword").value}};event2.target.querySelector(".ButtonText").style.visibility="hidden",event2.target.querySelector(".itemLoader").classList.add("is-visible"),async function(){try{const responseText=await(await fetch(loginEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(requestBody)})).text();if(responseText.indexOf("loginError")!==-1){console.log("Incorrect email or password");const tempDiv=document.createElement("div");tempDiv.innerHTML=responseText,_this.element.querySelector("#login .accountDrawer--ErrorSpace").innerHTML=tempDiv.querySelector(".AlertError").innerHTML,event2.target.querySelector(".ButtonText").style.visibility="visible",event2.target.querySelector(".itemLoader").classList.remove("is-visible")}else location.href=window.routes.account_url}catch(error){console.log("An error occurred during the login request:",error)}}()}toggleTab(event2){const id=event2.target.dataset.id,allTabs=this.element.querySelectorAll('.accountDrawer--Tab[aria-expanded="true"]'),allContent=this.element.querySelectorAll(".accountContent");allTabs.forEach(tab=>{tab.setAttribute("aria-expanded","false")}),event2.target.setAttribute("aria-expanded","true"),allContent.forEach(content2=>{content2.setAttribute("aria-visible","false")});const content=this.element.querySelector(`#${id}`);content&&content.setAttribute("aria-visible","true")}}customElements.define("account-handler",AccountHandler);class LocalizationSelectors extends HTMLElement{constructor(){super(),this.element=this,new Popup(this.element,!0)}}customElements.define("localization-selectors",LocalizationSelectors);class AnimatedAnnouncementBar extends HTMLElement{constructor(){super(),this.element=this,this.delegateElement=new Delegate(this.element),this.options=JSON.parse(this.element.getAttribute("data-section-settings")),this.closeButton=this.element.querySelector(".announcement-bar__close"),document.documentElement.style.setProperty("---announcement-dynamic-height",this.element.clientHeight+"px"),sessionStorage.getItem("annBarHidden",!0)?this.element.classList.add("hidden"):this.hideListener=this.hide.bind(this),this.updateVisibleHeight(),this.bindEvents(),this.announcementItems=this.element.querySelectorAll(".annocement-bar__block"),this.announcementItems.length>1&&this.options.enableAnimation?this.initialize():this.announcementItems[0]?.classList.add("base")}initialize(){this.currentIndex=0,this.announcementItems[this.currentIndex].classList.add("active"),setInterval(this.showNextElement.bind(this),this.options.cycleSpeed)}bindEvents(){scrollListener.addScrollListener(this,this.updateVisibleHeight.bind(this)),responsive.addResizeListener(this,this.updateVisibleHeight.bind(this)),this.hideListener&&this.delegateElement.on("click",'[data-action="ann-bar-close"]',this.hideListener)}hide(){this.element.classList.add("hidden"),sessionStorage.setItem("annBarHidden",!0),document.documentElement.style.setProperty("--announcement-dynamic-height","0px")}showNextElement(){this.announcementItems[this.currentIndex].classList.remove("active"),this.currentIndex=(this.currentIndex+1)%this.announcementItems.length,setTimeout(()=>{this.announcementItems[this.currentIndex].classList.add("active")},this.options.transitionSpeed)}updateVisibleHeight(){const rect=this.element.getBoundingClientRect(),windowHeight=window.innerHeight;let visibleHeight=Math.min(rect.bottom,windowHeight)-Math.max(rect.top,0);visibleHeight=Math.max(visibleHeight,0),document.documentElement.style.setProperty("--announcement-dynamic-height",`${visibleHeight}px`)}}customElements.define("announcement-bar",AnimatedAnnouncementBar);class SizeGuideTables extends HTMLElement{constructor(){super(),this.element=this,this.delegateElement=new Delegate(this.element),this.delegateBody=new Delegate(document.body),this.tableContent=this.element.querySelector(".table-content"),this.scrollbar=this.element.querySelector(".custom-scrollbar"),this.scrollbarThumb=this.element.querySelector(".custom-scrollbar-thumb"),this.init(),this.bindEvents()}init(){this.updateScrollbarThumb(),window.addEventListener("resize",()=>this.updateScrollbarThumb())}bindEvents(){let isDragging=!1,startX,startScrollLeft;const slider=this.element.querySelector(".table-content"),startDragging=e=>{isDragging=!0,startX=e.type==="touchstart"?e.touches[0].pageX:e.pageX,startScrollLeft=slider.scrollLeft},stopDragging=()=>{isDragging=!1},move=e=>{if(e.preventDefault(),!isDragging)return;const scroll=(e.type==="touchmove"?e.touches[0].pageX:e.pageX)-startX;slider.scrollLeft=startScrollLeft-scroll,this.syncScroll()};slider.addEventListener("mousedown",startDragging,!1),slider.addEventListener("touchstart",startDragging,!1),slider.addEventListener("mouseup",stopDragging,!1),slider.addEventListener("touchend",stopDragging,!1),slider.addEventListener("mousemove",move,!1),slider.addEventListener("touchmove",move,!1),this.tableContent.addEventListener("scroll",()=>this.syncScroll(),!1)}updateScrollbarThumb(){const contentWidth=this.tableContent.scrollWidth,scrollRatio=this.tableContent.clientWidth/contentWidth;this.scrollbarThumb.style.width=`${scrollRatio*100}%`}syncScroll(){const contentWidth=this.tableContent.scrollWidth,scrollRatio=this.tableContent.clientWidth/contentWidth,scrollLeft=this.tableContent.scrollLeft;this.scrollbarThumb.style.transform=`translateX(${scrollLeft*scrollRatio}px)`}}customElements.define("table-content",SizeGuideTables);class InfiniteScroll{constructor(container,restoreState){if(this.containerSelector=container,this.treshold=650,this.handleScrollListener=this.handleScroll.bind(this),this.domDelegate=new Delegate(document.body),restoreState==!0&&sessionStorage.getItem("pageNum")){const promises=this.generateFetchPromises(!1);this.renderData(promises,!0)}else this.bindEvents()}bindEvents(){this.listenerBinder=this.addUserScrollListener.bind(this),this.domDelegate.on("click",'[data-action="load"]',this.listenerBinder)}initialize(){document.addEventListener("scroll",this.handleScrollListener)}addUserScrollListener(e){e.preventDefault(),this.handleClick(),this.initialize(),this.domDelegate.off("click",this.listenerBinder)}handleScroll(){if(this.paginationElement=document.querySelector("#infiniteScroll"),!this.paginationElement)return;const top=this.paginationElement.getBoundingClientRect().top-this.treshold,bottom=this.paginationElement.getBoundingClientRect().bottom+this.treshold;if(top<=window.innerHeight&&bottom>=0&&(this.nextPageLinkElement=this.paginationElement.querySelector("a"),this.nextPageLinkElement)){this.destroy();const nextPageUrl=this.nextPageLinkElement.href,promises=this.generateFetchPromises(nextPageUrl);this.renderData(promises)}}handleClick(){if(event.preventDefault(),event.target.closest("a").setAttribute("disabled","true"),window.location.href.includes("/collections/")&&sessionStorage.setItem("loadMoreClicked","true"),this.paginationElement=document.querySelector("#infiniteScroll"),!!this.paginationElement&&(this.nextPageLinkElement=this.paginationElement.querySelector("a"),this.nextPageLinkElement)){this.destroy();const nextPageUrl=this.nextPageLinkElement.href,promises=this.generateFetchPromises(nextPageUrl);this.renderData(promises)}}destroy(){document.removeEventListener("scroll",this.handleScrollListener)}generateFetchPromises(nextPageUrl){const promises=[];if(nextPageUrl==!1){const hasSearchParameters=window.location.search.length>0,limit=parseInt(sessionStorage.getItem("pageNum"));for(let i=2;i<=limit;i++){let url;hasSearchParameters?url=`${window.location.href}&page=${i}`:url=`${window.location.href}?page=${i}`,promises.push(fetch(url,{credentials:"same-origin",method:"GET"}))}}else{const url=`${nextPageUrl}`;promises.push(fetch(url,{credentials:"same-origin",method:"GET"}))}return promises}async renderData(promises,restoreContent){try{const responses=await Promise.all(promises),contents=await Promise.all(responses.map(response=>response.text()));let isLastPromise=!1;contents.forEach((content,index)=>{isLastPromise=index===contents.length-1,this.appendContent(content,isLastPromise,restoreContent)})}catch(error){console.error("Error fetching or parsing data:",error)}}appendContent(content,lastPromise,restoreContent){const contentToAdd=new DOMParser().parseFromString(content,"text/html").querySelector(this.containerSelector);this.mainContainer=document.querySelector(this.containerSelector),this.paginationElement=document.querySelector("#infiniteScroll"),this.paginationElement&&this.paginationElement.remove(),this.mainContainer.insertAdjacentHTML("beforeend",contentToAdd.innerHTML),window.theme.enableAnimations&&new RevolutionAnimation(this.mainContainer),this.paginationElement=document.querySelector("#infiniteScroll"),lastPromise&&this.initialize(),lastPromise&&restoreContent&&this.restoreScroll(),document.dispatchEvent(new CustomEvent("pagination:finished",{bubbles:!0})),requestAnimationFrame(()=>{document.body.dispatchEvent(new CustomEvent("favorites:retoggle",{}))})}restoreScroll(){const selector=`${this.containerSelector} [data-id='${sessionStorage.getItem("clickedProductId")}']`,targetElement=document.querySelector(selector);targetElement&&targetElement.scrollIntoView({behavior:"smooth",block:"end"})}}class MainBlog extends HTMLElement{constructor(){super(),this.element=this,this.carouselElement=this.element.querySelector(".swiper"),new RevolutionSwiper(this.carouselElement),new InfiniteScroll("#main-blog_article-grid",!0)}}customElements.define("blog-section",MainBlog);class BlogShowcase extends HTMLElement{constructor(){super(),this.element=this,this.bodyDelegate=new Delegate(document.body),this.carouselElement=this.element.querySelector(".swiper"),this.bindEvents()}bindEvents(){this.element.dataset.slider==="true"&&this.matchesBreakpoint()}matchesBreakpoint(){responsive.matchesBreakpoint("lap_and_up")?this.carousel&&this.carousel.destroy():this.carousel=new RevolutionSwiper(this.carouselElement)}}customElements.define("blog-showcase",BlogShowcase),sessionStorage.setItem("firstLoadRecomm",!0);class ProductRecommendations extends HTMLElement{constructor(){super(),this.element=this,this.delegateElement=new Delegate(this),sessionStorage.getItem("firstLoadRecomm")==="true"&&(sessionStorage.setItem("firstLoadRecomm",!1),fetch(this.dataset.url).then(response=>response.text()).then(text=>{const html=document.createElement("div");html.innerHTML=text;const recommendations=html.querySelector("product-recommendations");if(recommendations&&recommendations.innerHTML.trim().length){const carouselElementNew=recommendations.querySelector(".product-recommendations__grid"),carouselElementOld=this.querySelector(".product-recommendations__grid");carouselElementOld.parentNode.replaceChild(carouselElementNew,carouselElementOld),carouselElementNew.classList.add("recomm-loaded"),requestAnimationFrame(()=>{document.body.dispatchEvent(new CustomEvent("favorites:retoggle",{}))}),this.element.style.display="block",window.theme.enableAnimations&&new RevolutionAnimation(carouselElementNew)}}).catch(e=>{console.error(e)}))}}customElements.define("product-recommendations",ProductRecommendations);class Inspiration extends HTMLElement{constructor(){super(),this.element=this,this.delegateElement=new Delegate(this.element),this.carouselElement=this.element.querySelector(".swiper"),this.carousel=new RevolutionSwiper(this.carouselElement),this.bindEvents()}bindEvents(){this.delegateElement.on("click",'[data-action="select-product"]',this.selectProduct.bind(this)),this.carouselElement.swiper.on("slideChange",this.selectCircle.bind(this))}selectCircle(){this.element.querySelector(".inspiration__product-circle.selected")?.classList.remove("selected"),this.element.querySelector(`.inspiration__product-circle[data-id="${this.carouselElement.swiper.activeIndex}"]`)?.classList.add("selected")}selectProduct(e){const targetId=e.target.closest("[data-action]").dataset.id;this.carousel.selectCell(targetId)}}customElements.define("section-inspiration",Inspiration);class SecondaryCartDrawer extends HTMLElement{constructor(){super(),this.element=this,this.delegateElement=new Delegate(this.element),this.delegateBody=new Delegate(document.body),this.pageOverlayElement=document.querySelector(".pageOverlay"),this.pageOverlayClear=document.querySelector(".clearOverlay"),this.init(),this.bindEvents()}init(){const currentPath=window.location.pathname;this.cartPage=!!currentPath.includes("/cart"),setTimeout(()=>{this.secondaryDrawer=document.body.querySelector(".second-level-cart__drawer"),this.containerProductList=this.secondaryDrawer.querySelector(".second-level-product-list"),this.containerProductMatchingList=this.secondaryDrawer.querySelector(".second-level-already-in-cart"),this.matchingTitle=this.secondaryDrawer.querySelector(".second-level__data-title.matching-title");try{this.productsList=this.secondaryDrawer.querySelector("#frames-collection-json");const jsonString=this.productsList.textContent||this.productsList.innerText,framesCollection=JSON.parse(jsonString);this.productsListArray=framesCollection}catch(e){console.error("Failed to parse data-products JSON",e),this.productsList=[]}this.scrollableContent=this.secondaryDrawer.querySelector(".second-level__wrapper"),this.scrollableContent.style.height=window.innerHeight-64+"px",this.options=JSON.parse(this.element.getAttribute("data-button-settings")),this.isOpen=!1},50)}bindEvents(){this.delegateElement.on("click",'[data-action="toggle-subdrawer"]',this.toggleNextElement.bind(this)),this.delegateBody.on("click",'[data-action="toggle-prev-subdrawer"]',this.togglePreviusElement.bind(this)),this.delegateBody.on("click",".pageOverlay.is-visible",this.togglePreviusElement.bind(this)),this.delegateBody.on("click",".clearOverlay.is-visible",this.togglePreviusElement.bind(this)),this._closeListener=this.togglePreviusElement.bind(this),this.delegateBody.on("subdrawer:close",this._closeListener)}showDataForVariant(optionValue,optionName,choosenProduct,choosenProductVariant,itemToRemove,quantity,singleProductQuantity,matchedframes){const filteredProductsWithVariants=this.productsListArray.reduce((acc,product)=>(product.variants.filter(variant=>variant.options.includes(optionValue)).forEach(matchingVariant=>{acc.push({product,variant:matchingVariant})}),acc),[]);filteredProductsWithVariants.length>0&&this.renderVariants(filteredProductsWithVariants,optionName,choosenProduct,choosenProductVariant,itemToRemove,quantity,singleProductQuantity,this.containerProductList,matchedframes)}findInFrameProductList(matchedProducts,products){let matchedProductDetails=[];return matchedProducts.forEach(matchedProduct=>{let foundProduct=products.find(product=>product.product.id==matchedProduct.product_id);if(foundProduct){let productWithItemKey={...foundProduct,item_key:matchedProduct.item_key,single_frame_quantity:matchedProduct.single_frame_quantity};matchedProductDetails.push(productWithItemKey)}}),matchedProductDetails}renderVariants(products,optionName,choosenProduct,choosenProductVariant,itemToRemove,quantityToAdd,singleProductQuantity,divElement,matchedframes){if(divElement.innerHTML="",matchedframes){this.containerProductMatchingList.innerHTML="";let matchedProducts=[];matchedframes.forEach(matched=>{let productId=matched.getAttribute("product-id"),itemKey=matched.getAttribute("item-key"),productQuantity=matched.getAttribute("data-single-frame-quantity");matchedProducts.push({product_id:productId,item_key:itemKey,single_frame_quantity:productQuantity})}),this.findInFrameProductList(matchedProducts,products).forEach(product=>{const productHtmlMatched=this.renderTemplate(product,!0,choosenProduct,quantityToAdd,singleProductQuantity,itemToRemove,choosenProductVariant,optionName);this.containerProductMatchingList.insertAdjacentHTML("beforeend",productHtmlMatched)})}products.forEach(product=>{const productHtml=this.renderTemplate(product,!1,choosenProduct,quantityToAdd,singleProductQuantity,itemToRemove,choosenProductVariant,optionName);this.containerProductList.insertAdjacentHTML("beforeend",productHtml)}),window.theme.enableAnimations&&new RevolutionAnimation}renderTemplate(product,matched,choosenProduct,quantityToAdd,singleProductQuantity,itemToRemove,choosenProductVariant,optionName){const productImage=`${product.variant.featured_image&&product.variant.featured_image.src?`
      <a href="${window.routes.localeRootUrl}/products/${product.product.handle}" class="AspectRatio" style="--aspect-ratio: 0.8">
        <img class="cartItem--Image" src="${product.variant.featured_image.src}" alt="${product.variant.featured_image.alt}">
      </a>
      `:product.product.featured_image?`
      <a href="${window.routes.localeRootUrl}/products/${product.product.handle}" class="AspectRatio" style="--aspect-ratio: 0.8">
        <img class="cartItem--Image" src="${product.product.featured_image}" alt="${product.product.featured_image.alt}">
      </a>
      `:""}`;let variantOrgPrice=product.variant.price?Shopify.formatMoney(product.variant.price,window.theme.moneyFormat):"",variantCompareAtPrice=product.variant.compare_at_price?Shopify.formatMoney(product.variant.compare_at_price,window.theme.moneyFormat):"";if(this.options.frame_discount){const discountAmount=this.options.frame_discount_amount/100;variantOrgPrice=product.variant.price?Shopify.formatMoney(product.variant.price-product.variant.price*discountAmount,window.theme.moneyFormat):"",variantCompareAtPrice=product.variant.price?Shopify.formatMoney(product.variant.price,window.theme.moneyFormat):""}variantCompareAtPrice===variantOrgPrice&&(variantCompareAtPrice=!1);const cartItemPrices=matched?"":`<div class="cartItem__prices">
      <div class="cartItem__price-wrapper">
        ${variantCompareAtPrice?`<span class="u-p2 pdp-compare-at-price mr-s"> ${variantCompareAtPrice} </span>`:""}
        <span class="orginal-price u-p2 ${variantCompareAtPrice?"alert-color":""}"> ${variantOrgPrice}</span>
      </div>
    </div>`,productFormId="product-form"+choosenProduct+product.variant.id,formHtml=matched?`<button data-frame-variant-id='${product.variant.id}' data-single-frame-quantity='${product.single_frame_quantity}' data-decrease-item-with-key = '${product.item_key}' data-quantity='${quantityToAdd}' data-single-product-quantity='${singleProductQuantity}' type="submit" class="AddToCartAjax connect-product-btn" 
    data-action="remove-and-connect" data-remove-product="${itemToRemove}" 
    data-choosen-product=${choosenProductVariant}>
      <span class="txt-btn u-p2">${window.cartStrings.connect_product}</span>
    </button>`:`
    <form  method="post" class="product-form" enctype="multipart/form-data" id=${productFormId}>

      <input type="hidden" name="product_id--${choosenProductVariant}" data-id="${choosenProductVariant}"
       value="${choosenProductVariant}" >

      <input name="frame_id--${product.variant.id}"  
      type="hidden" 
      form="${productFormId}" 
      data-id="${product.variant.id}"
      data-find="">

    <button data-available='${product.variant.available}' data-quantity='${quantityToAdd}' data-single-product-quantity='${singleProductQuantity}' type="submit" class="AddToCartAjax connect-product-btn" 
    data-action="remove-and-add-all-to-cart" data-remove-product="${itemToRemove}" data-choosen-product=${choosenProductVariant}>
      <span class="txt-btn u-p2">${window.cartStrings.connect_product}</span>
    </button>
    </form>
    `;return`
    <div class='cart-item-wrapper  cartItem add-bottom-line animatedContent'>
      <div class="carti-item__single-wrapper">
   
        <div class="cartItem--Image">
       
            ${productImage}
         
        </div>
        <div class="cartItem--Informations">
          <div class="cartItem__details">
            <div class="cartItem--Flex">
              <a href="${window.routes.localeRootUrl}/products/${product.product.handle}" class="cartItem__name break u-p2">${product.product.title}</a>
            </div>
            <div class="product-option--Wrapper">
              <div class="product-option">
                <div class="u-p2 sidecartDrawer--optionNameAndValue">
                  ${optionName}: <span class="u-p2 sidecart-drawer__option-value">${this.optionToShow}</span>
                </div>
              </div>
            </div>
          </div>
          <div class="action-prices-wrapper">
           ${cartItemPrices}
           
              ${formHtml}
           
          </div>
        </div>
      </div>
    </div>`}handleMatchedVariants(optionValue,optionName){const matchedFrames=Array.from(document.body.querySelectorAll(".single-frame")).filter(frame=>{const frameSizeOption=frame.getAttribute("data-size-option"),frameSizeName=frame.getAttribute("data-size-name");return frameSizeOption===optionValue&&frameSizeName===optionName});if(matchedFrames.length>0)return this.matchingTitle.style.display="block",matchedFrames}toggleNextElement(event2,target){if(event2.preventDefault(),this.isOpen)return;this.isOpen=!0,this.cartPage?this.pageOverlayElement.classList.add("is-visible"):this.pageOverlayClear.classList.add("is-visible");let options;try{options=JSON.parse(this.element.getAttribute("data-button-settings"))}catch(err){console.error("Invalid or missing data-button-settings",err),this.isOpen=!1;return}const optionValue=options.size_option_value,optionName=options.size_option_name,choosenProduct=options.product_id,choosenProductVariant=options.item_id,itemToRemove=options.item_key,quantity=options.quantity,singleProductQuantity=options.quantity_of_single_product;this.optionToShow=this.element.querySelector("[variant-option-to-show]")?this.element.querySelector("[variant-option-to-show]").getAttribute("variant-option-to-show"):null;const matchedframes=this.handleMatchedVariants(optionValue,optionName);this.showDataForVariant(optionValue,optionName,choosenProduct,choosenProductVariant,itemToRemove,quantity,singleProductQuantity,matchedframes),this.secondaryDrawer.style.display="block",setTimeout(()=>{this.secondaryDrawer.setAttribute("aria-expanded","true");const focus=this.secondaryDrawer.querySelector("[data-scrollable]");bodyScrollLock.disableBodyScroll(focus,bodyScrollLockOptions)},15)}togglePreviusElement(event2,target){if(event2.preventDefault(),!this.isOpen)return;this.secondaryDrawer.setAttribute("aria-expanded","false");const focus=this.secondaryDrawer.querySelector("[data-scrollable]");bodyScrollLock.enableBodyScroll(focus),this.transitionEndedListener=this.translateTransitionEnded.bind(this),this.secondaryDrawer.addEventListener("transitionend",this.transitionEndedListener),this.cartPage?this.pageOverlayElement.classList.remove("is-visible"):this.pageOverlayClear.classList.remove("is-visible"),this.isOpen=!1}translateTransitionEnded(){event.propertyName=="transform"&&(this.isOpen=!1,this.secondaryDrawer.style.display="none",this.secondaryDrawer.removeEventListener("transitionend",this.transitionEndedListener))}}customElements.define("secondary-cart-drawer",SecondaryCartDrawer);class CartSubdrawer extends HTMLElement{constructor(){super(),this.element=this,new AddToCart(this.element)}}customElements.define("cart-subdrawer",CartSubdrawer);class CartPage extends HTMLElement{constructor(){super(),this.element=this,this.delegateElement=new Delegate(this.element),this.loader=this.element.querySelector(".itemLoader"),this.cartCount=document.querySelectorAll(".CartCount"),this.options=JSON.parse(this.element.getAttribute("data-settings")),this.pageLoader=document.body.querySelector(".pageLoader"),this.delegateBody=new Delegate(document.body),this.pageOverlay=document.body.querySelector(".pageOverlay"),this.breakpoint=new Responsive().getCurrentBreakpoint(),this.changeEvent=new Event("quantity:changed",{bubbles:!0}),this.addToCartInstance=new AddToCart(this.element),this.bindEvents(),this.buildGroups()}onUnload(){this.delegateElement.off(),document.removeEventListener("product:added",this.onProductAddedListener)}bindEvents(){window.theme.listener=="false"&&(this.onProductAddedListener=this.onProductAdded.bind(this),document.addEventListener("product:added",this.onProductAddedListener),this.delegateElement.on("click",'[data-action="update-item-quantity"], [data-action="remove-item"]',this.updateItemQuantity.bind(this)),this.delegateElement.on("change",'[data-action="update-change-quantity"]',this.updateItemQuantity.bind(this)),this.delegateElement.on("keydown",'[data-action="update-change-quantity"]',this.preventEvent.bind(this)),this.delegateElement.on("click",'[data-action="update-item-quantity-for-group"]',this.updateItemQuantitForGroup.bind(this)),this.delegateElement.on("change",'[data-action="update-change-quantity-for-group"]',this.updateItemQuantitForGroup.bind(this)),this.delegateElement.on("keydown",'[data-action="update-change-quantity-for-group"]',this.preventEvent.bind(this)),this.delegateElement.on("quantity:changed",".QuantitySelector__CurrentQuantity",this.updateItemQuantity.bind(this)),window.theme.listener="true")}preventEvent(event2,target){(event2.which===13||event2.keyCode===13&&event2.target.getAttribute("data-action")==="update-change-quantity-for-group")&&(event2.preventDefault(),this.updateItemQuantitForGroup(event2,target)),(event2.which===13||event2.keyCode===13)&&(event2.preventDefault(),this.updateItemQuantity(event2,target))}async updateItemQuantitForGroup(event2,target){event2.preventDefault();const productInfo=event2.target.closest(".cartItem--Informations"),productId=productInfo.dataset.addAgain,value=productInfo.querySelector(".QuantitySelector__CurrentQuantity");let quantity=null;if(target.tagName==="INPUT"?quantity=parseInt(Math.max(parseInt(target.value)||0,0)):quantity=parseInt(event2.target.dataset.quantity),quantity>=2){quantity=quantity-1;try{await this.addToCartInstance.addToCartWithId(productId,quantity),value.setAttribute("value","1"),this.onProductAdded(event2)}catch(error){console.error("Error during add to cart:",error)}}quantity===0&&this.addToCartInstance.removeGroup(event2)}updateItemQuantity(event2,target){event2.preventDefault(),!target.classList.contains("additional-servece-button")&&target.closest(".cartItem").querySelector(".itemLoader")&&target.closest(".cartItem").querySelector(".itemLoader").classList.add("is-visible");var _this=this,quantity=null;target.tagName==="INPUT"?quantity=parseInt(Math.max(parseInt(target.value)||0,0)):quantity=parseInt(target.getAttribute("data-quantity")),fetch(window.routes.localeRootUrl+"/cart/change.js",{body:JSON.stringify({id:target.getAttribute("data-line-id"),quantity}),credentials:"same-origin",method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}).then(function(response){_this.renderCart(target.getAttribute("data-id"),!0),response.ok&&(_this.element.dispatchEvent(new CustomEvent("product:changed",{bubbles:!0,detail:target.getAttribute("data-id").match(/\d+/)})),localStorage.setItem(target.getAttribute("data-id").match(/\d+/),quantity))})}onProductAdded(e){e.detail.onlyRender?this.renderCart().then(()=>{if(this.pageOverlay.classList.contains("is-visible")){this.pageOverlay.classList.remove("is-visible");const focus=this.element.querySelector("[data-scrollable]");bodyScrollLock.enableBodyScroll(focus)}}):this.renderCart().then(()=>{if(this.pageOverlay.classList.contains("is-visible")){this.pageOverlay.classList.remove("is-visible");const focus=this.element.querySelector("[data-scrollable]");bodyScrollLock.enableBodyScroll(focus)}})}renderCart(lineNumber,quantityChange){this.pageLoader.style.width="100%";var _this=this;return fetch(window.routes.localeRootUrl+"/cart",{credentials:"same-origin",method:"GET"}).then(function(content){content.text().then(function(html){_this.replaceContent(html,lineNumber,quantityChange)})})}replaceContent(html,lineNumber,quantityChange){this.pageLoader.style.left="unset",this.pageLoader.style.right="0px",this.pageLoader.style.width="0%",setTimeout(()=>{this.pageLoader.style.left="0px",this.pageLoader.style.right="unset"},550);var tempElement=document.createElement("div");tempElement.innerHTML=html,this.tempOptions=JSON.parse(tempElement.querySelector("#cartPage").getAttribute("data-settings")),this.options=this.tempOptions;var number=this.tempOptions.itemCount;if(this.cartCount.forEach(num=>{num.innerHTML=`${number}`}),window.theme.cartCount=parseInt(number),lineNumber){var cartNodeParent=this.element.querySelector("#"+lineNumber);const itemToReplaceWith=tempElement.querySelector("#"+lineNumber);if(cartNodeParent&&cartNodeParent.querySelector(".itemLoader")&&cartNodeParent.querySelector(".itemLoader").classList.remove("is-visible"),itemToReplaceWith?(cartNodeParent.replaceWith(itemToReplaceWith),window.theme.enableAnimations&&new RevolutionAnimation(this.element)):cartNodeParent.classList.contains("hidden-product")?this.renderCart():(cartNodeParent.classList.add("removing"),cartNodeParent.animate([{transform:"translateY(0px)",opacity:"1"},{transform:"translateY(30px)",opacity:"0"}],{duration:500,fill:"forwards"}),setTimeout(()=>{cartNodeParent.remove()},500)),number>0&&this.element.querySelector(".CartFooter--Buttons")){const checkoutButtonParent=this.element.querySelector(".CartFooter--Buttons"),checkoutButtonToReplace=tempElement.querySelector(".cartCheckout--Button");checkoutButtonParent.replaceChild(checkoutButtonToReplace,checkoutButtonParent.querySelector(".cartCheckout--Button"));const footerTotalParent=this.element.querySelector(".MetaIcon--Wrappers"),footerTotalToReplace=tempElement.querySelector(".CartFooter--Totals");footerTotalParent&&footerTotalToReplace&&footerTotalParent.replaceChild(footerTotalToReplace,footerTotalParent.querySelector(".CartFooter--Totals"));const cartFreeShippingParent=this.element.querySelector(".cart-drawer__shipping-wrapper"),cartFreeShippingToReplace=tempElement.querySelector(".cart-drawer__shipping-wrapperLeftContent"),shippingBarTemp=tempElement.querySelector(".cart-drawer__shipping-wrapperLeftMoneyProgress"),shippingBarCurrent=this.element.querySelector(".cart-drawer__shipping-wrapperLeftMoneyProgress");cartFreeShippingToReplace&&(cartFreeShippingParent.replaceChild(cartFreeShippingToReplace,cartFreeShippingParent.querySelector(".cart-drawer__shipping-wrapperLeftContent")),shippingBarTemp&&shippingBarCurrent?shippingBarCurrent.style.width=shippingBarTemp.style.width:shippingBarCurrent&&!shippingBarTemp?shippingBarCurrent.remove():cartFreeShippingParent.append(tempElement.querySelector(".cart-drawer__shipping-wrapperLeftMoneyProgressBar")))}else{this.element.querySelector(".CartDrawer--Footer").classList.add("removing");const mainPartParent=this.element.querySelector(".CartDrawer");mainPartParent.innerHTML=tempElement.querySelector(".CartDrawer").innerHTML,window.theme.enableAnimations&&mainPartParent.querySelector("#main-cartItems").animate([{opacity:"0"},{opacity:"1"}],{duration:500,fill:"forwards"})}this.element.querySelector(".itemLoader")&&setTimeout(()=>{this.element.querySelector(".itemLoader")&&this.element.querySelector(".itemLoader").classList.remove("is-visible")},250)}else{const cartNodeParent2=this.element.querySelector(".CartDrawer").parentNode,currentScrollPosition=this.element.querySelector("#main-cartItems").scrollTop;cartNodeParent2.replaceChild(tempElement.querySelector(".CartDrawer"),this.element.querySelector(".CartDrawer")),this.element.querySelector("#main-cartItems").scrollTop=currentScrollPosition}}buildGroups(){function getElementsBetween(startElem,endElem){if(!startElem||!endElem)return;const elements=[];let current=startElem.nextElementSibling;for(;current&&current!==endElem;)elements.push(current),current=current.nextElementSibling;return elements}const openings=this.element.querySelectorAll(".product-card__group-open"),closings=this.element.querySelectorAll(".product-card__group-closed"),index=openings.length;if(!(!index||index!==closings.length))for(let i=0;i<index;i++){const opening=openings[i],closing=closings[i];getElementsBetween(opening,closing).forEach(elem=>opening.append(elem)),opening.classList=opening.dataset.classList,opening.removeAttribute("data-class-list"),opening.removeAttribute("data-index"),closing.remove()}}}customElements.define("cart-page",CartPage);class ProductCard extends HTMLElement{constructor(){super(),this.element=this,!(!this.element.querySelector('[data-action="update"]')||!responsive.matchesBreakpoint("lap_and_up"))&&(this.delegateElement=new Delegate(this.element),this.variantInput=this.element.querySelector(".product-card__variant-input"),this.bindEvents())}bindEvents(){this.delegateElement.on("change",this.updateATC.bind(this))}updateATC(e){this.variantInput.value=e.detail.variant,this.element.querySelector("[data-size]").dataset.size=e.target.value}}customElements.define("product-card",ProductCard);class FavoritesHeader extends HTMLElement{constructor(){super(),this.element=this,this.delegateBody=new Delegate(document.body),this.toggleFavorites(),this.bindEvents()}bindEvents(){this.delegateBody.on("click",'[data-action="toggle-favorites"]',this.addToFavorites.bind(this)),this.delegateBody.on("keydown",'[data-action="toggle-favorites"]',this.addToFavorites.bind(this)),this.toggleFavoritesListener=this.toggleFavorites.bind(this),this.delegateBody.on("favorites:retoggle",this.toggleFavoritesListener)}toggleFavorites(){var items=this.getFavorites(),favorites=[...document.querySelectorAll(".product-card_favorites-container")];document.body.querySelector(".empty-favorite")&&(items.length>0?(document.body.querySelector(".empty-favorite").style.display="none",document.body.querySelector(".solid-favorite").style.display="flex",new Responsive().matchesBreakpoint("pocket")&&(document.body.querySelector("favorites-header").style.display="flex")):(document.body.querySelector(".empty-favorite").style.display="flex",document.body.querySelector(".solid-favorite").style.display="none",new Responsive().matchesBreakpoint("pocket")&&(document.body.querySelector("favorites-header").style.display="none"))),favorites.forEach(function(item){var state=item.getAttribute("state"),myID=item.getAttribute("data-id"),exists=items.some(fav=>fav.id===myID);state=="not-active"&&exists?(item.querySelector(".solid-favorite").style.display="flex",item.querySelector(".empty-favorite").style.display="none",item.setAttribute("state","active")):exists||(item.querySelector(".solid-favorite").style.display="none",item.querySelector(".empty-favorite").style.display="flex",item.setAttribute("state","not-active"))})}getFavorites(){return JSON.parse(localStorage.getItem("productFavorites")||"[]").filter(item=>item.id!==null)}saveFavorites(items){localStorage.setItem("productFavorites",JSON.stringify(items.slice(0,50))),this.toggleFavorites()}removeFromFavorites(productId,size){let items=this.getFavorites();items=items.filter(item=>item.id!==productId),this.saveFavorites(items),document.body.dispatchEvent(new CustomEvent("favorite:remove",{detail:{id:productId,size}}))}addToFavorites(e){if(e.key&&e.key!="Enter")return;e.preventDefault();let items=this.getFavorites();const productId=e.target.parentElement.getAttribute("data-id")||e.target.getAttribute("data-id"),size=e.target.parentElement.getAttribute("data-size")||e.target.getAttribute("data-size")||null;if(!productId)return;if(items.findIndex(item=>item.id===productId)===-1)items.unshift({id:productId,size});else{this.removeFromFavorites(productId,size);return}this.saveFavorites(items),document.body.dispatchEvent(new CustomEvent("favorite:add",{detail:{id:productId}}))}}customElements.define("favorites-header",FavoritesHeader),sessionStorage.setItem("firstLoadFavorites",!0);class Favorites extends HTMLElement{constructor(){if(super(),this.element=this,this.delegateElement=new Delegate(this.element),this.delegateBody=new Delegate(document.body),this.options=JSON.parse(this.element.getAttribute("data-section-settings")),this.favoritesHeader=document.querySelector("favorites-header"),this.gridElement=this.element.querySelector(".favorites__grid"),this.shareButton=this.element.querySelector(".favorites__share-button-container"),this.subtotal=this.element.querySelector(".favorites__subtotal"),this.total=this.element.querySelector(".favorites__total"),this.infiniteScroll=this.element.querySelector("#favorites__infinite-scroll"),this.showAllBtn=this.element.querySelector(".favorites__show-all-button"),this.currentIndex=0,this.disableShowingAddedProducts=!1,this.treshold=650,this.drawerContent=this.element.querySelector(".product-drawer__content"),sessionStorage.getItem("firstLoadFavorites")==="true")sessionStorage.setItem("firstLoadFavorites",!1),this.renderContent(),this.bindEvents(),new AddToCart(this.element),this.productDrawer=new Drawer(this.element.querySelector("#product-drawer"));else return}bindEvents(){this.disableShowingAddedProducts||(this.delegateBody.on("favorite:remove",this.removeFavorite.bind(this)),this.delegateBody.on("invalid",()=>{this.showSnackbar("invalid")}),this.delegateBody.on("favorite:add",this.addFavorite.bind(this)),this.delegateElement.on("click",'[data-action="undo"]',()=>this.addFavorite())),this.saveProductSizeListener=this.saveProductSize.bind(this),this.delegateBody.on("favorites:size_change",this.saveProductSizeListener),this.delegateElement.on("click",'[data-action="copy-link"]',this.copyUrlToClipboard.bind(this)),this.delegateElement.on("click",'[data-action="load"]',this.handleClick.bind(this)),window.onload=this.showNotifyMeButtons(),this.delegateBody.on("click",'[data-action="notify-open"]',this.openNotifyPopup.bind(this)),this.closeNotifyPopupBinder=this.closeNotifyPopup.bind(this),window.addEventListener("beforeunload",this.clearSearchParameters.bind(this)),responsive.matchesBreakpoint("lap_and_up")||this.delegateElement.on("click",'[data-action="toggle-drawer"]',this.renderDrawerContent.bind(this)),this.delegateElement.on("click",'[data-action="selectbox-change"]',this.updateATC.bind(this))}renderDrawerContent(e){const content=e.target.closest(".product-card__selectbox").querySelector(".RevolutionSelectbox--Content");this.drawerContent.innerHTML="",Array.from(content.children).forEach(child=>{this.drawerContent.appendChild(child.cloneNode(!0))})}updateATC(e){e.preventDefault(),e.stopPropagation(),this.element.querySelector(`.product-card__variant-input[data-productid="${e.target.dataset.productid}"]`).value=e.target.dataset.variant,this.element.querySelector(`.product-card__selectbox[data-id="${e.target.dataset.productid}"]`).querySelector(".favorites__drawer-title").innerHTML=e.target.dataset.value,this.productDrawer.closeDrawer()}clearSearchParameters(){const url=new URL(window.location.href);url.search="",window.history.replaceState({},"",url.href)}renderContent(){this.compareFavorites();const favoritesTotal=this.getFavoritesToShow().length;if(favoritesTotal>0)this.rerenderFavorites(0,this.options.productsToShow);else{const inspiration=document.querySelector('[data-hidden="true"]');inspiration.style.display="block",inspiration.dataset.hidden="false"}favoritesTotal>this.options.productsToShow&&(this.showAllBtn.style.display="block"),this.subtotal.innerHTML=this.options.productsToShow,this.total.innerHTML=favoritesTotal}checkIfEmpty(){const items=this.getFavoritesToShow(),lastElement=document.querySelector("#MainContent .shopify-section:last-child");items.length===0?(this.infiniteScroll.style.display="none",this.gridElement.parentElement.style.display="none",this.shareButton.style.display="none",lastElement.id.includes("main-favorites")||(lastElement.style.display="")):(this.infiniteScroll.style.display="",this.gridElement.parentElement.style.display="",this.shareButton.style.display="",lastElement.id.includes("main-favorites")||(lastElement.style.display="none"))}handleScroll(){const top=this.infiniteScroll.getBoundingClientRect().top-this.treshold,bottom=this.infiniteScroll.getBoundingClientRect().bottom+this.treshold;top<=window.innerHeight&&bottom>=0&&this.rerenderFavorites(this.currentIndex,this.currentIndex+this.options.productsToLoad)}async handleClick(e){this.infiniteLoad=!0,e.preventDefault();const button=e.target.closest(".Button");button.querySelector(".itemLoader").classList.add("is-visible"),this.gridElement.querySelector(".product-card:last-child .product-card__link-wrapper")&&this.gridElement.querySelector(".product-card:last-child .product-card__link-wrapper").focus(),await this.rerenderFavorites(this.currentIndex,this.currentIndex+this.options.productsToLoad),button.style.display="none";const debouncedFunction=debounce(this.handleScroll.bind(this),50);this.scrollListener=scrollListener.addScrollListener(this.element,debouncedFunction)}showAndUpdateViewingInfo(){this.getFavoritesToShow().length>this.options.productsToShow?this.infiniteLoad=!1:(this.infiniteLoad=!0,this.element.querySelector(".favorites__show-all-button").style.display="none");const favoritesTotal=this.getFavoritesToShow().length;this.infiniteLoad&&(this.currentIndex>=favoritesTotal?this.subtotal.innerHTML=favoritesTotal:this.subtotal.innerHTML=this.currentIndex),this.total.innerHTML=favoritesTotal}compareFavorites(){this.arraysEqual(this.getFavoritesFromUrl(),this.getFavorites())||this.getFavoritesFromUrl().length===0||(this.disableShowingAddedProducts=!0)}arraysEqual(arr1,arr2){if(arr1.length!==arr2.length)return!1;arr1.sort((a,b)=>a.id.localeCompare(b.id)),arr2.sort((a,b)=>a.id.localeCompare(b.id));for(let i=0;i<arr1.length;i++)if(arr1[i].id!==arr2[i].id)return!1;return!0}updateUrl(){const productIds=this.base64Encode(JSON.stringify(this.getFavorites())),url=new URL(window.location);url.searchParams.set("favorites",productIds),window.history.replaceState({},"",url)}base64Encode(str){return btoa(encodeURIComponent(str))}base64Decode(str){return decodeURIComponent(atob(str))}showSelectors(){this.element.querySelectorAll(".RevolutionSelectbox").forEach(el=>new RevolutionSelectbox(el))}saveProductSize(e){console.log("susi");const items=this.getFavorites(),productId=e.detail.id,productIndex=items.findIndex(item=>item.id===productId);productIndex!==-1&&(items[productIndex].size=e.detail.size,localStorage.setItem("productFavorites",JSON.stringify(items.slice(0,50))),this.updateUrl())}setSizes(){this.getFavoritesToShow().forEach(item=>{if(item.size!==null){const selectedVariant=this.element.querySelector(`[data-id="${item.id}"] .RevolutionSelectbox--Item[data-value="${item.size}"]`);if(!selectedVariant)return;const variantId=selectedVariant.dataset.variant;selectedVariant.closest(".RevolutionSelectbox").querySelectorAll(".RevolutionSelectbox--Title").forEach(el=>el.innerHTML=selectedVariant.dataset.value),this.element.querySelector(`.product-card_favorites-container[data-id="${item.id}"]`).setAttribute("data-size",item.size),this.element.querySelector(`.product-card__form[data-productid="${item.id}"]`).querySelector(".product-card__variant-input").value=variantId}})}saveFavorites(productId,size){const items=this.getFavorites(),existingItemIndex=items.findIndex(item=>item.id===productId);existingItemIndex===-1?items.unshift({id:productId,size}):items[existingItemIndex].size=size,localStorage.setItem("productFavorites",JSON.stringify(items.slice(0,50)))}removeFavorite(e){this.lastRemovedProduct=e.detail,setTimeout(()=>{this.element.querySelector(`[data-id="${e.detail.id}"]`).closest(".product-card").remove(),this.checkIfEmpty(),this.updateUrl(),this.showSnackbar("undo")},200)}toggleFavorites(){this.checkIfEmpty(),this.favoritesHeader.toggleFavorites()}getFavorites(){return JSON.parse(localStorage.getItem("productFavorites")||"[]").filter(item=>item.id!==null)}getFavoritesFromUrl(){const encodedProductData=new URL(window.location).searchParams.get("favorites");if(!encodedProductData)return[];const decodedProductData=this.base64Decode(encodedProductData);return JSON.parse(decodedProductData)}getFavoritesToShow(){var items;return this.disableShowingAddedProducts?items=this.getFavoritesFromUrl():items=this.getFavorites(),items}getSearchQueryStrings(startIndex,endIndex){const items=this.getFavoritesToShow(),bucketSize=10,limitedItems=items.slice(startIndex,endIndex);return this.currentIndex=endIndex,Array.from({length:Math.ceil(limitedItems.length/bucketSize)},(_,i)=>limitedItems.slice(i*bucketSize,(i+1)*bucketSize).map(item=>`id:${item.id}`).join(" OR "))}async addFavorite(e){var productId,sizeExists=!0;e&&e.detail?(productId=e.detail.id,sizeExists=!1):productId=this.lastRemovedProduct.id;try{const html=await(await fetch(`/search?view=favorites&type=product&q=id:${productId}`)).text();sizeExists?this.saveFavorites(productId,this.lastRemovedProduct.size):this.saveFavorites(productId),this.appendContent(html,!0)}catch(error){console.error("Error fetching favorite:",error)}}async rerenderFavorites(startIndex,endIndex,clear){if(this.currentIndex>=this.getFavoritesToShow().length&&this.scrollListener){this.scrollListener.removeScrollListener();return}const queryStrings=this.getSearchQueryStrings(startIndex,endIndex);if(clear&&(this.gridElement.innerHTML=""),queryStrings.length===0){try{const html=await(await fetch("/?section_id=main-favorites")).text();this.appendContent(html)}catch(error){console.error("Error fetching main favorites section:",error)}return}try{const promises=queryStrings.map(string=>fetch(`${window.routes.localeRootUrl}/search?view=favorites&type=product&q=${string}`,{credentials:"same-origin",method:"GET"}));for(const promise of promises){const content=await(await promise).text();this.appendContent(content)}}catch(error){console.error("Error fetching favorites:",error)}return!0}appendContent(html,one){var tempElement=document.createElement("div");if(tempElement.innerHTML=html,tempElement=tempElement.querySelector(".favorites__grid"),one)this.gridElement.prepend(tempElement.firstElementChild);else for(;tempElement.firstElementChild;)this.gridElement.appendChild(tempElement.firstElementChild);this.toggleFavorites(),this.disableShowingAddedProducts||this.updateUrl(),this.showAndUpdateViewingInfo(),this.showNotifyMeButtons(),this.showSelectors(),this.setSizes()}async copyUrlToClipboard(){const url=window.location.href;try{await navigator.clipboard.writeText(url),this.showSnackbar("copy")}catch(error){console.error("Failed to copy URL: ",error)}}showSnackbar(identifier){this.snackbar=this.element.querySelector(`.favorites__snackbar--${identifier}`),this.snackbar.setAttribute("aria-hidden","false");const clickHandler=()=>{clearTimeout(this.snackbarTimeout),this.snackbar.setAttribute("aria-hidden","true"),this.delegateBody.off("click",clickHandler)};this.delegateBody.on("click",clickHandler),this.snackbarTimeout&&clearTimeout(this.snackbarTimeout),this.snackbarTimeout=setTimeout(()=>{this.snackbar.setAttribute("aria-hidden","true"),identifier==="undo"&&(this.rerenderFavorites(this.currentIndex,this.currentIndex+1),this.showAndUpdateViewingInfo())},3e3)}openNotifyPopup(){event.preventDefault()}showNotifyMeButtons(){this.intervalId&&clearInterval(this.intervalId),this.intervalId=setInterval(()=>{if(this.notifyMePopup=document.querySelector(".appikon-bis-inline-form-wrapper"),this.notifyMePopup){clearInterval(intervalId);const productImage=this.element.querySelector(".ProductSlider--ImageFirst").cloneNode(!0),destContainer=this.element.querySelector("#appikon-bis-inline-form-wrapper");destContainer.appendChild(productImage);const closeButton=document.createElement("button");closeButton.classList.add("notifyMe--Close"),closeButton.setAttribute("data-action","notify-close"),closeButton.innerHTML=`
          <svg
            width="20"
            height="20"
            viewBox="0 0 20 20"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path d="M10.9978 9.96635L15.9478 5.01636C16.1785 4.74696 16.163 4.34537 15.9122 4.09456C15.6614 3.84375 15.2598 3.82824 14.9904 4.05895L10.0404 9.00894L5.09045 4.05216C4.82104 3.82145 4.41945 3.83696 4.16865 4.08777C3.91784 4.33858 3.90233 4.74017 4.13304 5.00957L9.08303 9.96635L4.12625 14.9163C3.93248 15.0823 3.84807 15.3428 3.90774 15.5909C3.9674 15.8389 4.16107 16.0326 4.40911 16.0923C4.65716 16.1519 4.91771 16.0675 5.08366 15.8737L10.0404 10.9238L14.9904 15.8737C15.2598 16.1045 15.6614 16.0889 15.9122 15.8381C16.163 15.5873 16.1785 15.1857 15.9478 14.9163L10.9978 9.96635Z" fill="#555555"/>
          </svg>`,destContainer.appendChild(closeButton),this.pageOverlayElement.addEventListener("click",this.closeNotifyPopup.bind(this)),this.domDelegate.on("click",'[data-action="notify-open"]',this.openNotifyPopup.bind(this)),this.domDelegate.on("click",'[data-action="notify-close"]',this.closeNotifyPopup.bind(this)),this.element.querySelector("variant-selects")&&this.element.dispatchEvent(new CustomEvent("notify:added",{bubbles:!0,detail:this.element.querySelectorAll(".ProductPage--NotifyMe")}))}},100),setTimeout(()=>{clearInterval(this.intervalId)},1e4)}openNotifyPopup(){event.preventDefault(),this.isOpen=!0,this.notifyMeOverlay.classList.add("is-visible"),this.domDelegate.on("click",".notifyMeOverlay",this.closeNotifyPopupBinder),bodyScrollLock.disableBodyScroll(document.querySelector("[data-scrollable]"),bodyScrollLockOptions),document.querySelector(".appikon-bis-inline-form-wrapper").classList.add("showNotifyMe")}closeNotifyPopup(){event.preventDefault(),this.isOpen&&(this.domDelegate.off("click",".notifyMeOverlay",this.closeNotifyPopupBinder),this.notifyMeOverlay.classList.remove("is-visible"),bodyScrollLock.enableBodyScroll(document.querySelector("[data-scrollable]"),bodyScrollLockOptions),document.querySelector(".appikon-bis-inline-form-wrapper").classList.remove("showNotifyMe"),this.isOpen=!1)}}customElements.define("favorites-section",Favorites);class CountryModal extends HTMLElement{constructor(){super(),this.element=this;const selectBoxes=this.element.querySelectorAll(".RevolutionSelectbox");responsive.matchesBreakpoint("lap_and_up")?selectBoxes.length>0&&selectBoxes.forEach((item,i)=>{new RevolutionSelectbox(item)}):selectBoxes.length>0&&selectBoxes.forEach((item,i)=>{new RevolutionSelectbox(item,!0,!0)}),this.bindEvents()}bindEvents(){document.addEventListener("change:countrySelector",this.updateLanguageOptions.bind(this))}updateLanguageOptions(){const languagesJSON=event.detail.languages,languages=JSON.parse(languagesJSON),container=this.element.querySelector(".country-selector__dropdown--language .RevolutionSelectbox--InnerContent");container.innerHTML="";const exampleItem=this.element.querySelector(".RevolutionSelectbox--Item--Example");languages.forEach(language=>{const newItem=exampleItem.cloneNode(!0);newItem.classList.remove("RevolutionSelectbox--Item--Example"),newItem.setAttribute("data-value",language.iso),newItem.setAttribute("data-name",language.name),newItem.innerHTML=language.name,container.appendChild(newItem)});const newSelectbox=this.element.querySelector(".country-selector__dropdown--language .RevolutionSelectbox");responsive.matchesBreakpoint("lap_and_up")?new RevolutionSelectbox(newSelectbox):new RevolutionSelectbox(newSelectbox,!0,!0);const languageButton=this.element.querySelector('[data-select="language_code"]');if(!languageButton)return;const languageButtonTitle=languageButton.querySelector(".RevolutionSelectbox--Title"),languageSelector=this.element.querySelector("#language_selector");languageSelector.value=languages[0].iso,languageButtonTitle.innerHTML=languages[0].name,console.log(languages.length),languages.length<2?(languageButton.style.pointerEvents="none",languageButtonTitle.style.color="var(--primary_grey)",languageButton.querySelector(".Svg--arrow-down-sharp").style.opacity="0"):(languageButton.style.pointerEvents="all",languageButtonTitle.style.color="var(--primary_text)",languageButton.querySelector(".Svg--arrow-down-sharp").style.opacity="1")}}customElements.define("country-modal",CountryModal);class CollectionBanner extends HTMLElement{constructor(){super(),this.element=this,this.delegateElement=new Delegate(this.element),responsive.matchesBreakpoint("lap_and_up")||(this.carouselElement=this.element.querySelector(".collection-banner-links__swiper-mobile .swiper"),this.carousel=new RevolutionSwiper(this.carouselElement)),this.bindEvents()}bindEvents(){}}customElements.define("collection-banner",CollectionBanner);class SearcInfiniteScroll extends HTMLElement{constructor(){super(),this.element=this,this.treshold=650,this.handleScrollListener=this.handleScroll.bind(this),this.delegateBody=new Delegate(document.body),this.delegateElement=new Delegate(this.element),this.bindEvents(),this.running=!1}bindEvents(){this.listenerBinder=this.addUserScrollListener.bind(this),this.delegateElement.on("click",'[data-action="load"]',this.listenerBinder)}addUserScrollListener(e){e.preventDefault(),this.handleClick(),this.initialize(),this.initObserver(),this.running==!0,this.delegateElement.off("click",this.listenerBinder)}initialize(){document.addEventListener("scroll",this.handleScrollListener)}initObserver(){const observerOptions={root:null,rootMargin:"0px",threshold:0};this.observer=new IntersectionObserver(this.handleIntersect.bind(this),observerOptions),this.observer.observe(this.mainContainer)}handleIntersect(entries){entries.forEach(entry=>{entry.isIntersecting?this.running==!1&&(this.initialize(),this.running=!0):this.destroy()})}handleClick(){if(event.preventDefault(),event.target.closest("a").setAttribute("disabled","true"),this.lastClick=event.target.parentElement.id,this.paginationElement=event.target.closest(".btnLoad--wrapper"),this.mainContainer=event.target.closest("[data-results]"),!!this.paginationElement&&(this.nextPageLinkElement=this.paginationElement.querySelector("a"),this.nextPageLinkElement)){const nextPageUrl=this.nextPageLinkElement.href,promises=this.generateFetchPromises(nextPageUrl);this.renderData(promises,!1,this.paginationElement)}}handleScroll(){if(this.paginationElement=document.querySelector(`#${this.lastClick}`),!this.paginationElement)return;const top=this.paginationElement.getBoundingClientRect().top-this.treshold,bottom=this.paginationElement.getBoundingClientRect().bottom+this.treshold;if(top<=window.innerHeight&&bottom>=0&&(this.nextPageLinkElement=this.paginationElement.querySelector("a"),this.nextPageLinkElement)){this.destroy();const nextPageUrl=this.nextPageLinkElement.href,promises=this.generateFetchPromises(nextPageUrl);this.renderData(promises,!1,this.paginationElement)}}destroy(){document.removeEventListener("scroll",this.handleScrollListener)}generateFetchPromises(nextPageUrl){const promises=[];if(nextPageUrl==!1){const hasSearchParameters=window.location.search.length>0,limit=parseInt(sessionStorage.getItem("pageNum"));for(let i=2;i<=limit;i++){let url;hasSearchParameters?url=`${window.location.href}&page=${i}`:url=`${window.location.href}?page=${i}`,promises.push(fetch(url,{credentials:"same-origin",method:"GET"}))}}else{const url=`${nextPageUrl}`;promises.push(fetch(url,{credentials:"same-origin",method:"GET"}))}return promises}async renderData(promises,restoreContent,paginationElement){try{const responses=await Promise.all(promises),contents=await Promise.all(responses.map(response=>response.text()));let isLastPromise=!1;contents.forEach((content,index)=>{isLastPromise=index===contents.length-1,this.appendContent(content,isLastPromise,restoreContent)})}catch(error){console.error("Error fetching or parsing data:",error)}}appendContent(content,lastPromise,restoreContent){const doc=new DOMParser().parseFromString(content,"text/html"),mainAreaId=this.mainContainer.getAttribute("id"),newMainContainer=doc.querySelector(`#${mainAreaId}`);this.viewingItems=this.mainContainer.querySelector(".template-style");const newViewingItems=newMainContainer.querySelector(".template-style");newViewingItems&&this.viewingItems&&(this.viewingItems.innerHTML=newViewingItems.innerHTML),newMainContainer.querySelectorAll("[data-items]").forEach(block=>{this.mainContainer.insertAdjacentHTML("beforeend",block.outerHTML)}),this.element.querySelector("a").remove(),this.mainContainer.appendChild(this.element);const newPaginationLink=newMainContainer.querySelector(".btnLoad--wrapper a");console.log(newPaginationLink),newPaginationLink&&(newPaginationLink.style.display="none",this.element.querySelector(".btnLoad--wrapper").appendChild(newPaginationLink)),lastPromise&&this.initialize(),lastPromise&&restoreContent&&this.restoreScroll(),document.dispatchEvent(new CustomEvent("pagination:finished",{bubbles:!0})),requestAnimationFrame(()=>{document.body.dispatchEvent(new CustomEvent("favorites:retoggle",{}))})}restoreScroll(){const selector=`${this.containerSelector} [data-id='${sessionStorage.getItem("clickedProductId")}']`,targetElement=document.querySelector(selector);targetElement&&targetElement.scrollIntoView({behavior:"smooth",block:"end"})}}customElements.define("infinite-scroll",SearcInfiniteScroll);class Search extends HTMLElement{constructor(){super(),this.element=this,this.delegateElement=new Delegate(this.element),this.delegateBody=new Delegate(document.body),this.element.style.opacity="0",this.breakpoint=new Responsive().getCurrentBreakpoint(),this.resultElements=this.element.querySelectorAll(".Search--Result"),this.resultArticles=this.element.querySelector(".Search--Result.Article--Result"),this.resultProducts=this.element.querySelector(".Search--Result.searchProducts--results"),this.resultCollections=this.element.querySelector(".Search--Result.Collection--Result"),this.openProductBtn=this.element.querySelector("#productBtn"),this.openArticleBtn=this.element.querySelector("#articleBtn"),this.openCollectionBtn=this.element.querySelector("#collectionBtn"),new AddToCart(this.element),this.openProductBtn&&this.openProductBtn.classList.contains("active")&&(this.resultArticles&&(this.resultArticles.style.display="none"),this.resultCollections&&(this.resultCollections.style.display="none")),this.openArticleBtn&&this.openArticleBtn.classList.contains("active")&&(this.resultsProduct&&(this.resultProducts.style.display="none"),this.resultCollections&&(this.resultCollections.style.display="none")),this.openCollectionBtn&&this.openCollectionBtn.classList.contains("active")&&(this.resultsProduct&&(this.resultProducts.style.display="none"),this.resultArticles&&(this.resultArticles.style.display="none")),this.bindEvents()}bindEvents(){this.delegateElement.on("click",'[data-action="toggle-products"]',this.showProducts.bind(this)),this.delegateElement.on("click",'[data-action="toggle-articles"]',this.showArticles.bind(this)),this.delegateElement.on("click",'[data-action="toggle-collections"]',this.showCollections.bind(this)),document.addEventListener("DOMContentLoaded",this.handleMainSearchWithPagination.bind(this))}handleMainSearchWithPagination(){const currentURL=window.location.href,updatedURL=`/search?q=${new URL(currentURL).searchParams.get("q")}`,predictiveURL=routes.predictive_search_url,lastInputValue=this.querySelector(".Search--Input").dataset.inputValue,articleURL=updatedURL+"&type=article",productURL=currentURL+"&type=product",collectionPromise=fetch(`${predictiveURL}?q=${encodeURIComponent(lastInputValue)}&resources[limit_scope]=each&section_id=collection_search_item`).then(response=>response.text()).then(html=>new DOMParser().parseFromString(html,"text/html").querySelector("div")),articlePromise=fetch(articleURL).then(response=>response.text()).then(html=>{const articleResults=new DOMParser().parseFromString(html,"text/html").querySelectorAll(".templateSearch");return Array.from(articleResults).map(result=>result.innerHTML)}),productPromise=fetch(productURL).then(response=>response.text()).then(html=>{const productResults=new DOMParser().parseFromString(html,"text/html").querySelectorAll(".templateSearch");return Array.from(productResults).map(result=>result.innerHTML)});Promise.all([articlePromise,productPromise,collectionPromise]).then(results=>{var articleData=results[0],productData=results[1],collectionData=results[2];console.log(results);var articleDiv=document.createElement("div");if(articleDiv.innerHTML=articleData.join(""),console.log(collectionData),collectionData){var collectionDiv=document.createElement("div");collectionDiv.innerHTML=collectionData?collectionData.outerHTML:null}var productDiv=document.createElement("div");productDiv.innerHTML=productData.join(""),this.updateResultNumber(productDiv,articleDiv,collectionDiv),this.updateContentGrid(productDiv,articleDiv,collectionDiv)})}updateContentGrid(productData,articleData,collectionData){const productGrid=productData.querySelector(".searchProducts--results"),articleGrid=articleData.querySelector(".Article--Result"),collectionGrid=collectionData?collectionData.querySelector(".collection-results-grid"):null,oldDataProduct=this.element.querySelector(".searchProducts--results"),oldDataArticle=this.element.querySelector(".Article--Result"),oldDataCollection=this.element.querySelector(".Collection--Result");oldDataProduct&&productGrid&&(oldDataProduct.innerHTML=productGrid.innerHTML,requestAnimationFrame(()=>{document.body.dispatchEvent(new CustomEvent("favorites:retoggle",{}))})),oldDataCollection&&collectionGrid&&(oldDataCollection.innerHTML=collectionGrid.innerHTML),(!oldDataCollection||oldDataCollection.dataset.empty=="true")&&!oldDataProduct&&!oldDataArticle&&collectionGrid&&(this.element.querySelector(".empty_state").innerHTML=collectionData.querySelector(".main-templateSearch--WrapperBtns").innerHTML,this.element.querySelector(".Collection--Result").innerHTML=collectionData.querySelector(".collection-results-grid").innerHTML,this.element.querySelector(".Collection--Result").style.display="grid"),oldDataArticle&&articleGrid&&(oldDataArticle.innerHTML=articleGrid.innerHTML),this.element.style.opacity="1"}updateResultNumber(div1,div2,div3){const productNumber=div1.querySelector(".main-templateSearch--WrapperBtns")?div1.querySelector(".main-templateSearch--WrapperBtns").dataset.count:null,articleNumber=div2.querySelector(".main-templateSearch--WrapperBtns")?div2.querySelector(".main-templateSearch--WrapperBtns").dataset.count:null,collectionNumber=parseInt(div3?div3.querySelector(".collection-results-grid").dataset.count:null);this.element.querySelector(".loadMoreBtn--itemsNumProducts")&&(this.element.querySelector(".loadMoreBtn--itemsNumProducts").innerHTML=productNumber),this.element.querySelector(".loadMoreBtn--itemsNumArticles")&&(this.element.querySelector(".loadMoreBtn--itemsNumArticles").innerHTML=articleNumber);const itemNumber=document.body.querySelector("#productBtn .itemNumber")?document.body.querySelector("#productBtn .itemNumber"):null;itemNumber&&(itemNumber.innerHTML=productNumber,(productNumber==0||!productNumber)&&this.openProductBtn&&(this.openProductBtn.style.display="none"));const itemNumber_3=this.element.querySelector(".itemNumber_3")?this.element.querySelector(".itemNumber_3"):null,itemNumber_2=this.element.querySelector(".itemNumber_2")?this.element.querySelector(".itemNumber_2"):null;console.log(itemNumber_2),itemNumber_2&&(itemNumber_2.innerHTML=articleNumber,(articleNumber==0||!articleNumber)&&(console.log("here?"),this.openArticleBtn&&(this.openArticleBtn.style.display="none"))),itemNumber_3&&(itemNumber_3.innerHTML=collectionNumber,(collectionNumber==0||!collectionNumber)&&this.openCollectionBtn&&(this.openCollectionBtn.style.display="none")),productNumber!==0&&this.showProducts(),console.log(articleNumber),(productNumber==0||!productNumber)&&articleNumber!==0&&articleNumber&&this.showArticles()}showProducts(){(this.resultArticles||this.resultCollections)&&(this.resultArticles&&(this.element.querySelector(".Search--Result.Article--Result").style.display="none"),this.resultCollections&&(this.element.querySelector(".Search--Result.Collection--Result").style.display="none"));const activeBarDesk=this.element.querySelector(".desktop-active-bar"),activeBarMob=this.element.querySelector(".mobile-active-bar");(this.breakpoint==="desktop"||this.breakpoint==="lap")&&(activeBarDesk.style.display="flex",this.element.querySelector(".FilterBar.not_mobile").style.display="flex"),(this.breakpoint==="tablet"||this.breakpoint==="phone")&&(activeBarMob.style.display="flex",this.element.querySelector(".FilterBar.not_desktop").style.display="flex"),this.element.querySelectorAll(".SearchProductWrapper").forEach(product=>{product.classList.remove("hidden")}),this.element.querySelectorAll(".article-wrapper").forEach(article=>{article.classList.add("hidden")}),this.element.querySelectorAll(".collection-wrapper").forEach(article=>{article.classList.add("hidden")});const viewProducts=this.element.querySelector(".products-load-more");viewProducts&&viewProducts.classList.remove("hidden"),this.openProductBtn=this.element.querySelector("#productBtn"),this.openCollectionBtn=this.element.querySelector("#collectionBtn"),this.openArticleBtn=this.element.querySelector("#articleBtn"),this.openProductBtn&&this.openProductBtn.classList.add("active"),this.openCollectionBtn&&this.openCollectionBtn.classList.remove("active"),this.openArticleBtn&&this.openArticleBtn.classList.remove("active"),this.element.querySelector("#mainCollectionHolder")&&(this.element.querySelector("#mainCollectionHolder").style.display="block")}showCollections(){this.resultProducts&&(this.element.querySelector("#mainCollectionHolder").style.display="none",(this.breakpoint==="desktop"||this.breakpoint==="lap")&&(this.element.querySelector(".FilterBar.not_mobile").style.display="none"),(this.breakpoint==="tablet"||this.breakpoint==="phone")&&(this.element.querySelector(".FilterBar.not_desktop").style.display="none"),this.element.querySelectorAll(".collection__active-filters.in-the-line").forEach(active=>{active.style.display="none"}));const collectiolnElements=this.element.querySelectorAll(".collection-wrapper"),articleElements=this.element.querySelectorAll(".article-wrapper"),productElements=this.element.querySelectorAll(".SearchProductWrapper");collectiolnElements.forEach(collection=>{collection.classList.remove("hidden")}),articleElements.forEach(article=>{article.classList.add("hidden")}),productElements.forEach(product=>{product.classList.add("hidden")});const viewProducts=this.element.querySelector(".products-load-more"),viewArticles=this.element.querySelector(".articles-load-more");(viewProducts||viewArticles)&&(viewProducts&&viewProducts.classList.add("hidden"),viewArticles&&viewArticles.classList.add("hidden")),this.openProductBtn=this.element.querySelector("#productBtn"),this.openCollectionBtn=this.element.querySelector("#collectionBtn"),this.openArticleBtn=this.element.querySelector("#articleBtn"),this.openProductBtn.classList.remove("active"),this.openArticleBtn.classList.remove("active"),this.openCollectionBtn.classList.add("active"),this.resultCollections&&(this.resultCollections.style.display="grid")}showArticles(){this.resultProducts&&(this.element.querySelector("#mainCollectionHolder").style.display="none"),(this.breakpoint==="desktop"||this.breakpoint==="lap")&&(this.element.querySelector(".FilterBar.not_mobile").style.display="none"),(this.breakpoint==="tablet"||this.breakpoint==="phone")&&(this.element.querySelector(".FilterBar.not_desktop").style.display="none"),this.element.querySelectorAll(".collection__active-filters.in-the-line").forEach(active=>{active.style.display="none"}),this.resultCollections&&(this.element.querySelector(".Search--Result.Collection--Result").style.display="none");const articleElements=this.element.querySelectorAll(".article-wrapper"),productElements=this.element.querySelectorAll(".SearchProductWrapper"),collectionElements=this.element.querySelectorAll(".collection-wrapper");articleElements.forEach(article=>{article.classList.remove("hidden")}),productElements.forEach(product=>{product.classList.add("hidden")}),collectionElements.forEach(collection=>{collection.classList.add("hidden")});const viewProducts=this.element.querySelector(".products-load-more");viewProducts&&viewProducts.classList.add("hidden");const articleProducts=this.element.querySelector(".articles-load-more");articleProducts&&articleProducts.classList.remove("hidden"),this.openProductBtn=this.element.querySelector("#productBtn"),this.openCollectionBtn=this.element.querySelector("#collectionBtn"),this.openArticleBtn=this.element.querySelector("#articleBtn"),this.openProductBtn.classList.remove("active"),this.openCollectionBtn.classList.remove("active"),this.openArticleBtn.classList.add("active"),this.resultArticles&&(this.resultArticles.style.display="grid")}}customElements.define("search-component",Search);class SliderTextSection extends HTMLElement{constructor(){super(),this.element=this,this.carouselElement=this.element.querySelector(".swiper"),this.carousel=new RevolutionSwiper(this.carouselElement)}}customElements.define("slider-text",SliderTextSection);class CollectionShowcase extends HTMLElement{constructor(){super(),this.element=this,this.delegateElement=new Delegate(this.element);const grid=this.element.querySelector(".collection-showcase__grid-desktop");if(grid){const items=grid.querySelectorAll(".collection-showcase__collection");items.length===5&&(items[4].style.display="none")}}}customElements.define("collection-showcase",CollectionShowcase);class PdpUspSection extends HTMLElement{constructor(){super(),this.element=this,this.carouselElement=this.element.querySelector(".swiper");const breakpoint=new Responsive().getCurrentBreakpoint();(breakpoint==="phone"||breakpoint==="tablet")&&this.carouselElement&&(this.carousel=new RevolutionSwiper(this.carouselElement))}}customElements.define("pdp-usp-section",PdpUspSection);
//# sourceMappingURL=/cdn/shop/t/85/assets/global.js.map?v=90388172200701011971750667544
